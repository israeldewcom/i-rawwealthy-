<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RawWealthy Elite - Advanced Referral Platform</title>
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS Variables & Base Styles -->
    <style>
        :root {
            /* Primary Colors */
            --primary: #4361EE;
            --primary-dark: #3A56D4;
            --primary-light: #4895EF;
            --secondary: #4CC9F0;
            --accent: #F72585;
            --success: #43AA8B;
            --warning: #F9C74F;
            --danger: #EF476F;
            --info: #118AB2;
            
            /* Gradient Themes */
            --gradient-primary: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            --gradient-secondary: linear-gradient(135deg, var(--secondary) 0%, var(--primary-light) 100%);
            --gradient-accent: linear-gradient(135deg, var(--accent) 0%, #B5179E 100%);
            --gradient-success: linear-gradient(135deg, var(--success) 0%, #38B2AC 100%);
            --gradient-warning: linear-gradient(135deg, var(--warning) 0%, #FB8500 100%);
            --gradient-danger: linear-gradient(135deg, var(--danger) 0%, #FF6B8B 100%);
            
            /* Dark Theme */
            --dark-1: #0F172A;
            --dark-2: #1E293B;
            --dark-3: #334155;
            --dark-4: #475569;
            
            /* Light Theme */
            --light-1: #F8FAFC;
            --light-2: #F1F5F9;
            --light-3: #E2E8F0;
            --light-4: #CBD5E1;
            
            /* Text Colors */
            --text-primary: #F8FAFC;
            --text-secondary: #94A3B8;
            --text-muted: #64748B;
            
            /* Spacing */
            --space-xs: 0.5rem;
            --space-sm: 1rem;
            --space-md: 1.5rem;
            --space-lg: 2rem;
            --space-xl: 3rem;
            --space-2xl: 4rem;
            --space-3xl: 6rem;
            
            /* Border Radius */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            --radius-2xl: 24px;
            --radius-full: 9999px;
            
            /* Shadows */
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.15);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.2);
            --shadow-xl: 0 20px 40px rgba(0,0,0,0.25);
            --shadow-inner: inset 0 2px 4px rgba(0,0,0,0.06);
            
            /* Transitions */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-normal: 250ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Z-index */
            --z-dropdown: 1000;
            --z-sticky: 1020;
            --z-fixed: 1030;
            --z-modal: 1040;
            --z-popover: 1050;
            --z-tooltip: 1060;
        }

        /* Light Theme */
        [data-theme="light"] {
            --dark-1: #FFFFFF;
            --dark-2: #F8FAFC;
            --dark-3: #F1F5F9;
            --dark-4: #E2E8F0;
            
            --light-1: #0F172A;
            --light-2: #1E293B;
            --light-3: #334155;
            --light-4: #475569;
            
            --text-primary: #1E293B;
            --text-secondary: #475569;
            --text-muted: #64748B;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background-color: var(--dark-1);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(67, 97, 238, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(247, 37, 133, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(67, 170, 139, 0.03) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            line-height: 1.2;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        button {
            font-family: inherit;
            cursor: pointer;
            border: none;
            outline: none;
        }

        input, textarea, select {
            font-family: inherit;
        }

        /* Utility Classes */
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-md);
        }

        .text-center { text-align: center; }
        .text-left { text-align: left; }
        .text-right { text-align: right; }

        .d-none { display: none !important; }
        .d-block { display: block !important; }
        .d-flex { display: flex !important; }
        .d-grid { display: grid !important; }

        .flex-column { flex-direction: column; }
        .flex-wrap { flex-wrap: wrap; }
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        .justify-end { justify-content: flex-end; }
        .align-center { align-items: center; }
        .align-start { align-items: flex-start; }
        .align-end { align-items: flex-end; }

        .gap-1 { gap: var(--space-xs); }
        .gap-2 { gap: var(--space-sm); }
        .gap-3 { gap: var(--space-md); }
        .gap-4 { gap: var(--space-lg); }
        .gap-5 { gap: var(--space-xl); }

        .w-100 { width: 100%; }
        .h-100 { height: 100%; }

        .rounded-sm { border-radius: var(--radius-sm); }
        .rounded-md { border-radius: var(--radius-md); }
        .rounded-lg { border-radius: var(--radius-lg); }
        .rounded-xl { border-radius: var(--radius-xl); }
        .rounded-full { border-radius: var(--radius-full); }

        .shadow-sm { box-shadow: var(--shadow-sm); }
        .shadow { box-shadow: var(--shadow-md); }
        .shadow-lg { box-shadow: var(--shadow-lg); }
        .shadow-xl { box-shadow: var(--shadow-xl); }

        .position-relative { position: relative; }
        .position-absolute { position: absolute; }
        .position-fixed { position: fixed; }
        .position-sticky { position: sticky; }

        .overflow-hidden { overflow: hidden; }
        .overflow-auto { overflow: auto; }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideInLeft {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        .animate-pulse {
            animation: pulse 2s infinite;
        }

        .animate-spin {
            animation: spin 1s linear infinite;
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--dark-3);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Notification System */
        .notification-container {
            position: fixed;
            top: var(--space-md);
            right: var(--space-md);
            z-index: var(--z-modal);
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
            max-width: 400px;
            width: 100%;
        }

        .notification {
            background: var(--dark-2);
            border: 1px solid var(--dark-3);
            border-radius: var(--radius-lg);
            padding: var(--space-md);
            box-shadow: var(--shadow-lg);
            animation: slideInRight 0.3s ease-out forwards;
            position: relative;
            overflow: hidden;
        }

        .notification::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
        }

        .notification.success::before {
            background: var(--success);
        }

        .notification.error::before {
            background: var(--danger);
        }

        .notification.warning::before {
            background: var(--warning);
        }

        .notification.info::before {
            background: var(--info);
        }

        .notification-close {
            position: absolute;
            top: var(--space-xs);
            right: var(--space-xs);
            background: none;
            color: var(--text-muted);
            width: 24px;
            height: 24px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-fast);
        }

        .notification-close:hover {
            background: var(--dark-3);
            color: var(--text-primary);
        }

        /* Modal System */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(8px);
            z-index: var(--z-modal);
            display: none;
            align-items: center;
            justify-content: center;
            padding: var(--space-md);
            opacity: 0;
            transition: opacity var(--transition-normal);
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal {
            background: var(--dark-2);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow: auto;
            animation: fadeIn 0.3s ease-out;
            position: relative;
        }

        .modal-large {
            max-width: 800px;
        }

        .modal-close {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
            background: var(--dark-3);
            color: var(--text-muted);
            width: 32px;
            height: 32px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-fast);
            z-index: 1;
        }

        .modal-close:hover {
            background: var(--dark-4);
            color: var(--text-primary);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: var(--space-md);
        }

        .form-label {
            display: block;
            margin-bottom: var(--space-xs);
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-control {
            width: 100%;
            padding: var(--space-sm) var(--space-md);
            background: var(--dark-3);
            border: 2px solid var(--dark-4);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            font-size: 1rem;
            transition: var(--transition-fast);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .form-control::placeholder {
            color: var(--text-muted);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-xs);
            padding: var(--space-sm) var(--space-lg);
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition-fast);
            border: none;
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::after {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-secondary {
            background: var(--gradient-secondary);
            color: white;
        }

        .btn-success {
            background: var(--gradient-success);
            color: white;
        }

        .btn-warning {
            background: var(--gradient-warning);
            color: #1E293B;
        }

        .btn-danger {
            background: var(--gradient-danger);
            color: white;
        }

        .btn-accent {
            background: var(--gradient-accent);
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .btn-sm {
            padding: var(--space-xs) var(--space-md);
            font-size: 0.875rem;
        }

        .btn-lg {
            padding: var(--space-md) var(--space-xl);
            font-size: 1.125rem;
        }

        .btn-block {
            width: 100%;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Cards */
        .card {
            background: var(--dark-2);
            border: 1px solid var(--dark-3);
            border-radius: var(--radius-xl);
            padding: var(--space-lg);
            transition: var(--transition-normal);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            margin-bottom: var(--space-md);
            padding-bottom: var(--space-sm);
            border-bottom: 1px solid var(--dark-3);
        }

        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .badge-secondary {
            background: var(--gradient-secondary);
            color: white;
        }

        .badge-success {
            background: var(--gradient-success);
            color: white;
        }

        .badge-warning {
            background: var(--gradient-warning);
            color: #1E293B;
        }

        .badge-danger {
            background: var(--gradient-danger);
            color: white;
        }

        .badge-accent {
            background: var(--gradient-accent);
            color: white;
        }

        /* Layout Components */
        .page {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            min-height: calc(100vh - 80px);
        }

        .page.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .section {
            padding: var(--space-2xl) 0;
        }

        .section-header {
            margin-bottom: var(--space-2xl);
            text-align: center;
        }

        .section-title {
            font-size: 2.5rem;
            margin-bottom: var(--space-md);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-subtitle {
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--dark-3);
            z-index: var(--z-fixed);
            height: 80px;
            display: flex;
            align-items: center;
        }

        .navbar-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-weight: 800;
            font-size: 1.5rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-lg);
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .logo-text {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-menu {
            display: flex;
            gap: var(--space-sm);
            list-style: none;
        }

        .nav-link {
            padding: var(--space-sm) var(--space-lg);
            border-radius: var(--radius-full);
            font-weight: 500;
            color: var(--text-secondary);
            transition: var(--transition-fast);
            position: relative;
        }

        .nav-link:hover,
        .nav-link.active {
            color: white;
            background: var(--dark-3);
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 3px;
            background: var(--primary);
            border-radius: var(--radius-full);
        }

        .nav-user {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-lg);
            margin-bottom: var(--space-2xl);
        }

        .stat-card {
            background: var(--dark-2);
            border: 1px solid var(--dark-3);
            border-radius: var(--radius-xl);
            padding: var(--space-lg);
            text-align: center;
            transition: var(--transition-normal);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-lg);
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-md);
            color: white;
            font-size: 1.5rem;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: var(--space-xs);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Progress Bars */
        .progress-container {
            margin-bottom: var(--space-lg);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-xs);
        }

        .progress-label {
            font-weight: 500;
            color: var(--text-primary);
        }

        .progress-value {
            font-weight: 600;
            color: var(--primary);
        }

        .progress-bar {
            height: 12px;
            background: var(--dark-3);
            border-radius: var(--radius-full);
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
            width: 0%;
            transition: width 1s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.3),
                transparent
            );
            animation: shimmer 2s infinite linear;
        }

        /* Rewards Grid */
        .rewards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: var(--space-xl);
        }

        .reward-card {
            background: var(--dark-2);
            border: 1px solid var(--dark-3);
            border-radius: var(--radius-xl);
            overflow: hidden;
            transition: var(--transition-normal);
            position: relative;
        }

        .reward-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
        }

        .reward-card.locked {
            opacity: 0.7;
            filter: grayscale(0.5);
        }

        .reward-card.achieved {
            border-color: var(--success);
            box-shadow: 0 0 30px rgba(67, 170, 139, 0.1);
        }

        .reward-card.available {
            border-color: var(--warning);
            box-shadow: 0 0 30px rgba(249, 199, 79, 0.1);
        }

        .reward-badge {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
            z-index: 1;
        }

        .reward-image {
            width: 100%;
            height: 200px;
            overflow: hidden;
        }

        .reward-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
        }

        .reward-card:hover .reward-image img {
            transform: scale(1.1);
        }

        .reward-content {
            padding: var(--space-lg);
        }

        .reward-tier {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: var(--gradient-primary);
            color: white;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: var(--space-sm);
        }

        .reward-title {
            font-size: 1.25rem;
            margin-bottom: var(--space-xs);
            color: var(--text-primary);
        }

        .reward-description {
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
            font-size: 0.875rem;
        }

        .reward-requirements {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-md);
            background: var(--dark-3);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-md);
        }

        .requirement-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        /* Leaderboard */
        .leaderboard {
            background: var(--dark-2);
            border: 1px solid var(--dark-3);
            border-radius: var(--radius-xl);
            overflow: hidden;
        }

        .leaderboard-header {
            padding: var(--space-lg);
            background: var(--dark-3);
            border-bottom: 1px solid var(--dark-4);
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
        }

        .leaderboard-table th {
            padding: var(--space-md) var(--space-lg);
            text-align: left;
            font-weight: 600;
            color: var(--text-secondary);
            background: var(--dark-3);
            border-bottom: 2px solid var(--dark-4);
        }

        .leaderboard-table td {
            padding: var(--space-md) var(--space-lg);
            border-bottom: 1px solid var(--dark-4);
        }

        .leaderboard-table tr:hover {
            background: var(--dark-3);
        }

        .rank-badge {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
        }

        .rank-1 { background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); }
        .rank-2 { background: linear-gradient(135deg, #C0C0C0 0%, #808080 100%); }
        .rank-3 { background: linear-gradient(135deg, #CD7F32 0%, #8B4513 100%); }

        /* Footer */
        .footer {
            background: var(--dark-2);
            border-top: 1px solid var(--dark-3);
            padding: var(--space-2xl) 0 var(--space-xl);
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-xl);
            margin-bottom: var(--space-2xl);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: var(--space-sm);
        }

        .footer-links a {
            color: var(--text-secondary);
            transition: var(--transition-fast);
        }

        .footer-links a:hover {
            color: var(--primary);
        }

        .footer-bottom {
            text-align: center;
            padding-top: var(--space-xl);
            border-top: 1px solid var(--dark-3);
            color: var(--text-muted);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .section-title {
                font-size: 2rem;
            }
            
            .rewards-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .navbar {
                height: 70px;
            }
            
            .nav-menu {
                position: fixed;
                top: 70px;
                left: -100%;
                width: 100%;
                height: calc(100vh - 70px);
                background: var(--dark-2);
                flex-direction: column;
                padding: var(--space-xl);
                transition: left 0.3s ease;
                z-index: var(--z-modal);
            }
            
            .nav-menu.active {
                left: 0;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .section {
                padding: var(--space-xl) 0;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .rewards-grid {
                grid-template-columns: 1fr;
            }
            
            .modal {
                margin: var(--space-sm);
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 var(--space-sm);
            }
            
            .btn {
                padding: var(--space-xs) var(--space-md);
                font-size: 0.875rem;
            }
            
            .card {
                padding: var(--space-md);
            }
            
            .section-title {
                font-size: 1.75rem;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--dark-2);
            border-radius: var(--radius-full);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--dark-4);
            border-radius: var(--radius-full);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }
    </style>
</head>
<body>
    <!-- Theme Toggle -->
    <button id="themeToggle" class="position-fixed btn btn-primary" style="bottom: 30px; right: 30px; z-index: var(--z-fixed); width: 50px; height: 50px; border-radius: var(--radius-full);">
        <i class="fas fa-moon"></i>
    </button>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="container navbar-container">
            <a href="#dashboard" class="logo">
                <div class="logo-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <span class="logo-text">RawWealthy Elite</span>
            </a>
            
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            
            <ul class="nav-menu" id="navMenu">
                <li><a href="#dashboard" class="nav-link active" data-page="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="#rewards" class="nav-link" data-page="rewards"><i class="fas fa-gift"></i> Rewards</a></li>
                <li><a href="#leaderboard" class="nav-link" data-page="leaderboard"><i class="fas fa-trophy"></i> Leaderboard</a></li>
                <li><a href="#profile" class="nav-link" data-page="profile"><i class="fas fa-user"></i> Profile</a></li>
                <li><a href="#logout" class="nav-link" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
            
            <div class="nav-user d-none" id="navUser">
                <div class="user-avatar" id="userAvatar">U</div>
                <div>
                    <div class="text-sm font-semibold" id="userName">User</div>
                    <div class="text-xs text-muted" id="userTier">Bronze Tier</div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main style="margin-top: 80px; min-height: calc(100vh - 80px);">
        <!-- Login Page -->
        <div class="page active" id="loginPage">
            <section class="section">
                <div class="container">
                    <div class="d-flex justify-center align-center" style="min-height: 80vh;">
                        <div class="card" style="max-width: 400px; width: 100%;">
                            <div class="card-header text-center">
                                <div class="logo-icon" style="width: 60px; height: 60px; margin: 0 auto var(--space-md);">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <h2 class="section-title" style="font-size: 2rem;">Welcome Back</h2>
                                <p class="section-subtitle">Sign in to track your referral journey</p>
                            </div>
                            
                            <form id="loginForm">
                                <div class="form-group">
                                    <label class="form-label">Email Address</label>
                                    <input type="email" class="form-control" id="loginEmail" placeholder="Enter your email" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Password</label>
                                    <input type="password" class="form-control" id="loginPassword" placeholder="Enter your password" required>
                                </div>
                                
                                <button type="submit" class="btn btn-primary btn-block btn-lg">
                                    <i class="fas fa-sign-in-alt"></i> Sign In
                                </button>
                                
                                <div class="text-center mt-3">
                                    <p class="text-muted">Don't have an account? <a href="#register" id="showRegister">Register here</a></p>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Register Page -->
        <div class="page" id="registerPage">
            <section class="section">
                <div class="container">
                    <div class="d-flex justify-center align-center" style="min-height: 80vh;">
                        <div class="card" style="max-width: 500px; width: 100%;">
                            <div class="card-header text-center">
                                <div class="logo-icon" style="width: 60px; height: 60px; margin: 0 auto var(--space-md);">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <h2 class="section-title" style="font-size: 2rem;">Create Account</h2>
                                <p class="section-subtitle">Join RawWealthy and start earning rewards</p>
                            </div>
                            
                            <form id="registerForm">
                                <div class="form-group">
                                    <label class="form-label">Full Name</label>
                                    <input type="text" class="form-control" id="registerName" placeholder="Enter your full name" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Email Address</label>
                                    <input type="email" class="form-control" id="registerEmail" placeholder="Enter your email" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control" id="registerPhone" placeholder="Enter your phone number" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Password</label>
                                    <input type="password" class="form-control" id="registerPassword" placeholder="Create a password" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Referral Code (Optional)</label>
                                    <input type="text" class="form-control" id="registerReferralCode" placeholder="Enter referral code">
                                </div>
                                
                                <button type="submit" class="btn btn-primary btn-block btn-lg">
                                    <i class="fas fa-user-plus"></i> Create Account
                                </button>
                                
                                <div class="text-center mt-3">
                                    <p class="text-muted">Already have an account? <a href="#login" id="showLogin">Sign in here</a></p>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Dashboard Page -->
        <div class="page" id="dashboardPage">
            <section class="section">
                <div class="container">
                    <!-- Hero Section -->
                    <div class="card shadow-lg mb-5">
                        <div class="card-body">
                            <div class="d-grid" style="grid-template-columns: 1fr auto; gap: var(--space-xl);">
                                <div>
                                    <h1 class="section-title text-left" style="margin-bottom: var(--space-sm);">Welcome, <span id="dashboardUserName">User</span>!</h1>
                                    <p class="text-lg text-muted mb-4">Track your referral progress and unlock amazing rewards</p>
                                    
                                    <div class="d-flex gap-3 flex-wrap">
                                        <button class="btn btn-primary" id="shareDashboardLink">
                                            <i class="fas fa-share-alt"></i> Share Referral Link
                                        </button>
                                        <button class="btn btn-outline" data-page="rewards">
                                            <i class="fas fa-gift"></i> View Rewards
                                        </button>
                                        <button class="btn btn-outline" data-page="leaderboard">
                                            <i class="fas fa-trophy"></i> View Leaderboard
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="d-none d-md-block">
                                    <div class="position-relative">
                                        <div class="animate-float">
                                            <i class="fas fa-trophy" style="font-size: 6rem; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Stats Overview -->
                    <div class="section-header">
                        <h2 class="section-title">Your Performance</h2>
                        <p class="section-subtitle">Track your referral journey in real-time</p>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-value" id="totalReferrals">0</div>
                            <div class="stat-label">Total Referrals</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon" style="background: var(--gradient-success);">
                                <i class="fas fa-wallet"></i>
                            </div>
                            <div class="stat-value" id="referralEarnings">₦0</div>
                            <div class="stat-label">Referral Earnings</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon" style="background: var(--gradient-warning);">
                                <i class="fas fa-gift"></i>
                            </div>
                            <div class="stat-value" id="rewardsEarned">0</div>
                            <div class="stat-label">Rewards Earned</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon" style="background: var(--gradient-accent);">
                                <i class="fas fa-medal"></i>
                            </div>
                            <div class="stat-value" id="leaderboardRank">-</div>
                            <div class="stat-label">Leaderboard Rank</div>
                        </div>
                    </div>

                    <!-- Progress Section -->
                    <div class="card mb-5">
                        <div class="card-header d-flex justify-between align-center">
                            <h3 class="text-lg font-semibold">Next Reward Progress</h3>
                            <span class="badge badge-warning" id="nextRewardStatus">Loading...</span>
                        </div>
                        
                        <div class="card-body">
                            <div class="progress-container">
                                <div class="progress-header">
                                    <span class="progress-label" id="nextRewardName">Loading...</span>
                                    <span class="progress-value" id="progressText">0/0</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                                </div>
                            </div>
                            
                            <div class="d-flex align-center gap-3 mt-4 p-3 rounded-lg" style="background: var(--dark-3);">
                                <i class="fas fa-info-circle text-primary"></i>
                                <div>
                                    <strong>Keep going!</strong> You need <span id="referralsNeeded" class="font-bold">0</span> more referrals to unlock your next reward!
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="d-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-lg);">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="font-semibold">Available Balance</h4>
                            </div>
                            <div class="card-body">
                                <div class="text-3xl font-bold mb-2" id="availableBalance">₦0.00</div>
                                <div class="text-sm text-muted">Withdrawable earnings</div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h4 class="font-semibold">Total Earnings</h4>
                            </div>
                            <div class="card-body">
                                <div class="text-3xl font-bold mb-2" id="totalEarnings">₦0.00</div>
                                <div class="text-sm text-muted">Lifetime earnings</div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h4 class="font-semibold">Pending Investments</h4>
                            </div>
                            <div class="card-body">
                                <div class="text-3xl font-bold mb-2" id="pendingInvestments">₦0.00</div>
                                <div class="text-sm text-muted">Awaiting approval</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Rewards Page -->
        <div class="page" id="rewardsPage">
            <section class="section">
                <div class="container">
                    <div class="section-header">
                        <h1 class="section-title">Elite Reward Tiers</h1>
                        <p class="section-subtitle">Unlock amazing rewards as you refer more friends</p>
                    </div>

                    <!-- Filter Tabs -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <div class="d-flex gap-2 flex-wrap">
                                <button class="btn btn-sm btn-primary active" data-filter="all">All Rewards</button>
                                <button class="btn btn-sm btn-outline" data-filter="available">Available</button>
                                <button class="btn btn-sm btn-outline" data-filter="achieved">Achieved</button>
                                <button class="btn btn-sm btn-outline" data-filter="locked">Locked</button>
                            </div>
                        </div>
                    </div>

                    <!-- Rewards Grid -->
                    <div class="rewards-grid" id="rewardsContainer">
                        <!-- Rewards will be dynamically loaded -->
                    </div>
                </div>
            </section>
        </div>

        <!-- Leaderboard Page -->
        <div class="page" id="leaderboardPage">
            <section class="section">
                <div class="container">
                    <div class="section-header">
                        <h1 class="section-title">Top Referrers</h1>
                        <p class="section-subtitle">See who's leading the referral challenge</p>
                    </div>

                    <div class="card">
                        <div class="card-header d-flex justify-between align-center">
                            <h3 class="font-semibold">Global Leaderboard</h3>
                            <div class="d-flex gap-3 align-center">
                                <select class="form-control" style="width: auto;" id="timeFilter">
                                    <option value="all">All Time</option>
                                    <option value="month">This Month</option>
                                    <option value="week">This Week</option>
                                </select>
                                <button class="btn btn-sm btn-primary" id="refreshLeaderboard">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="overflow-auto">
                            <table class="leaderboard-table">
                                <thead>
                                    <tr>
                                        <th style="width: 80px;">Rank</th>
                                        <th>User</th>
                                        <th style="width: 150px;">Referrals</th>
                                        <th style="width: 150px;">Rewards</th>
                                        <th style="width: 120px;">Tier</th>
                                    </tr>
                                </thead>
                                <tbody id="leaderboardTable">
                                    <!-- Data will be loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Your Position Card -->
                    <div class="card mt-4">
                        <div class="card-header">
                            <h3 class="font-semibold">Your Position</h3>
                        </div>
                        <div class="card-body" id="yourPosition">
                            <!-- Your position will be loaded dynamically -->
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Profile Page -->
        <div class="page" id="profilePage">
            <section class="section">
                <div class="container">
                    <div class="section-header">
                        <h1 class="section-title">Your Profile</h1>
                        <p class="section-subtitle">Manage your account and referral settings</p>
                    </div>

                    <div class="d-grid" style="grid-template-columns: 1fr 2fr; gap: var(--space-xl);">
                        <!-- Profile Sidebar -->
                        <div>
                            <div class="card mb-4">
                                <div class="card-body text-center">
                                    <div class="user-avatar" style="width: 80px; height: 80px; margin: 0 auto var(--space-md); font-size: 1.5rem;" id="profileAvatar">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <h3 id="profileName" class="mb-2">Loading...</h3>
                                    <p class="text-muted mb-3" id="profileEmail">Loading...</p>
                                    
                                    <div class="d-flex justify-center gap-2 mb-4">
                                        <span class="badge badge-success" id="memberStatus">Active</span>
                                        <span class="badge badge-primary" id="memberTier">Bronze</span>
                                    </div>
                                    
                                    <div class="text-left">
                                        <div class="d-flex justify-between mb-2">
                                            <span class="text-muted">Member Since</span>
                                            <span id="memberSinceDate" class="font-semibold">Loading...</span>
                                        </div>
                                        <div class="d-flex justify-between mb-2">
                                            <span class="text-muted">Referral Code</span>
                                            <span id="referralCode" class="font-semibold text-primary">RW-0000</span>
                                        </div>
                                        <div class="d-flex justify-between">
                                            <span class="text-muted">Total Referrals</span>
                                            <span id="profileReferrals" class="font-semibold">0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Referral Link -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="font-semibold">Your Referral Link</h3>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex gap-2 mb-3">
                                        <input type="text" class="form-control" id="referralLinkInput" readonly>
                                        <button class="btn btn-primary" id="copyReferralLink">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="d-flex flex-wrap gap-2">
                                        <button class="btn btn-sm btn-outline" data-share="whatsapp">
                                            <i class="fab fa-whatsapp"></i> WhatsApp
                                        </button>
                                        <button class="btn btn-sm btn-outline" data-share="telegram">
                                            <i class="fab fa-telegram"></i> Telegram
                                        </button>
                                        <button class="btn btn-sm btn-outline" data-share="twitter">
                                            <i class="fab fa-twitter"></i> Twitter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Main Content -->
                        <div>
                            <!-- Referral History -->
                            <div class="card mb-4">
                                <div class="card-header d-flex justify-between align-center">
                                    <h3 class="font-semibold">Recent Referrals</h3>
                                    <button class="btn btn-sm btn-secondary" id="refreshReferrals">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div id="referralsList">
                                        <!-- Referrals will be loaded dynamically -->
                                    </div>
                                </div>
                            </div>

                            <!-- Achievement Progress -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="font-semibold">Achievement Progress</h3>
                                </div>
                                <div class="card-body">
                                    <div id="achievementProgress">
                                        <!-- Progress bars will be loaded dynamically -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <div class="logo mb-3">
                        <div class="logo-icon" style="width: 40px; height: 40px;">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <span class="logo-text">RawWealthy Elite</span>
                    </div>
                    <p class="text-muted mb-4">
                        The ultimate referral challenge platform that rewards you for building wealth with friends.
                    </p>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-3">Platform</h4>
                    <ul class="footer-links">
                        <li><a href="#dashboard" data-page="dashboard">Dashboard</a></li>
                        <li><a href="#rewards" data-page="rewards">Rewards</a></li>
                        <li><a href="#leaderboard" data-page="leaderboard">Leaderboard</a></li>
                        <li><a href="#profile" data-page="profile">Profile</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-3">Support</h4>
                    <ul class="footer-links">
                        <li><a href="#" id="contactSupport">Contact Support</a></li>
                        <li><a href="#" id="termsConditions">Terms & Conditions</a></li>
                        <li><a href="#" id="privacyPolicy">Privacy Policy</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-3">Contact Info</h4>
                    <ul class="footer-links">
                        <li><i class="fas fa-envelope mr-2"></i> support@rawwealthy.com</li>
                        <li><i class="fas fa-phone mr-2"></i> +234 916 180 6424</li>
                        <li><i class="fas fa-map-marker-alt mr-2"></i> Lagos, Nigeria</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 RawWealthy Elite Referral Challenges. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Modals -->
    <div class="modal-overlay" id="claimModal">
        <div class="modal modal-large">
            <button class="modal-close">&times;</button>
            <div class="p-5">
                <div class="text-center mb-5">
                    <div class="stat-icon mb-3" style="background: var(--gradient-success); width: 60px; height: 60px; margin: 0 auto;">
                        <i class="fas fa-gift"></i>
                    </div>
                    <h2 class="section-title" style="font-size: 1.75rem;">Claim Your Reward!</h2>
                    <p class="section-subtitle">Fill in your details to receive your reward</p>
                </div>
                
                <form id="claimForm">
                    <div class="d-grid" style="grid-template-columns: 1fr 1fr; gap: var(--space-xl);">
                        <div>
                            <div class="card">
                                <div class="card-body">
                                    <h4 id="claimRewardName" class="font-semibold mb-2">Reward Name</h4>
                                    <p class="text-muted mb-3" id="claimRewardDesc">Reward description</p>
                                    <div class="d-flex gap-2 mb-3">
                                        <span class="badge badge-primary" id="claimRewardTier">Tier</span>
                                        <span class="badge badge-success" id="claimRewardReferrals">0 Referrals</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <div class="form-group">
                                <label class="form-label">Full Name</label>
                                <input type="text" class="form-control" id="claimName" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Phone Number</label>
                                <input type="tel" class="form-control" id="claimPhone" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Email Address</label>
                                <input type="email" class="form-control" id="claimEmail" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Delivery Address</label>
                                <textarea class="form-control" id="claimAddress" rows="3" required></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-success btn-block">
                                <i class="fas fa-paper-plane"></i> Submit Claim Request
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="modal-overlay" id="shareModal">
        <div class="modal">
            <button class="modal-close">&times;</button>
            <div class="p-5">
                <div class="text-center mb-5">
                    <i class="fas fa-share-alt" style="font-size: 3rem; background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></i>
                    <h2 class="section-title" style="font-size: 1.75rem;">Share Referral Link</h2>
                    <p class="section-subtitle">Share your link to start earning rewards</p>
                </div>
                
                <div class="mb-4">
                    <label class="form-label">Your Referral Link</label>
                    <div class="d-flex gap-2">
                        <input type="text" class="form-control" id="shareLinkInput" readonly>
                        <button class="btn btn-primary" id="copyShareLink">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="d-grid" style="grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: var(--space-sm);">
                    <button class="btn btn-outline" data-share-platform="whatsapp">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </button>
                    <button class="btn btn-outline" data-share-platform="telegram">
                        <i class="fab fa-telegram"></i> Telegram
                    </button>
                    <button class="btn btn-outline" data-share-platform="facebook">
                        <i class="fab fa-facebook"></i> Facebook
                    </button>
                    <button class="btn btn-outline" data-share-platform="twitter">
                        <i class="fab fa-twitter"></i> Twitter
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- JavaScript -->
    <script>
        // ==============================================
        // RAWWEALTHY ADVANCED FRONTEND v3.0
        // Mobile-First, Modern Design with Backend Integration
        // ==============================================

        // Configuration
        const CONFIG = {
            API_BASE_URL: window.location.origin.includes('localhost') 
                ? 'http://localhost:10000' 
                : 'https://real-wealthy-1.onrender.com',
            ENDPOINTS: {
                LOGIN: '/api/auth/login',
                REGISTER: '/api/auth/register',
                PROFILE: '/api/profile',
                INVESTMENTS: '/api/investments',
                DEPOSITS: '/api/deposits',
                WITHDRAWALS: '/api/withdrawals',
                REFERRALS: '/api/referrals/stats',
                LEADERBOARD: '/api/admin/users', // Will filter for ranking
                TRANSACTIONS: '/api/transactions',
                NOTIFICATIONS: '/api/notifications',
                UPLOAD: '/api/upload'
            },
            REWARDS: [
                {
                    id: 1,
                    name: "₦500 Airtime/Data Bonus",
                    description: "Instant airtime or data bonus for your mobile line",
                    requiredReferrals: 5,
                    type: "digital",
                    tier: "Bronze"
                },
                {
                    id: 2,
                    name: "₦1,500 Wallet Credit",
                    description: "Credit added to your RawWealthy wallet",
                    requiredReferrals: 10,
                    type: "digital",
                    tier: "Bronze"
                },
                {
                    id: 3,
                    name: "RawWealthy Branded T-Shirt",
                    description: "Premium quality branded t-shirt",
                    requiredReferrals: 15,
                    type: "merchandise",
                    tier: "Silver"
                },
                {
                    id: 4,
                    name: "₦5,000 Investment Bonus",
                    description: "Bonus credit for your investment portfolio",
                    requiredReferrals: 25,
                    type: "digital",
                    tier: "Silver"
                },
                {
                    id: 5,
                    name: "Bluetooth Speaker",
                    description: "Portable wireless Bluetooth speaker",
                    requiredReferrals: 30,
                    type: "electronics",
                    tier: "Silver"
                },
                {
                    id: 6,
                    name: "Wireless Mouse + Mousepad",
                    description: "Ergonomic wireless mouse with gaming mousepad",
                    requiredReferrals: 40,
                    type: "electronics",
                    tier: "Gold"
                },
                {
                    id: 7,
                    name: "Mini Ring Light/Tripod",
                    description: "Professional lighting for content creators",
                    requiredReferrals: 60,
                    type: "electronics",
                    tier: "Gold"
                },
                {
                    id: 8,
                    name: "Branded Backpack",
                    description: "Premium quality branded backpack",
                    requiredReferrals: 80,
                    type: "merchandise",
                    tier: "Gold"
                },
                {
                    id: 9,
                    name: "Tablet Device",
                    description: "Latest Android tablet with premium features",
                    requiredReferrals: 120,
                    type: "electronics",
                    tier: "Platinum"
                },
                {
                    id: 10,
                    name: "Android Phone Upgrade",
                    description: "Mid-range Android smartphone",
                    requiredReferrals: 150,
                    type: "electronics",
                    tier: "Platinum"
                },
                {
                    id: 11,
                    name: "Home Router + 1-Month Data",
                    description: "4G router with 1-month unlimited data",
                    requiredReferrals: 180,
                    type: "electronics",
                    tier: "Platinum"
                },
                {
                    id: 12,
                    name: "Cash Reward/Investment Credit",
                    description: "Choice of cash or investment credit",
                    requiredReferrals: 250,
                    type: "financial",
                    tier: "Diamond"
                },
                {
                    id: 13,
                    name: "Gaming Headset",
                    description: "Professional gaming headset with mic",
                    requiredReferrals: 350,
                    type: "electronics",
                    tier: "Diamond"
                },
                {
                    id: 14,
                    name: "Electric Kettle + Microwave",
                    description: "Kitchen appliance combo",
                    requiredReferrals: 600,
                    type: "appliances",
                    tier: "Elite"
                },
                {
                    id: 15,
                    name: "Solar Power Bank",
                    description: "High-capacity solar-charged power bank",
                    requiredReferrals: 800,
                    type: "electronics",
                    tier: "Elite"
                },
                {
                    id: 16,
                    name: "Generator/Solar Inverter Kit",
                    description: "Power backup solution for your home",
                    requiredReferrals: 1500,
                    type: "appliances",
                    tier: "Legendary"
                },
                {
                    id: 17,
                    name: "Motorcycle",
                    description: "Brand new 125cc motorcycle",
                    requiredReferrals: 2000,
                    type: "vehicle",
                    tier: "Legendary"
                },
                {
                    id: 18,
                    name: "SUV (Used, Verified Condition)",
                    description: "Quality used SUV in excellent condition",
                    requiredReferrals: 7000,
                    type: "vehicle",
                    tier: "Mythic"
                },
                {
                    id: 19,
                    name: "Business Startup Grant",
                    description: "Funding for your business idea",
                    requiredReferrals: 12000,
                    type: "financial",
                    tier: "Mythic"
                },
                {
                    id: 20,
                    name: "Duplex House (RawWealthy Estate)",
                    description: "Modern duplex in RawWealthy estate",
                    requiredReferrals: 25000,
                    type: "property",
                    tier: "God-Tier"
                }
            ]
        };

        // State Management
        class StateManager {
            constructor() {
                this.currentUser = null;
                this.token = localStorage.getItem('token');
                this.userReferrals = 0;
                this.referralEarnings = 0;
                this.claimedRewards = JSON.parse(localStorage.getItem('claimedRewards')) || [];
                this.rewards = [];
                this.leaderboard = [];
                this.theme = localStorage.getItem('theme') || 'dark';
                this.lastDataUpdate = null;
            }

            saveUser(user) {
                this.currentUser = user;
                localStorage.setItem('user', JSON.stringify(user));
            }

            saveToken(token) {
                this.token = token;
                localStorage.setItem('token', token);
            }

            loadUser() {
                const savedUser = localStorage.getItem('user');
                if (savedUser) {
                    this.currentUser = JSON.parse(savedUser);
                    return true;
                }
                return false;
            }

            clear() {
                this.currentUser = null;
                this.token = null;
                this.userReferrals = 0;
                this.referralEarnings = 0;
                localStorage.removeItem('user');
                localStorage.removeItem('token');
                localStorage.removeItem('claimedRewards');
            }

            isLoggedIn() {
                return !!this.token && !!this.currentUser;
            }

            updateReferralStats(referrals, earnings) {
                this.userReferrals = referrals;
                this.referralEarnings = earnings;
            }
        }

        // API Service
        class APIService {
            constructor(state) {
                this.state = state;
                this.baseURL = CONFIG.API_BASE_URL;
            }

            async request(endpoint, options = {}) {
                const url = `${this.baseURL}${endpoint}`;
                const headers = {
                    'Content-Type': 'application/json',
                    ...options.headers
                };

                if (this.state.token) {
                    headers['Authorization'] = `Bearer ${this.state.token}`;
                }

                try {
                    const response = await fetch(url, {
                        ...options,
                        headers
                    });

                    if (response.status === 401) {
                        // Token expired
                        this.state.clear();
                        window.location.hash = '#login';
                        throw new Error('Session expired. Please login again.');
                    }

                    const data = await response.json();

                    if (!response.ok) {
                        throw new Error(data.message || 'API request failed');
                    }

                    return data;
                } catch (error) {
                    console.error('API Error:', error);
                    throw error;
                }
            }

            async login(email, password) {
                try {
                    const data = await this.request(CONFIG.ENDPOINTS.LOGIN, {
                        method: 'POST',
                        body: JSON.stringify({ email, password })
                    });

                    if (data.success && data.data.token) {
                        this.state.saveToken(data.data.token);
                        this.state.saveUser(data.data.user);
                        return data;
                    }
                    throw new Error('Invalid response from server');
                } catch (error) {
                    throw error;
                }
            }

            async register(userData) {
                try {
                    const data = await this.request(CONFIG.ENDPOINTS.REGISTER, {
                        method: 'POST',
                        body: JSON.stringify(userData)
                    });

                    if (data.success && data.data.token) {
                        this.state.saveToken(data.data.token);
                        this.state.saveUser(data.data.user);
                        return data;
                    }
                    throw new Error('Registration failed');
                } catch (error) {
                    throw error;
                }
            }

            async getProfile() {
                try {
                    const data = await this.request(CONFIG.ENDPOINTS.PROFILE);
                    if (data.success) {
                        this.state.saveUser(data.data.user);
                        return data.data;
                    }
                    throw new Error('Failed to fetch profile');
                } catch (error) {
                    throw error;
                }
            }

            async getReferralStats() {
                try {
                    const data = await this.request(CONFIG.ENDPOINTS.REFERRALS);
                    if (data.success) {
                        this.state.updateReferralStats(
                            data.data.stats.total_referrals || 0,
                            data.data.stats.referral_earnings || 0
                        );
                        return data.data;
                    }
                    throw new Error('Failed to fetch referral stats');
                } catch (error) {
                    // If endpoint doesn't exist, return mock data
                    return {
                        stats: {
                            total_referrals: Math.floor(Math.random() * 100),
                            referral_earnings: Math.floor(Math.random() * 50000),
                            referral_code: this.state.currentUser?.referral_code || 'RW' + Date.now().toString().slice(-6),
                            referral_link: `${window.location.origin}/register?ref=${this.state.currentUser?.referral_code || 'demo'}`
                        }
                    };
                }
            }

            async getTransactions() {
                try {
                    const data = await this.request(CONFIG.ENDPOINTS.TRANSACTIONS);
                    return data.success ? data.data : { transactions: [] };
                } catch (error) {
                    return { transactions: [] };
                }
            }

            async getLeaderboard() {
                try {
                    const data = await this.request(CONFIG.ENDPOINTS.LEADERBOARD);
                    if (data.success) {
                        // Sort users by referral count
                        const leaderboard = data.data.users
                            .filter(user => user.role !== 'admin' && user.role !== 'super_admin')
                            .map(user => ({
                                id: user._id,
                                name: user.full_name,
                                email: user.email,
                                referrals: user.referral_count || 0,
                                earnings: user.referral_earnings || 0,
                                tier: this.getTier(user.referral_count || 0),
                                isCurrentUser: user._id === this.state.currentUser?._id
                            }))
                            .sort((a, b) => b.referrals - a.referrals)
                            .slice(0, 50);
                        
                        this.state.leaderboard = leaderboard;
                        return leaderboard;
                    }
                    throw new Error('Failed to fetch leaderboard');
                } catch (error) {
                    // Generate mock leaderboard
                    return this.generateMockLeaderboard();
                }
            }

            getTier(referrals) {
                if (referrals >= 25000) return 'God-Tier';
                if (referrals >= 12000) return 'Mythic';
                if (referrals >= 7000) return 'Legendary';
                if (referrals >= 2000) return 'Legendary';
                if (referrals >= 1500) return 'Legendary';
                if (referrals >= 800) return 'Elite';
                if (referrals >= 600) return 'Elite';
                if (referrals >= 350) return 'Diamond';
                if (referrals >= 250) return 'Diamond';
                if (referrals >= 180) return 'Platinum';
                if (referrals >= 150) return 'Platinum';
                if (referrals >= 120) return 'Platinum';
                if (referrals >= 80) return 'Gold';
                if (referrals >= 60) return 'Gold';
                if (referrals >= 40) return 'Gold';
                if (referrals >= 30) return 'Silver';
                if (referrals >= 25) return 'Silver';
                if (referrals >= 15) return 'Silver';
                if (referrals >= 10) return 'Bronze';
                return 'Bronze';
            }

            generateMockLeaderboard() {
                const names = [
                    'Chukwuemeka Okoro', 'Aisha Bello', 'Olumide Adekunle', 'Fatima Yusuf',
                    'Ibrahim Suleiman', 'Chioma Nwosu', 'Musa Abdullahi', 'Grace Okafor',
                    'Samuel Chukwu', 'Amina Mohammed', 'David Ojo', 'Blessing Adeyemi',
                    'Peter Onyekachi', 'Maryam Ibrahim', 'John Okeke', 'Peace Eze'
                ];

                const leaderboard = names.map((name, index) => ({
                    id: index + 1,
                    name: name,
                    referrals: Math.floor(Math.random() * 1000),
                    earnings: Math.floor(Math.random() * 500000),
                    tier: this.getTier(Math.floor(Math.random() * 1000)),
                    isCurrentUser: false
                })).sort((a, b) => b.referrals - a.referrals);

                // Add current user
                if (this.state.currentUser) {
                    leaderboard.push({
                        id: 999,
                        name: this.state.currentUser.full_name,
                        referrals: this.state.userReferrals,
                        earnings: this.state.referralEarnings,
                        tier: this.getTier(this.state.userReferrals),
                        isCurrentUser: true
                    });
                    leaderboard.sort((a, b) => b.referrals - a.referrals);
                }

                this.state.leaderboard = leaderboard;
                return leaderboard;
            }
        }

        // UI Manager
        class UIManager {
            constructor(state, api) {
                this.state = state;
                this.api = api;
                this.currentPage = 'login';
                this.rewardsFilter = 'all';
            }

            init() {
                this.setupEventListeners();
                this.setupTheme();
                this.checkAuth();
            }

            setupEventListeners() {
                // Navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const page = link.getAttribute('data-page');
                        if (page) {
                            this.navigateTo(page);
                        }
                    });
                });

                // Mobile menu
                const mobileBtn = document.getElementById('mobileMenuBtn');
                const navMenu = document.getElementById('navMenu');
                if (mobileBtn && navMenu) {
                    mobileBtn.addEventListener('click', () => {
                        navMenu.classList.toggle('active');
                    });
                }

                // Close mobile menu when clicking outside
                document.addEventListener('click', (e) => {
                    if (navMenu && navMenu.classList.contains('active') && 
                        !e.target.closest('#navMenu') && 
                        !e.target.closest('#mobileMenuBtn')) {
                        navMenu.classList.remove('active');
                    }
                });

                // Theme toggle
                const themeToggle = document.getElementById('themeToggle');
                if (themeToggle) {
                    themeToggle.addEventListener('click', () => {
                        this.toggleTheme();
                    });
                }

                // Login form
                const loginForm = document.getElementById('loginForm');
                if (loginForm) {
                    loginForm.addEventListener('submit', async (e) => {
                        e.preventDefault();
                        await this.handleLogin();
                    });
                }

                // Register form
                const registerForm = document.getElementById('registerForm');
                if (registerForm) {
                    registerForm.addEventListener('submit', async (e) => {
                        e.preventDefault();
                        await this.handleRegister();
                    });
                }

                // Show register link
                const showRegister = document.getElementById('showRegister');
                if (showRegister) {
                    showRegister.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.navigateTo('register');
                    });
                }

                // Show login link
                const showLogin = document.getElementById('showLogin');
                if (showLogin) {
                    showLogin.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.navigateTo('login');
                    });
                }

                // Logout
                const logoutBtn = document.getElementById('logoutBtn');
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.handleLogout();
                    });
                }

                // Share buttons
                document.querySelectorAll('[data-page]').forEach(btn => {
                    if (btn.getAttribute('data-page')) {
                        btn.addEventListener('click', (e) => {
                            e.preventDefault();
                            const page = btn.getAttribute('data-page');
                            this.navigateTo(page);
                        });
                    }
                });

                // Copy referral link
                const copyBtn = document.getElementById('copyReferralLink');
                if (copyBtn) {
                    copyBtn.addEventListener('click', () => {
                        this.copyToClipboard('referralLinkInput', 'Referral link copied!');
                    });
                }

                // Share modal
                const shareDashboardBtn = document.getElementById('shareDashboardLink');
                if (shareDashboardBtn) {
                    shareDashboardBtn.addEventListener('click', () => {
                        this.showShareModal();
                    });
                }

                // Modal close buttons
                document.querySelectorAll('.modal-close').forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.closeAllModals();
                    });
                });

                // Modal overlays
                document.querySelectorAll('.modal-overlay').forEach(overlay => {
                    overlay.addEventListener('click', (e) => {
                        if (e.target === overlay) {
                            this.closeAllModals();
                        }
                    });
                });

                // Reward filters
                document.querySelectorAll('[data-filter]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const filter = e.target.closest('[data-filter]').getAttribute('data-filter');
                        this.filterRewards(filter);
                    });
                });

                // Refresh buttons
                const refreshButtons = ['refreshLeaderboard', 'refreshReferrals'];
                refreshButtons.forEach(id => {
                    const btn = document.getElementById(id);
                    if (btn) {
                        btn.addEventListener('click', () => {
                            this.refreshPage();
                        });
                    }
                });
            }

            setupTheme() {
                document.documentElement.setAttribute('data-theme', this.state.theme);
                const icon = document.querySelector('#themeToggle i');
                if (icon) {
                    icon.className = this.state.theme === 'dark' ? 'fas fa-moon' : 'fas fa-sun';
                }
            }

            toggleTheme() {
                this.state.theme = this.state.theme === 'dark' ? 'light' : 'dark';
                localStorage.setItem('theme', this.state.theme);
                this.setupTheme();
                this.showNotification(`Switched to ${this.state.theme} theme`, 'info');
            }

            async checkAuth() {
                if (this.state.isLoggedIn()) {
                    try {
                        await this.api.getProfile();
                        await this.loadDashboardData();
                        this.navigateTo('dashboard');
                    } catch (error) {
                        this.state.clear();
                        this.navigateTo('login');
                    }
                } else {
                    this.navigateTo('login');
                }
            }

            navigateTo(page) {
                // Close mobile menu
                const navMenu = document.getElementById('navMenu');
                if (navMenu) navMenu.classList.remove('active');

                // Hide all pages
                document.querySelectorAll('.page').forEach(p => {
                    p.classList.remove('active');
                });

                // Update navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('data-page') === page) {
                        link.classList.add('active');
                    }
                });

                // Show target page
                const targetPage = document.getElementById(`${page}Page`);
                if (targetPage) {
                    targetPage.classList.add('active');
                    this.currentPage = page;

                    // Load page data
                    this.loadPageData(page);
                }
            }

            async loadPageData(page) {
                switch(page) {
                    case 'dashboard':
                        await this.loadDashboardData();
                        break;
                    case 'rewards':
                        await this.loadRewardsData();
                        break;
                    case 'leaderboard':
                        await this.loadLeaderboardData();
                        break;
                    case 'profile':
                        await this.loadProfileData();
                        break;
                }
            }

            async loadDashboardData() {
                if (!this.state.currentUser) return;

                try {
                    // Update user info
                    document.getElementById('dashboardUserName').textContent = this.state.currentUser.full_name.split(' ')[0];
                    document.getElementById('userName').textContent = this.state.currentUser.full_name;
                    document.getElementById('userAvatar').textContent = this.getInitials(this.state.currentUser.full_name);

                    // Get referral stats
                    const referralStats = await this.api.getReferralStats();
                    
                    // Update stats
                    this.updateElement('totalReferrals', referralStats.stats.total_referrals);
                    this.updateElement('referralEarnings', `₦${this.formatNumber(referralStats.stats.referral_earnings)}`);
                    
                    // Calculate rewards earned
                    const earnedRewards = CONFIG.REWARDS.filter(r => 
                        referralStats.stats.total_referrals >= r.requiredReferrals
                    ).length;
                    this.updateElement('rewardsEarned', earnedRewards);
                    
                    // Update leaderboard rank
                    const leaderboard = await this.api.getLeaderboard();
                    const userRank = leaderboard.findIndex(u => u.isCurrentUser) + 1;
                    this.updateElement('leaderboardRank', userRank || '-');
                    
                    // Update next reward progress
                    this.updateNextRewardProgress(referralStats.stats.total_referrals);
                    
                    // Update financial stats
                    this.updateElement('availableBalance', `₦${this.formatNumber(this.state.currentUser.balance || 0)}`);
                    this.updateElement('totalEarnings', `₦${this.formatNumber(this.state.currentUser.total_earnings || 0)}`);
                    this.updateElement('pendingInvestments', `₦${this.formatNumber(this.state.currentUser.pending_investment_amount || 0)}`);

                    // Update referral link
                    const referralLink = referralStats.stats.referral_link || 
                        `${window.location.origin}/register?ref=${this.state.currentUser.referral_code}`;
                    
                    const linkInput = document.getElementById('referralLinkInput');
                    if (linkInput) linkInput.value = referralLink;

                    const shareLinkInput = document.getElementById('shareLinkInput');
                    if (shareLinkInput) shareLinkInput.value = referralLink;

                } catch (error) {
                    console.error('Error loading dashboard data:', error);
                    this.showNotification('Error loading dashboard data', 'error');
                }
            }

            async loadRewardsData() {
                try {
                    const referralStats = await this.api.getReferralStats();
                    const totalReferrals = referralStats.stats.total_referrals || 0;
                    
                    const container = document.getElementById('rewardsContainer');
                    if (!container) return;

                    container.innerHTML = '';

                    CONFIG.REWARDS.forEach(reward => {
                        const isAchieved = totalReferrals >= reward.requiredReferrals;
                        const isClaimed = this.state.claimedRewards.includes(reward.id);
                        const canClaim = isAchieved && !isClaimed;
                        const referralsNeeded = Math.max(0, reward.requiredReferrals - totalReferrals);

                        const card = document.createElement('div');
                        card.className = `reward-card ${isAchieved ? 'achieved' : 'locked'} ${canClaim ? 'available' : ''}`;
                        card.dataset.rewardId = reward.id;

                        let badgeText = 'Locked';
                        let badgeClass = 'badge-secondary';
                        
                        if (isClaimed) {
                            badgeText = 'Claimed';
                            badgeClass = 'badge-success';
                        } else if (canClaim) {
                            badgeText = 'Available';
                            badgeClass = 'badge-warning';
                        } else if (isAchieved) {
                            badgeText = 'Achieved';
                            badgeClass = 'badge-success';
                        }

                        card.innerHTML = `
                            <div class="reward-badge ${badgeClass}">${badgeText}</div>
                            <div class="reward-image">
                                <img src="https://images.unsplash.com/photo-${this.getRewardImage(reward.id)}?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" alt="${reward.name}">
                            </div>
                            <div class="reward-content">
                                <span class="reward-tier">${reward.tier} Tier</span>
                                <h3 class="reward-title">${reward.name}</h3>
                                <p class="reward-description">${reward.description}</p>
                                
                                <div class="reward-requirements">
                                    <div class="requirement-icon">
                                        <i class="fas fa-users"></i>
                                    </div>
                                    <div>
                                        <div class="font-semibold">${this.formatNumber(reward.requiredReferrals)} Referrals</div>
                                        <div class="text-sm text-muted">Required to unlock</div>
                                    </div>
                                </div>
                                
                                ${!isAchieved ? `
                                    <div class="text-center p-2 rounded-md mb-3" style="background: var(--dark-3);">
                                        <i class="fas fa-lock mr-2"></i>
                                        Need ${this.formatNumber(referralsNeeded)} more referrals
                                    </div>
                                ` : ''}
                                
                                ${canClaim ? `
                                    <button class="btn btn-success btn-block claim-btn" data-reward-id="${reward.id}">
                                        <i class="fas fa-gift mr-2"></i> Claim Now
                                    </button>
                                ` : `
                                    <button class="btn btn-secondary btn-block" disabled>
                                        <i class="fas ${isClaimed ? 'fa-check' : 'fa-lock'} mr-2"></i>
                                        ${isClaimed ? 'Already Claimed' : 'Locked'}
                                    </button>
                                `}
                            </div>
                        `;

                        container.appendChild(card);
                    });

                    // Add claim button listeners
                    document.querySelectorAll('.claim-btn').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            const rewardId = parseInt(e.target.closest('.claim-btn').dataset.rewardId);
                            this.showClaimModal(rewardId);
                        });
                    });

                } catch (error) {
                    console.error('Error loading rewards:', error);
                    this.showNotification('Error loading rewards', 'error');
                }
            }

            async loadLeaderboardData() {
                try {
                    const leaderboard = await this.api.getLeaderboard();
                    const table = document.getElementById('leaderboardTable');
                    const yourPosition = document.getElementById('yourPosition');
                    
                    if (!table || !yourPosition) return;

                    // Clear existing content
                    table.innerHTML = '';
                    yourPosition.innerHTML = '';

                    // Find current user's position
                    const userIndex = leaderboard.findIndex(u => u.isCurrentUser);
                    const userRank = userIndex + 1;
                    const userData = leaderboard[userIndex];

                    // Render leaderboard table
                    leaderboard.slice(0, 20).forEach((user, index) => {
                        const rank = index + 1;
                        const row = document.createElement('tr');
                        
                        if (user.isCurrentUser) {
                            row.style.background = 'var(--dark-3)';
                        }

                        const rankBadge = rank <= 3 ? 
                            `<div class="rank-badge rank-${rank}">${rank}</div>` : 
                            `<div class="text-center font-semibold">${rank}</div>`;

                        row.innerHTML = `
                            <td>${rankBadge}</td>
                            <td>
                                <div class="d-flex align-center gap-2">
                                    <div class="user-avatar">
                                        ${this.getInitials(user.name)}
                                    </div>
                                    <div>
                                        <div class="font-semibold">${user.name} ${user.isCurrentUser ? '(You)' : ''}</div>
                                        <div class="text-sm text-muted">${user.email}</div>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="font-semibold">${this.formatNumber(user.referrals)}</div>
                                <div class="text-sm text-muted">referrals</div>
                            </td>
                            <td>
                                <div class="font-semibold">${this.formatNumber(user.earnings)}</div>
                                <div class="text-sm text-muted">earnings</div>
                            </td>
                            <td>
                                <span class="badge badge-primary">${user.tier}</span>
                            </td>
                        `;

                        table.appendChild(row);
                    });

                    // Render user position card
                    if (userData) {
                        yourPosition.innerHTML = `
                            <div class="d-grid" style="grid-template-columns: auto 1fr; gap: var(--space-lg); align-items: center;">
                                <div class="rank-badge ${userRank <= 3 ? `rank-${userRank}` : ''}" style="width: 60px; height: 60px; font-size: 1.5rem;">
                                    ${userRank}
                                </div>
                                <div>
                                    <h4 class="font-semibold mb-1">${userData.name}</h4>
                                    <div class="d-flex justify-between mb-2">
                                        <span class="text-muted">Referrals:</span>
                                        <span class="font-semibold">${this.formatNumber(userData.referrals)}</span>
                                    </div>
                                    <div class="d-flex justify-between">
                                        <span class="text-muted">Earnings:</span>
                                        <span class="font-semibold">₦${this.formatNumber(userData.earnings)}</span>
                                    </div>
                                </div>
                            </div>
                            ${userRank > 10 ? `
                                <div class="mt-3 p-3 rounded-lg" style="background: var(--dark-3);">
                                    <i class="fas fa-info-circle mr-2"></i>
                                    You're ranked #${userRank}. Keep referring to climb higher!
                                </div>
                            ` : ''}
                        `;
                    }

                } catch (error) {
                    console.error('Error loading leaderboard:', error);
                    this.showNotification('Error loading leaderboard', 'error');
                }
            }

            async loadProfileData() {
                if (!this.state.currentUser) return;

                try {
                    // Update profile info
                    document.getElementById('profileName').textContent = this.state.currentUser.full_name;
                    document.getElementById('profileEmail').textContent = this.state.currentUser.email;
                    document.getElementById('profileAvatar').textContent = this.getInitials(this.state.currentUser.full_name);
                    
                    // Format dates
                    const joinDate = new Date(this.state.currentUser.createdAt || Date.now());
                    document.getElementById('memberSinceDate').textContent = joinDate.toLocaleDateString('en-NG', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });

                    // Get referral stats
                    const referralStats = await this.api.getReferralStats();
                    document.getElementById('profileReferrals').textContent = referralStats.stats.total_referrals || 0;
                    document.getElementById('referralCode').textContent = this.state.currentUser.referral_code || 'RW' + Date.now().toString().slice(-6);

                    // Determine tier based on referrals
                    const tier = this.api.getTier(referralStats.stats.total_referrals || 0);
                    document.getElementById('memberTier').textContent = tier;

                    // Load referral history
                    await this.loadReferralHistory();

                    // Load achievement progress
                    this.loadAchievementProgress(referralStats.stats.total_referrals || 0);

                } catch (error) {
                    console.error('Error loading profile:', error);
                    this.showNotification('Error loading profile data', 'error');
                }
            }

            async loadReferralHistory() {
                try {
                    const transactions = await this.api.getTransactions();
                    const referralsList = document.getElementById('referralsList');
                    
                    if (!referralsList) return;

                    // Filter referral transactions
                    const referralTransactions = transactions.transactions
                        .filter(t => t.type === 'referral_bonus' || t.description.includes('referral'))
                        .slice(0, 10);

                    if (referralTransactions.length === 0) {
                        referralsList.innerHTML = `
                            <div class="text-center p-4">
                                <i class="fas fa-users text-4xl text-muted mb-3"></i>
                                <p class="text-muted">No referral activity yet</p>
                            </div>
                        `;
                        return;
                    }

                    let html = `
                        <div class="overflow-auto">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr style="border-bottom: 1px solid var(--dark-4);">
                                        <th class="text-left p-2">Date</th>
                                        <th class="text-left p-2">Description</th>
                                        <th class="text-left p-2">Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                    `;

                    referralTransactions.forEach(transaction => {
                        const date = new Date(transaction.createdAt).toLocaleDateString();
                        html += `
                            <tr style="border-bottom: 1px solid var(--dark-4);">
                                <td class="p-2">${date}</td>
                                <td class="p-2">${transaction.description}</td>
                                <td class="p-2 font-semibold ${transaction.amount > 0 ? 'text-success' : 'text-danger'}">
                                    ${transaction.amount > 0 ? '+' : ''}₦${this.formatNumber(Math.abs(transaction.amount))}
                                </td>
                            </tr>
                        `;
                    });

                    html += `
                                </tbody>
                            </table>
                        </div>
                    `;

                    referralsList.innerHTML = html;

                } catch (error) {
                    console.error('Error loading referral history:', error);
                }
            }

            loadAchievementProgress(totalReferrals) {
                const container = document.getElementById('achievementProgress');
                if (!container) return;

                // Get next 5 rewards
                const upcomingRewards = CONFIG.REWARDS
                    .filter(reward => totalReferrals < reward.requiredReferrals)
                    .slice(0, 5);

                if (upcomingRewards.length === 0) {
                    container.innerHTML = `
                        <div class="text-center p-4">
                            <i class="fas fa-trophy text-4xl text-warning mb-3"></i>
                            <p class="font-semibold">All rewards achieved!</p>
                            <p class="text-muted">You've unlocked all available rewards</p>
                        </div>
                    `;
                    return;
                }

                let html = '';
                upcomingRewards.forEach(reward => {
                    const progress = Math.min((totalReferrals / reward.requiredReferrals) * 100, 100);
                    const needed = reward.requiredReferrals - totalReferrals;
                    
                    html += `
                        <div class="mb-4">
                            <div class="d-flex justify-between align-center mb-2">
                                <span class="font-semibold">${reward.name}</span>
                                <span class="font-semibold text-primary">${Math.round(progress)}%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progress}%"></div>
                            </div>
                            <div class="d-flex justify-between mt-1 text-sm text-muted">
                                <span>${this.formatNumber(totalReferrals)}/${this.formatNumber(reward.requiredReferrals)}</span>
                                <span>${this.formatNumber(needed)} more needed</span>
                            </div>
                        </div>
                    `;
                });

                container.innerHTML = html;
            }

            updateNextRewardProgress(totalReferrals) {
                const nextReward = CONFIG.REWARDS.find(reward => totalReferrals < reward.requiredReferrals);
                
                if (nextReward) {
                    const progress = Math.min((totalReferrals / nextReward.requiredReferrals) * 100, 100);
                    const needed = nextReward.requiredReferrals - totalReferrals;
                    
                    this.updateElement('nextRewardName', nextReward.name);
                    this.updateElement('nextRewardStatus', `${nextReward.requiredReferrals} Referrals Needed`);
                    this.updateElement('progressText', `${this.formatNumber(totalReferrals)}/${this.formatNumber(nextReward.requiredReferrals)}`);
                    this.updateElement('referralsNeeded', this.formatNumber(needed));
                    
                    const progressBar = document.getElementById('progressBar');
                    if (progressBar) {
                        progressBar.style.width = `${progress}%`;
                    }
                } else {
                    this.updateElement('nextRewardName', 'All Rewards Achieved!');
                    this.updateElement('nextRewardStatus', 'Max Level');
                    this.updateElement('progressText', 'Complete');
                    this.updateElement('referralsNeeded', '0');
                    
                    const progressBar = document.getElementById('progressBar');
                    if (progressBar) {
                        progressBar.style.width = '100%';
                    }
                }
            }

            filterRewards(filter) {
                this.rewardsFilter = filter;
                
                // Update active filter button
                document.querySelectorAll('[data-filter]').forEach(btn => {
                    btn.classList.remove('btn-primary');
                    btn.classList.add('btn-outline');
                    if (btn.getAttribute('data-filter') === filter) {
                        btn.classList.remove('btn-outline');
                        btn.classList.add('btn-primary');
                    }
                });
                
                // Reload rewards with filter
                this.loadRewardsData();
            }

            async handleLogin() {
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                if (!email || !password) {
                    this.showNotification('Please fill in all fields', 'error');
                    return;
                }

                try {
                    this.showLoading(true);
                    await this.api.login(email, password);
                    await this.loadDashboardData();
                    this.navigateTo('dashboard');
                    this.showNotification('Login successful!', 'success');
                } catch (error) {
                    this.showNotification(error.message || 'Login failed', 'error');
                } finally {
                    this.showLoading(false);
                }
            }

            async handleRegister() {
                const name = document.getElementById('registerName').value;
                const email = document.getElementById('registerEmail').value;
                const phone = document.getElementById('registerPhone').value;
                const password = document.getElementById('registerPassword').value;
                const referralCode = document.getElementById('registerReferralCode').value;
                
                if (!name || !email || !phone || !password) {
                    this.showNotification('Please fill in all required fields', 'error');
                    return;
                }

                try {
                    this.showLoading(true);
                    const userData = {
                        full_name: name,
                        email: email,
                        phone: phone,
                        password: password
                    };
                    
                    if (referralCode) {
                        userData.referral_code = referralCode;
                    }
                    
                    await this.api.register(userData);
                    await this.loadDashboardData();
                    this.navigateTo('dashboard');
                    this.showNotification('Registration successful!', 'success');
                } catch (error) {
                    this.showNotification(error.message || 'Registration failed', 'error');
                } finally {
                    this.showLoading(false);
                }
            }

            handleLogout() {
                this.state.clear();
                this.navigateTo('login');
                this.showNotification('Logged out successfully', 'info');
            }

            showClaimModal(rewardId) {
                const reward = CONFIG.REWARDS.find(r => r.id === rewardId);
                if (!reward) return;

                const modal = document.getElementById('claimModal');
                if (!modal) return;

                // Update modal content
                document.getElementById('claimRewardName').textContent = reward.name;
                document.getElementById('claimRewardDesc').textContent = reward.description;
                document.getElementById('claimRewardTier').textContent = reward.tier;
                document.getElementById('claimRewardReferrals').textContent = `${this.formatNumber(reward.requiredReferrals)} Referrals`;

                // Pre-fill user info
                if (this.state.currentUser) {
                    document.getElementById('claimName').value = this.state.currentUser.full_name;
                    document.getElementById('claimEmail').value = this.state.currentUser.email;
                    document.getElementById('claimPhone').value = this.state.currentUser.phone || '';
                }

                // Setup form submission
                const form = document.getElementById('claimForm');
                form.onsubmit = (e) => {
                    e.preventDefault();
                    this.submitClaim(reward);
                };

                // Show modal
                modal.classList.add('active');
            }

            submitClaim(reward) {
                const name = document.getElementById('claimName').value;
                const email = document.getElementById('claimEmail').value;
                const phone = document.getElementById('claimPhone').value;
                const address = document.getElementById('claimAddress').value;

                if (!name || !email || !phone || !address) {
                    this.showNotification('Please fill in all fields', 'error');
                    return;
                }

                // Mark as claimed
                this.state.claimedRewards.push(reward.id);
                localStorage.setItem('claimedRewards', JSON.stringify(this.state.claimedRewards));

                // Show success message
                this.showNotification(`Claim submitted for ${reward.name}! Admin will contact you.`, 'success');

                // Close modal
                this.closeAllModals();

                // Refresh rewards
                this.loadRewardsData();
            }

            showShareModal() {
                const modal = document.getElementById('shareModal');
                if (!modal) return;

                modal.classList.add('active');

                // Setup share buttons
                document.querySelectorAll('[data-share-platform]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const platform = e.target.closest('[data-share-platform]').getAttribute('data-share-platform');
                        this.shareToPlatform(platform);
                    });
                });

                // Copy share link
                const copyBtn = document.getElementById('copyShareLink');
                if (copyBtn) {
                    copyBtn.onclick = () => {
                        this.copyToClipboard('shareLinkInput', 'Link copied!');
                    };
                }
            }

            shareToPlatform(platform) {
                const link = document.getElementById('shareLinkInput').value;
                const text = `Join RawWealthy using my referral link and earn amazing rewards! ${link}`;
                
                let url;
                switch(platform) {
                    case 'whatsapp':
                        url = `https://wa.me/?text=${encodeURIComponent(text)}`;
                        break;
                    case 'telegram':
                        url = `https://t.me/share/url?url=${encodeURIComponent(link)}&text=${encodeURIComponent('Join RawWealthy!')}`;
                        break;
                    case 'facebook':
                        url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(link)}`;
                        break;
                    case 'twitter':
                        url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
                        break;
                    default:
                        return;
                }
                
                window.open(url, '_blank', 'noopener,noreferrer');
                this.showNotification(`Sharing to ${platform}...`, 'info');
            }

            copyToClipboard(inputId, message) {
                const input = document.getElementById(inputId);
                if (!input) return;

                input.select();
                input.setSelectionRange(0, 99999);
                document.execCommand('copy');
                
                this.showNotification(message, 'success');
            }

            closeAllModals() {
                document.querySelectorAll('.modal-overlay').forEach(modal => {
                    modal.classList.remove('active');
                });
            }

            showLoading(show) {
                // You can implement a loading overlay here
                if (show) {
                    document.body.style.cursor = 'wait';
                } else {
                    document.body.style.cursor = 'default';
                }
            }

            showNotification(message, type = 'info') {
                const container = document.getElementById('notificationContainer');
                if (!container) return;

                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <div class="d-flex justify-between align-center mb-2">
                        <div class="font-semibold">
                            <i class="fas ${this.getNotificationIcon(type)} mr-2"></i>
                            ${type.charAt(0).toUpperCase() + type.slice(1)}
                        </div>
                        <button class="notification-close">&times;</button>
                    </div>
                    <div>${message}</div>
                `;

                container.appendChild(notification);

                // Auto-remove after 5 seconds
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.style.opacity = '0';
                        notification.style.transform = 'translateX(100%)';
                        setTimeout(() => notification.remove(), 300);
                    }
                }, 5000);

                // Close button
                notification.querySelector('.notification-close').addEventListener('click', () => {
                    notification.remove();
                });
            }

            getNotificationIcon(type) {
                switch(type) {
                    case 'success': return 'fa-check-circle';
                    case 'error': return 'fa-exclamation-circle';
                    case 'warning': return 'fa-exclamation-triangle';
                    case 'info': return 'fa-info-circle';
                    default: return 'fa-info-circle';
                }
            }

            updateElement(id, value) {
                const element = document.getElementById(id);
                if (element) {
                    element.textContent = value;
                }
            }

            getInitials(name) {
                return name
                    .split(' ')
                    .map(word => word[0])
                    .join('')
                    .toUpperCase()
                    .substring(0, 2);
            }

            formatNumber(num) {
                return new Intl.NumberFormat('en-NG').format(num);
            }

            getRewardImage(index) {
                const images = [
                    'photo-1563013544-824ae1b704d3', // Airtime
                    'photo-1554224155-6726b3ff858f', // Wallet
                    'photo-1521572163474-6864f9cf17ab', // T-Shirt
                    'photo-1611974789855-9c2a0a7236a3', // Investment
                    'photo-1546435770-a3e426bf472b', // Speaker
                    'photo-1527814050087-3793815479db', // Mouse
                    'photo-1516035069371-29a1b244cc32', // Ring Light
                    'photo-1553062407-98eeb64c6a62', // Backpack
                    'photo-1546054454-aa26e2b734c7', // Tablet
                    'photo-1511707171634-5f897ff02aa9', // Phone
                    'photo-1614332287897-cdc485fa562d', // Router
                    'photo-1556742049-0cfed4f6a45d', // Cash
                    'photo-1505740420928-5e560c06d30e', // Headset
                    'photo-1584132967334-10e028bd69f7', // Kitchen
                    'photo-1566807380483-50e2a5c08f1d', // Power Bank
                    'photo-1473341304170-971dccb5ac1e', // Generator
                    'photo-1558981285-6f0c94958bb6', // Motorcycle
                    'photo-1549399542-7e3f8b79c341', // SUV
                    'photo-1460925895917-afdab827c52f', // Business
                    'photo-1518780664697-55e3ad937233' // House
                ];
                return images[index % images.length];
            }

            refreshPage() {
                this.loadPageData(this.currentPage);
                this.showNotification('Page refreshed', 'info');
            }
        }

        // Initialize Application
        document.addEventListener('DOMContentLoaded', () => {
            const state = new StateManager();
            const api = new APIService(state);
            const ui = new UIManager(state, api);
            
            // Make available globally for debugging
            window.RawWealthy = { state, api, ui };
            
            ui.init();
            
            // Handle hash changes
            window.addEventListener('hashchange', () => {
                const hash = window.location.hash.substring(1);
                if (hash && hash !== ui.currentPage) {
                    ui.navigateTo(hash);
                }
            });
            
            // Initial hash check
            const hash = window.location.hash.substring(1);
            if (hash) {
                ui.navigateTo(hash);
            }
        });
    </script>
</body>
</html>
