<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raw Wealthy - Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
:root {
    --primary: #0f172a;
    --secondary: #1e293b;
    --accent-gold: #f59e0b;
    --accent-emerald: #10b981;
    --accent-blue: #3b82f6;
    --accent-purple: #8b5cf6;
    --text-light: #f8fafc;
    --text-muted: #94a3b8;
    --shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --radius: 12px;
    --success: #10b981;
    --warning: #f59e0b;
    --error: #ef4444;
    --info: #3b82f6;
    --gradient-primary: linear-gradient(135deg, #f59e0b, #d97706);
    --gradient-secondary: linear-gradient(135deg, #10b981, #059669);
    --gradient-blue: linear-gradient(135deg, #3b82f6, #2563eb);
    --gradient-purple: linear-gradient(135deg, #8b5cf6, #7c3aed);
}

/* ====== MOBILE FIRST BASE STYLES ====== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Inter', sans-serif;
    -webkit-tap-highlight-color: transparent;
}

html {
    font-size: 14px;
    scroll-behavior: smooth;
    overflow-x: hidden;
}

body {
    background-color: var(--primary);
    color: var(--text-light);
    line-height: 1.6;
    overflow-x: hidden;
    transition: var(--transition);
    min-height: 100vh;
    position: relative;
    font-size: 0.9rem;
}

body.light-mode {
    --primary: #f8fafc;
    --secondary: #e2e8f0;
    --text-light: #0f172a;
    --text-muted: #64748b;
    --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

/* ====== MOBILE FIRST TYPOGRAPHY ====== */
h1 { font-size: 1.8rem; line-height: 1.2; }
h2 { font-size: 1.5rem; line-height: 1.3; }
h3 { font-size: 1.25rem; line-height: 1.4; }
h4 { font-size: 1.1rem; line-height: 1.4; }
p { font-size: 0.9rem; margin-bottom: 1rem; }

/* ====== UTILITY CLASSES ====== */
.text-center { text-align: center; }
.text-right { text-align: right; }
.text-left { text-align: left; }
.mobile-only { display: block; }
.desktop-only { display: none; }
.hidden { display: none; }
.visible { display: block; }
.flex { display: flex; }
.flex-col { flex-direction: column; }
.flex-wrap { flex-wrap: wrap; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.gap-1 { gap: 0.5rem; }
.gap-2 { gap: 1rem; }
.gap-3 { gap: 1.5rem; }
.w-full { width: 100%; }
.h-full { height: 100%; }
.p-2 { padding: 0.5rem; }
.p-4 { padding: 1rem; }
.m-2 { margin: 0.5rem; }
.m-4 { margin: 1rem; }
.mt-1 { margin-top: 0.25rem; }
.mt-2 { margin-top: 0.5rem; }
.mt-3 { margin-top: 0.75rem; }
.mb-1 { margin-bottom: 0.25rem; }
.mb-2 { margin-bottom: 0.5rem; }
.mb-3 { margin-bottom: 0.75rem; }
.rounded { border-radius: var(--radius); }
.rounded-full { border-radius: 9999px; }
.shadow { box-shadow: var(--shadow); }
.text-xs { font-size: 0.75rem; }
.text-sm { font-size: 0.875rem; }
.text-lg { font-size: 1.125rem; }
.text-xl { font-size: 1.25rem; }
.font-bold { font-weight: 700; }
.font-semibold { font-weight: 600; }
.truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* ====== LOADING SPINNER ====== */
.loading-spinner {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(15, 23, 42, 0.95);
    z-index: 9999;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    backdrop-filter: blur(5px);
}

.spinner {
    width: 40px;
    height: 40px;
    border: 3px solid rgba(251, 191, 36, 0.3);
    border-radius: 50%;
    border-top-color: var(--accent-gold);
    animation: spin 1s linear infinite;
    margin-bottom: 1rem;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ====== TOAST NOTIFICATIONS ====== */
.toast-container {
    position: fixed;
    top: 80px;
    left: 0;
    right: 0;
    z-index: 9998;
    padding: 0 1rem;
    pointer-events: none;
}

.toast {
    padding: 0.875rem 1rem;
    margin-bottom: 0.75rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    display: flex;
    align-items: center;
    animation: slideInDown 0.3s, slideOutUp 0.5s 2.5s;
    animation-fill-mode: forwards;
    opacity: 0;
    transform: translateY(-100%);
    pointer-events: auto;
    font-size: 0.875rem;
    backdrop-filter: blur(10px);
}

.toast.success {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.95), rgba(5, 150, 105, 0.95));
    color: white;
    border-left: 4px solid var(--success);
}

.toast.error {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.95), rgba(220, 38, 38, 0.95));
    color: white;
    border-left: 4px solid var(--error);
}

.toast.warning {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.95), rgba(217, 119, 6, 0.95));
    color: white;
    border-left: 4px solid var(--warning);
}

.toast.info {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.95), rgba(37, 99, 235, 0.95));
    color: white;
    border-left: 4px solid var(--info);
}

.toast i {
    margin-right: 0.75rem;
    font-size: 1rem;
}

@keyframes slideInDown {
    from {
        opacity: 0;
        transform: translateY(-100%);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideOutUp {
    from {
        opacity: 1;
        transform: translateY(0);
    }
    to {
        opacity: 0;
        transform: translateY(-100%);
    }
}

/* ====== MOBILE-FIRST NAVBAR ====== */
.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    background: rgba(15, 23, 42, 0.98);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    height: 60px;
}

.light-mode .navbar {
    background: rgba(248, 250, 252, 0.98);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.navbar.scrolled {
    padding: 0.5rem 1rem;
    height: 55px;
}

.logo {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--accent-gold);
}

.logo i {
    color: var(--accent-emerald);
    font-size: 1.5rem;
}

.nav-links {
    display: none;
}

.nav-buttons {
    display: none;
}

.theme-toggle {
    background: transparent;
    border: none;
    color: var(--text-light);
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
}

.theme-toggle:hover {
    background: rgba(255, 255, 255, 0.1);
}

.light-mode .theme-toggle {
    color: var(--text-light);
}

.hamburger {
    display: block;
    cursor: pointer;
    font-size: 1.5rem;
    color: var(--text-light);
    padding: 0.5rem;
    transition: var(--transition);
}

/* ====== MOBILE MENU ====== */
.mobile-menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 999;
    display: none;
    backdrop-filter: blur(5px);
}

.mobile-menu-overlay.active {
    display: block;
    animation: fadeIn 0.3s ease;
}

.mobile-menu {
    position: fixed;
    top: 0;
    right: -100%;
    width: 85%;
    max-width: 320px;
    height: 100vh;
    background: var(--primary);
    z-index: 1000;
    padding: 1.5rem 1rem;
    transition: var(--transition);
    box-shadow: -5px 0 25px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
    overflow-y: auto;
}

.light-mode .mobile-menu {
    background: var(--primary);
}

.mobile-menu.active {
    right: 0;
}

.mobile-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.mobile-menu-links {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 2rem;
}

.mobile-menu-links a {
    color: var(--text-light);
    text-decoration: none;
    font-size: 1rem;
    padding: 0.75rem 1rem;
    border-radius: 8px;
    transition: var(--transition);
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.light-mode .mobile-menu-links a {
    color: var(--text-light);
}

.mobile-menu-links a:hover,
.mobile-menu-links a.active {
    background: rgba(251, 191, 36, 0.1);
    color: var(--accent-gold);
    transform: translateX(5px);
}

.mobile-menu-links i {
    width: 20px;
    text-align: center;
}

.mobile-menu-buttons {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-top: auto;
    padding-top: 1rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

/* ====== HERO SECTION - MOBILE FIRST ====== */
.hero {
    min-height: 100vh;
    display: flex;
    align-items: center;
    padding: 5rem 1rem 2rem;
    background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.9)), 
                url('https://images.unsplash.com/photo-1642790553125-43a195c07ed7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    position: relative;
    overflow: hidden;
}

.light-mode .hero {
    background: linear-gradient(135deg, rgba(248, 250, 252, 0.95), rgba(226, 232, 240, 0.9)), 
                url('https://images.unsplash.com/photo-1642790553125-43a195c07ed7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');
}

.hero-content {
    width: 100%;
    z-index: 1;
    text-align: center;
}

.hero h1 {
    font-size: 2rem;
    margin-bottom: 1rem;
    line-height: 1.2;
    background: linear-gradient(135deg, var(--accent-gold), var(--accent-emerald));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.hero p {
    font-size: 0.95rem;
    margin-bottom: 1.5rem;
    color: var(--text-muted);
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
}

.hero-buttons {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 2rem;
}

.btn {
    padding: 0.875rem 1.5rem;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
    border: none;
    outline: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-size: 0.95rem;
    width: 100%;
}

.btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.btn-outline {
    background: transparent;
    border: 2px solid var(--accent-emerald);
    color: var(--accent-emerald);
}

.btn-outline:hover:not(:disabled) {
    background: var(--accent-emerald);
    color: var(--primary);
}

.btn-primary {
    background: linear-gradient(135deg, var(--accent-gold), #f59e0b);
    color: var(--primary);
    font-weight: 600;
}

.btn-primary:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(251, 191, 36, 0.3);
}

.hero-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin-top: 2rem;
}

.stat {
    background: rgba(255, 255, 255, 0.05);
    padding: 1rem;
    border-radius: 10px;
    text-align: center;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--accent-gold);
    display: block;
    margin-bottom: 0.25rem;
}

.stat-label {
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* ====== SECTIONS - MOBILE FIRST ====== */
.section {
    padding: 3rem 1rem;
}

.section-title {
    text-align: center;
    margin-bottom: 2rem;
}

.section-title h2 {
    font-size: 1.75rem;
    margin-bottom: 0.75rem;
    position: relative;
    display: inline-block;
}

.section-title h2::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 3px;
    background: var(--accent-gold);
    border-radius: 2px;
}

.section-title p {
    color: var(--text-muted);
    max-width: 100%;
    margin: 0 auto;
    font-size: 0.9rem;
}

/* ====== ABOUT SECTION ====== */
.about-content {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.about-text h3 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    color: var(--accent-gold);
}

.about-features {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
    margin-top: 1.5rem;
}

.feature {
    background: var(--secondary);
    padding: 1rem;
    border-radius: 10px;
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    transition: var(--transition);
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.feature:hover {
    transform: translateY(-3px);
    border-color: var(--accent-gold);
    box-shadow: var(--shadow);
}

.feature-icon {
    width: 45px;
    height: 45px;
    background: linear-gradient(135deg, var(--accent-gold), var(--accent-emerald));
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary);
    font-size: 1.1rem;
    flex-shrink: 0;
}

.feature-content h4 {
    margin-bottom: 0.25rem;
    font-size: 1rem;
}

.feature-content p {
    color: var(--text-muted);
    font-size: 0.85rem;
}

.about-image {
    position: relative;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: var(--shadow);
    margin-top: 1rem;
}

.about-image img {
    width: 100%;
    height: auto;
    display: block;
}

/* ====== PLANS SECTION - MOBILE FIRST ====== */
.plans {
    background-color: var(--secondary);
}

.plans-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-top: 2rem;
    overflow-x: auto;
    padding-bottom: 1rem;
}

.plans-container::-webkit-scrollbar {
    height: 4px;
}

.plans-container::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 2px;
}

.plans-container::-webkit-scrollbar-thumb {
    background: var(--accent-gold);
    border-radius: 2px;
}

.plan-card {
    background: var(--primary);
    border-radius: 15px;
    padding: 1.5rem;
    box-shadow: var(--shadow);
    transition: var(--transition);
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(251, 191, 36, 0.1);
    min-width: 280px;
}

.plan-card:hover {
    transform: translateY(-5px);
    border-color: var(--accent-gold);
}

.plan-badge {
    position: absolute;
    top: 15px;
    right: -30px;
    background: var(--accent-emerald);
    color: var(--primary);
    padding: 4px 30px;
    transform: rotate(45deg);
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.5px;
}

.plan-header {
    text-align: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.plan-name {
    font-size: 1.25rem;
    margin-bottom: 0.5rem;
    color: var(--accent-gold);
}

.plan-price {
    font-size: 2rem;
    font-weight: 700;
    color: var(--accent-gold);
    margin: 0.5rem 0;
}

.plan-period {
    color: var(--text-muted);
    font-size: 0.85rem;
}

.plan-features {
    margin-bottom: 1.5rem;
}

.plan-feature {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
    font-size: 0.9rem;
}

.plan-feature i {
    color: var(--accent-emerald);
    font-size: 0.9rem;
}

.plan-button {
    width: 100%;
    padding: 0.875rem;
    font-size: 0.95rem;
}

/* ====== HOW IT WORKS - MOBILE FIRST ====== */
.steps {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    margin-top: 2rem;
    position: relative;
}

.steps::before {
    content: '';
    position: absolute;
    top: 40px;
    left: 50%;
    height: calc(100% - 80px);
    width: 2px;
    background: var(--accent-emerald);
    z-index: 0;
    transform: translateX(-50%);
}

.step {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    position: relative;
    z-index: 1;
    background: var(--secondary);
    padding: 1.5rem;
    border-radius: var(--radius);
    transition: var(--transition);
}

.step:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow);
}

.step-number {
    width: 50px;
    height: 50px;
    background: var(--accent-gold);
    color: var(--primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 1rem;
    border: 3px solid var(--primary);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

.step-title {
    font-size: 1.1rem;
    margin-bottom: 0.5rem;
    color: var(--accent-gold);
}

.step-description {
    color: var(--text-muted);
    font-size: 0.9rem;
}

/* ====== TESTIMONIALS - MOBILE FIRST ====== */
.testimonials {
    background-color: var(--secondary);
}

.testimonials-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-top: 2rem;
    overflow-x: auto;
    padding-bottom: 1rem;
}

.testimonial-card {
    background: var(--primary);
    border-radius: 15px;
    padding: 1.5rem;
    box-shadow: var(--shadow);
    transition: var(--transition);
    min-width: 280px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.testimonial-card:hover {
    transform: translateY(-3px);
}

.testimonial-content {
    margin-bottom: 1.5rem;
    font-style: italic;
    position: relative;
    font-size: 0.95rem;
    line-height: 1.6;
}

.testimonial-content::before {
    content: '"';
    font-size: 3rem;
    color: var(--accent-gold);
    position: absolute;
    top: -15px;
    left: -5px;
    opacity: 0.3;
    line-height: 1;
}

.testimonial-author {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.author-avatar {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    overflow: hidden;
    border: 2px solid var(--accent-gold);
    flex-shrink: 0;
}

.author-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.author-info h4 {
    margin-bottom: 0.25rem;
    font-size: 0.95rem;
}

.author-info p {
    color: var(--text-muted);
    font-size: 0.85rem;
}

/* ====== FOOTER - MOBILE FIRST ====== */
footer {
    background-color: #0a0f1c;
    padding: 2rem 1rem 1rem;
}

.light-mode footer {
    background-color: #e2e8f0;
}

.footer-content {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
}

.footer-column h3 {
    font-size: 1.1rem;
    margin-bottom: 1rem;
    position: relative;
    padding-bottom: 0.5rem;
    color: var(--accent-gold);
}

.footer-column h3::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 35px;
    height: 2px;
    background: var(--accent-gold);
}

.footer-links {
    list-style: none;
}

.footer-links li {
    margin-bottom: 0.75rem;
}

.footer-links a {
    color: var(--text-muted);
    text-decoration: none;
    transition: var(--transition);
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
}

.footer-links a:hover {
    color: var(--accent-gold);
    padding-left: 5px;
}

.social-links {
    display: flex;
    gap: 0.75rem;
    margin-top: 1rem;
}

.social-links a {
    width: 38px;
    height: 38px;
    background: var(--secondary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-light);
    transition: var(--transition);
    font-size: 1rem;
}

.social-links a:hover {
    background: var(--accent-gold);
    color: var(--primary);
    transform: translateY(-3px);
}

.footer-bottom {
    text-align: center;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--text-muted);
    font-size: 0.8rem;
}

/* ====== REGISTRATION/LOGIN PAGES - MOBILE FIRST ====== */
.registration-page,
.login-page,
.dashboard-page,
.investment-plans-page,
.profile-page,
.kyc-page,
.investment-history-page,
.transaction-history-page,
.referral-page,
.support-page,
.admin-page {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4rem 1rem 2rem;
    background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.95)), 
                url('https://images.unsplash.com/photo-1642790553125-43a195c07ed7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
}

.registration-container,
.login-container {
    width: 100%;
    max-width: 480px;
    background: var(--primary);
    border-radius: 15px;
    overflow: hidden;
    box-shadow: var(--shadow);
}

.registration-info,
.login-info {
    padding: 2rem 1.5rem;
    background: linear-gradient(135deg, var(--accent-emerald), var(--accent-gold));
    color: var(--primary);
    text-align: center;
}

.registration-info h2,
.login-info h2 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
}

.registration-info p,
.login-info p {
    margin-bottom: 1.5rem;
    font-size: 0.9rem;
}

.info-features {
    list-style: none;
    text-align: left;
    margin-top: 1.5rem;
}

.info-features li {
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.9rem;
}

.info-features i {
    font-size: 1rem;
    flex-shrink: 0;
}

.registration-form,
.login-form {
    padding: 2rem 1.5rem;
}

.form-header,
.login-form-header {
    text-align: center;
    margin-bottom: 1.5rem;
}

.form-header h2,
.login-form-header h2 {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
}

.form-header p,
.login-form-header p {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.form-group {
    margin-bottom: 1.25rem;
    position: relative;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    font-size: 0.9rem;
}

.form-control {
    width: 100%;
    padding: 0.875rem 1rem;
    background: var(--secondary);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    color: var(--text-light);
    font-size: 0.95rem;
    transition: var(--transition);
}

.form-control:focus {
    border-color: var(--accent-emerald);
    outline: none;
    box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
}

.password-strength {
    height: 3px;
    margin-top: 0.5rem;
    border-radius: 2px;
    transition: var(--transition);
}

.password-strength.weak {
    background: var(--error);
    width: 25%;
}

.password-strength.medium {
    background: var(--warning);
    width: 50%;
}

.password-strength.strong {
    background: var(--success);
    width: 100%;
}

.password-toggle {
    position: absolute;
    right: 12px;
    top: 42px;
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 1rem;
    padding: 0.25rem;
}

.form-footer,
.login-form-footer {
    margin-top: 1.5rem;
    text-align: center;
    font-size: 0.9rem;
}

.forgot-password {
    display: block;
    text-align: right;
    margin-top: 0.5rem;
    color: var(--accent-emerald);
    text-decoration: none;
    font-size: 0.85rem;
}

/* ====== DASHBOARD - MOBILE FIRST ====== */
.dashboard-container {
    width: 100%;
    max-width: 1200px;
    background: var(--primary);
    border-radius: 15px;
    overflow: hidden;
    box-shadow: var(--shadow);
    margin-top: 1rem;
}

.dashboard-header {
    padding: 1.25rem 1rem;
    background: var(--secondary);
    display: flex;
    flex-direction: column;
    gap: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.dashboard-header h1 {
    font-size: 1.5rem;
    color: var(--accent-gold);
    text-align: center;
}

.user-info {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
}

.user-avatar {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-emerald), var(--accent-gold));
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--primary);
    font-weight: 700;
    border: 2px solid var(--accent-gold);
    font-size: 1rem;
}

.dashboard-content {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
}

.stat-card {
    background: var(--secondary);
    padding: 1.25rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transition: var(--transition);
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.stat-card:hover {
    transform: translateY(-2px);
    border-color: var(--accent-gold);
}

.stat-card h3 {
    font-size: 0.85rem;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
}

.stat-card .value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--accent-gold);
}

.chart-container {
    background: var(--secondary);
    padding: 1.25rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    height: 280px;
}

.chart-container h3 {
    margin-bottom: 1rem;
    font-size: 1.1rem;
}

.investments-list,
.transactions-list {
    background: var(--secondary);
    padding: 1.25rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.investments-list h3,
.transactions-list h3 {
    margin-bottom: 1rem;
    font-size: 1.1rem;
}

.investment-item,
.transaction-item {
    display: flex;
    justify-content: space-between;
    padding: 0.875rem 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    transition: var(--transition);
    font-size: 0.9rem;
}

.investment-item:hover,
.transaction-item:hover {
    background: rgba(255, 255, 255, 0.05);
    padding-left: 0.5rem;
    padding-right: 0.5rem;
    border-radius: 5px;
}

.investment-item:last-child,
.transaction-item:last-child {
    border-bottom: none;
}

.investment-name,
.transaction-type {
    font-weight: 500;
}

.investment-amount,
.transaction-amount {
    color: var(--accent-gold);
    font-weight: 600;
    font-size: 0.95rem;
}

.investment-status,
.transaction-date {
    color: var(--text-muted);
    font-size: 0.8rem;
}

.quick-actions {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
}

.action-card {
    background: var(--secondary);
    padding: 1.25rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    text-align: center;
    transition: var(--transition);
    cursor: pointer;
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.action-card:hover {
    transform: translateY(-3px);
    border-color: var(--accent-gold);
}

.action-card i {
    font-size: 1.5rem;
    margin-bottom: 0.75rem;
    color: var(--accent-emerald);
}

.action-card h3 {
    font-size: 0.95rem;
    margin-bottom: 0.5rem;
}

.action-card p {
    color: var(--text-muted);
    font-size: 0.85rem;
}

/* ====== PROFILE PAGE - MOBILE FIRST ====== */
.profile-container {
    width: 100%;
    max-width: 1000px;
    background: var(--primary);
    border-radius: 15px;
    overflow: hidden;
    box-shadow: var(--shadow);
}

.profile-header {
    padding: 1.25rem 1rem;
    background: var(--secondary);
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
    text-align: center;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.profile-header h1 {
    font-size: 1.5rem;
    color: var(--accent-gold);
}

.profile-content {
    display: flex;
    flex-direction: column;
    padding: 1rem;
    gap: 1.5rem;
}

.profile-sidebar {
    background: var(--secondary);
    padding: 1.25rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    order: 2;
}

.profile-nav {
    list-style: none;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    gap: 0.5rem;
    justify-content: center;
}

.profile-nav li {
    flex: 1;
    min-width: 120px;
}

.profile-nav a {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem;
    color: var(--text-light);
    text-decoration: none;
    border-radius: 8px;
    transition: var(--transition);
    font-size: 0.85rem;
    text-align: center;
    white-space: nowrap;
}

.profile-nav a:hover,
.profile-nav a.active {
    background: rgba(251, 191, 36, 0.1);
    color: var(--accent-gold);
}

.profile-main {
    background: var(--secondary);
    padding: 1.25rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    order: 1;
}

.profile-section {
    margin-bottom: 2rem;
}

.profile-section h2 {
    font-size: 1.25rem;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--accent-gold);
}

.two-factor-setup {
    background: rgba(16, 185, 129, 0.1);
    padding: 1.25rem;
    border-radius: 10px;
    margin-top: 1rem;
    border: 1px solid rgba(16, 185, 129, 0.2);
}

.two-factor-code {
    display: flex;
    gap: 0.75rem;
    margin: 1rem 0;
    justify-content: center;
}

.two-factor-code input {
    width: 45px;
    height: 45px;
    text-align: center;
    font-size: 1.25rem;
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    background: var(--primary);
    color: var(--text-light);
    font-weight: 600;
}

/* ====== REFERRAL PAGE - MOBILE FIRST ====== */
.referral-container {
    width: 100%;
    max-width: 1000px;
    background: var(--primary);
    border-radius: 15px;
    overflow: hidden;
    box-shadow: var(--shadow);
}

.referral-header {
    padding: 1.5rem 1rem;
    background: var(--secondary);
    text-align: center;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.referral-header h1 {
    font-size: 1.5rem;
    color: var(--accent-gold);
    margin-bottom: 0.5rem;
}

.referral-content {
    padding: 1.5rem 1rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.referral-stats,
.referral-links {
    background: var(--secondary);
    padding: 1.5rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.referral-stats h2,
.referral-links h2 {
    font-size: 1.25rem;
    margin-bottom: 1rem;
    color: var(--accent-gold);
}

.referral-stat {
    display: flex;
    justify-content: space-between;
    padding: 0.875rem 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    font-size: 0.95rem;
}

.referral-stat:last-child {
    border-bottom: none;
}

.referral-stat span:last-child {
    font-weight: 600;
    color: var(--accent-gold);
}

/* ====== SUPPORT PAGE - MOBILE FIRST ====== */
.support-container {
    width: 100%;
    max-width: 1000px;
    background: var(--primary);
    border-radius: 15px;
    overflow: hidden;
    box-shadow: var(--shadow);
}

.support-header {
    padding: 1.5rem 1rem;
    background: var(--secondary);
    text-align: center;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.support-header h1 {
    font-size: 1.5rem;
    color: var(--accent-gold);
    margin-bottom: 0.5rem;
}

.support-content {
    padding: 1.5rem 1rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.support-categories {
    background: var(--secondary);
    padding: 1.25rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.support-category {
    padding: 0.75rem 1rem;
    border-radius: 8px;
    cursor: pointer;
    transition: var(--transition);
    flex: 1;
    min-width: 120px;
    text-align: center;
    font-size: 0.9rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.support-category:hover,
.support-category.active {
    background: rgba(251, 191, 36, 0.1);
    color: var(--accent-gold);
    border-color: var(--accent-gold);
}

.support-category i {
    margin-right: 0.5rem;
}

.support-main {
    background: var(--secondary);
    padding: 1.5rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.faq-item {
    margin-bottom: 1.25rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 1.25rem;
}

.faq-item:last-child {
    margin-bottom: 0;
    border-bottom: none;
}

.faq-question {
    font-weight: 600;
    margin-bottom: 0.5rem;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.95rem;
    padding-right: 1rem;
}

.faq-question i {
    transition: var(--transition);
}

.faq-item.active .faq-question i {
    transform: rotate(180deg);
}

.faq-answer {
    color: var(--text-muted);
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
    font-size: 0.9rem;
    line-height: 1.6;
}

.faq-item.active .faq-answer {
    max-height: 500px;
    margin-top: 0.75rem;
}

/* ====== ADMIN PAGE - MOBILE FIRST ====== */
.admin-container {
    width: 100%;
    max-width: 1400px;
    background: var(--primary);
    border-radius: 15px;
    overflow: hidden;
    box-shadow: var(--shadow);
}

.admin-header {
    padding: 1.25rem 1rem;
    background: var(--secondary);
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
    text-align: center;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.admin-header h1 {
    font-size: 1.5rem;
    color: var(--accent-gold);
}

.admin-content {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.admin-sidebar {
    background: var(--secondary);
    padding: 1.25rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    order: 2;
}

.admin-nav {
    list-style: none;
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    gap: 0.5rem;
    justify-content: center;
}

.admin-nav li {
    flex: 1;
    min-width: 120px;
}

.admin-nav a {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem;
    color: var(--text-light);
    text-decoration: none;
    border-radius: 8px;
    transition: var(--transition);
    font-size: 0.85rem;
    text-align: center;
    white-space: nowrap;
}

.admin-nav a:hover,
.admin-nav a.active {
    background: rgba(251, 191, 36, 0.1);
    color: var(--accent-gold);
}

.admin-main {
    background: var(--secondary);
    padding: 1.25rem;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    order: 1;
}

.admin-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.admin-stat {
    background: var(--primary);
    padding: 1.25rem;
    border-radius: 10px;
    text-align: center;
    transition: var(--transition);
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.admin-stat:hover {
    transform: translateY(-2px);
    border-color: var(--accent-gold);
}

.admin-stat .value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--accent-gold);
    display: block;
    margin-bottom: 0.25rem;
}

.admin-stat .label {
    color: var(--text-muted);
    font-size: 0.85rem;
}

.admin-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.8rem;
    display: block;
    overflow-x: auto;
    white-space: nowrap;
}

.admin-table th,
.admin-table td {
    padding: 0.75rem;
    text-align: left;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    min-width: 100px;
}

.admin-table th {
    color: var(--text-muted);
    font-weight: 600;
    font-size: 0.85rem;
    background: rgba(0, 0, 0, 0.1);
}

/* ====== MODALS - MOBILE FIRST ====== */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 2000;
    align-items: flex-start;
    justify-content: center;
    padding: 1rem;
    overflow-y: auto;
    backdrop-filter: blur(5px);
}

.modal-content {
    background: var(--primary);
    padding: 1.5rem;
    border-radius: 15px;
    width: 100%;
    max-width: 500px;
    box-shadow: var(--shadow);
    margin-top: 2rem;
    margin-bottom: 2rem;
    animation: modalAppear 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.25rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.modal-header h2 {
    font-size: 1.35rem;
    color: var(--accent-gold);
}

.close-modal {
    background: none;
    border: none;
    color: var(--text-light);
    font-size: 1.5rem;
    cursor: pointer;
    transition: var(--transition);
    width: 35px;
    height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}

.close-modal:hover {
    color: var(--accent-gold);
    background: rgba(255, 255, 255, 0.1);
}

@keyframes modalAppear {
    from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* ====== FILE UPLOAD STYLES ====== */
.file-upload-container {
    border: 2px dashed rgba(255, 255, 255, 0.2);
    border-radius: 10px;
    padding: 2rem 1rem;
    text-align: center;
    cursor: pointer;
    transition: var(--transition);
    margin-bottom: 1rem;
}

.file-upload-container:hover {
    border-color: var(--accent-emerald);
    background: rgba(16, 185, 129, 0.05);
}

.file-upload-container i {
    font-size: 2.5rem;
    color: var(--accent-emerald);
    margin-bottom: 1rem;
}

.file-upload-container p {
    color: var(--text-muted);
    font-size: 0.9rem;
    margin-bottom: 0;
}

.file-preview {
    max-width: 100%;
    max-height: 200px;
    margin-top: 1rem;
    border-radius: 8px;
    display: none;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* ====== STATUS BADGES ====== */
.status-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    display: inline-block;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.status-badge.pending {
    background: rgba(245, 158, 11, 0.2);
    color: var(--warning);
    border: 1px solid rgba(245, 158, 11, 0.3);
}

.status-badge.approved {
    background: rgba(16, 185, 129, 0.2);
    color: var(--success);
    border: 1px solid rgba(16, 185, 129, 0.3);
}

.status-badge.rejected {
    background: rgba(239, 68, 68, 0.2);
    color: var(--error);
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.status-badge.active {
    background: rgba(59, 130, 246, 0.2);
    color: var(--info);
    border: 1px solid rgba(59, 130, 246, 0.3);
}

/* ====== BACK TO TOP BUTTON ====== */
.back-to-top {
    position: fixed;
    bottom: 1.5rem;
    right: 1.5rem;
    width: 45px;
    height: 45px;
    background: var(--accent-gold);
    color: var(--primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    cursor: pointer;
    transition: var(--transition);
    opacity: 0;
    visibility: hidden;
    z-index: 999;
    box-shadow: 0 4px 15px rgba(251, 191, 36, 0.4);
    border: none;
}

.back-to-top.visible {
    opacity: 1;
    visibility: visible;
}

.back-to-top:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 20px rgba(251, 191, 36, 0.6);
}

/* ====== MEDIA QUERIES FOR TABLETS (768px and up) ====== */
@media (min-width: 768px) {
    html {
        font-size: 15px;
    }
    
    body {
        font-size: 0.95rem;
    }
    
    h1 { font-size: 2.25rem; }
    h2 { font-size: 1.75rem; }
    h3 { font-size: 1.5rem; }
    h4 { font-size: 1.25rem; }
    
    .mobile-only { display: none; }
    .desktop-only { display: block; }
    
    /* Navbar */
    .navbar {
        padding: 0.75rem 2rem;
    }
    
    .nav-links {
        display: flex;
        gap: 1.5rem;
        margin-left: 2rem;
    }
    
    .nav-links a {
        color: var(--text-light);
        text-decoration: none;
        font-weight: 500;
        font-size: 0.95rem;
        padding: 0.5rem 0;
        position: relative;
    }
    
    .nav-links a::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        height: 2px;
        background: var(--accent-gold);
        transition: var(--transition);
    }
    
    .nav-links a:hover::after {
        width: 100%;
    }
    
    .nav-buttons {
        display: flex;
        gap: 0.75rem;
        align-items: center;
    }
    
    .hamburger {
        display: none;
    }
    
    /* Hero Section */
    .hero {
        padding: 6rem 2rem 3rem;
    }
    
    .hero h1 {
        font-size: 2.5rem;
    }
    
    .hero-buttons {
        flex-direction: row;
        justify-content: center;
        gap: 1rem;
    }
    
    .btn {
        width: auto;
        min-width: 160px;
    }
    
    .hero-stats {
        grid-template-columns: repeat(3, 1fr);
    }
    
    /* Sections */
    .section {
        padding: 4rem 2rem;
    }
    
    /* About Section */
    .about-content {
        flex-direction: row;
        align-items: center;
        gap: 3rem;
    }
    
    .about-text,
    .about-image {
        flex: 1;
    }
    
    .about-features {
        grid-template-columns: repeat(2, 1fr);
    }
    
    /* Plans Section */
    .plans-container {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
        overflow-x: visible;
    }
    
    .plan-card {
        min-width: auto;
    }
    
    /* How It Works */
    .steps {
        flex-direction: row;
        justify-content: space-between;
    }
    
    .steps::before {
        top: 40px;
        left: 0;
        right: 0;
        height: 2px;
        width: 100%;
        transform: none;
    }
    
    .step {
        width: 30%;
    }
    
    /* Testimonials */
    .testimonials-container {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
        overflow-x: visible;
    }
    
    .testimonial-card {
        min-width: auto;
    }
    
    /* Footer */
    .footer-content {
        grid-template-columns: repeat(2, 1fr);
    }
    
    /* Dashboard */
    .dashboard-header {
        flex-direction: row;
        justify-content: space-between;
        padding: 1.5rem 2rem;
    }
    
    .dashboard-header h1 {
        text-align: left;
    }
    
    .dashboard-content {
        padding: 1.5rem;
        flex-direction: row;
    }
    
    .dashboard-main {
        flex: 2;
    }
    
    .dashboard-sidebar {
        flex: 1;
    }
    
    .quick-actions {
        grid-template-columns: 1fr;
    }
    
    /* Profile Page */
    .profile-content {
        flex-direction: row;
    }
    
    .profile-sidebar {
        flex: 0 0 250px;
        order: 1;
    }
    
    .profile-main {
        flex: 1;
        order: 2;
    }
    
    .profile-nav {
        flex-direction: column;
    }
    
    /* Referral Page */
    .referral-content {
        flex-direction: row;
    }
    
    .referral-stats,
    .referral-links {
        flex: 1;
    }
    
    /* Support Page */
    .support-content {
        flex-direction: row;
    }
    
    .support-categories {
        flex: 0 0 200px;
        flex-direction: column;
    }
    
    .support-category {
        min-width: auto;
    }
    
    .support-main {
        flex: 1;
    }
    
    /* Admin Page */
    .admin-content {
        flex-direction: row;
    }
    
    .admin-sidebar {
        flex: 0 0 200px;
        order: 1;
    }
    
    .admin-main {
        flex: 1;
        order: 2;
    }
    
    .admin-nav {
        flex-direction: column;
    }
    
    .admin-stats {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .admin-table {
        display: table;
        overflow-x: auto;
    }
    
    /* Modal */
    .modal-content {
        margin-top: 3rem;
    }
}

/* ====== MEDIA QUERIES FOR DESKTOP (992px and up) ====== */
@media (min-width: 992px) {
    html {
        font-size: 16px;
    }
    
    body {
        font-size: 1rem;
    }
    
    h1 { font-size: 3rem; }
    h2 { font-size: 2.25rem; }
    h3 { font-size: 1.75rem; }
    h4 { font-size: 1.5rem; }
    
    /* Hero Section */
    .hero {
        padding: 8rem 5% 4rem;
    }
    
    .hero h1 {
        font-size: 3.25rem;
    }
    
    .hero-content {
        max-width: 600px;
        text-align: left;
    }
    
    .hero-buttons {
        justify-content: flex-start;
    }
    
    .hero-stats {
        justify-content: flex-start;
        grid-template-columns: repeat(3, auto);
        display: flex;
        gap: 3rem;
    }
    
    .stat {
        background: transparent;
        border: none;
        padding: 0;
        text-align: left;
    }
    
    /* Sections */
    .section {
        padding: 6rem 5%;
    }
    
    .section-title p {
        max-width: 600px;
    }
    
    /* Plans Section */
    .plans-container {
        grid-template-columns: repeat(3, 1fr);
    }
    
    /* Testimonials */
    .testimonials-container {
        grid-template-columns: repeat(3, 1fr);
    }
    
    /* Footer */
    .footer-content {
        grid-template-columns: repeat(4, 1fr);
    }
    
    /* Dashboard */
    .dashboard-container {
        margin-top: 2rem;
    }
    
    .stats-grid {
        grid-template-columns: repeat(4, 1fr);
    }
    
    .chart-container {
        height: 350px;
    }
    
    /* Admin */
    .admin-stats {
        grid-template-columns: repeat(4, 1fr);
    }
    
    /* Toast */
    .toast-container {
        top: 90px;
        left: auto;
        right: 20px;
        padding: 0;
        width: auto;
        max-width: 350px;
    }
    
    .toast {
        animation: slideInRight 0.3s, slideOutRight 0.5s 2.5s;
        transform: translateX(100%);
    }
    
    @keyframes slideInRight {
        from {
            opacity: 0;
            transform: translateX(100%);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }
    
    @keyframes slideOutRight {
        from {
            opacity: 1;
            transform: translateX(0);
        }
        to {
            opacity: 0;
            transform: translateX(100%);
        }
    }
}

/* ====== MEDIA QUERIES FOR LARGE DESKTOP (1200px and up) ====== */
@media (min-width: 1200px) {
    .hero {
        padding: 10rem 5% 6rem;
    }
    
    .hero h1 {
        font-size: 3.5rem;
    }
    
    .dashboard-container,
    .profile-container,
    .referral-container,
    .support-container,
    .admin-container {
        max-width: 95%;
        margin-left: auto;
        margin-right: auto;
    }
    
    .admin-stats {
        grid-template-columns: repeat(6, 1fr);
    }
}

/* ====== DARK/LIGHT MODE ADJUSTMENTS ====== */
.light-mode .btn-outline:hover:not(:disabled) {
    color: var(--text-light);
}

.light-mode .form-control {
    background: rgba(30, 41, 59, 0.1);
    border: 1px solid rgba(0, 0, 0, 0.1);
    color: var(--text-light);
}

.light-mode .stat-card,
.light-mode .investment-item:hover,
.light-mode .transaction-item:hover,
.light-mode .action-card,
.light-mode .plan-card,
.light-mode .testimonial-card,
.light-mode .feature,
.light-mode .step,
.light-mode .profile-sidebar,
.light-mode .profile-main,
.light-mode .support-categories,
.light-mode .support-main,
.light-mode .referral-stats,
.light-mode .referral-links,
.light-mode .admin-sidebar,
.light-mode .admin-main,
.light-mode .admin-stat,
.light-mode .modal-content,
.light-mode .two-factor-code input {
    background: white;
    border-color: rgba(0, 0, 0, 0.1);
}

.light-mode .investment-item,
.light-mode .transaction-item {
    border-bottom-color: rgba(0, 0, 0, 0.1);
}

.light-mode .stat-card:hover,
.light-mode .action-card:hover,
.light-mode .plan-card:hover,
.light-mode .testimonial-card:hover,
.light-mode .feature:hover,
.light-mode .step:hover,
.light-mode .admin-stat:hover {
    border-color: var(--accent-gold);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

/* ====== ACCESSIBILITY & TOUCH OPTIMIZATIONS ====== */
@media (hover: none) and (pointer: coarse) {
    .btn,
    .action-card,
    .plan-card,
    .feature,
    .step,
    .testimonial-card {
        transition: none;
    }
    
    .btn:active,
    .action-card:active,
    .plan-card:active {
        transform: scale(0.98);
    }
    
    .btn:hover:not(:disabled),
    .action-card:hover,
    .plan-card:hover,
    .feature:hover,
    .step:hover,
    .testimonial-card:hover {
        transform: none;
    }
    
    input,
    select,
    textarea {
        font-size: 16px; /* Prevents iOS zoom on focus */
    }
}

/* ====== PRINT STYLES ====== */
@media print {
    .navbar,
    .mobile-menu,
    .mobile-menu-overlay,
    .hero-visual,
    .theme-toggle,
    .hamburger,
    .back-to-top,
    .modal,
    .toast-container,
    .loading-spinner {
        display: none !important;
    }
    
    body {
        background: white !important;
        color: black !important;
        font-size: 12pt;
    }
    
    .hero,
    .section {
        padding: 0 !important;
        background: none !important;
    }
    
    a {
        color: black !important;
        text-decoration: underline;
    }
    
    .btn {
        border: 1px solid black !important;
        background: none !important;
        color: black !important;
    }
}

/* ====== SAFARI SPECIFIC FIXES ====== */
@supports (-webkit-touch-callout: none) {
    .hero {
        background-attachment: scroll;
    }
    
    .modal-content {
        margin-top: env(safe-area-inset-top);
    }
    
    .back-to-top {
        bottom: calc(1.5rem + env(safe-area-inset-bottom));
    }
}

/* ====== ANIMATIONS ====== */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes float {
    0% { transform: translateY(0px) rotate(10deg); }
    50% { transform: translateY(-20px) rotate(10deg); }
    100% { transform: translateY(0px) rotate(10deg); }
}

.hero-visual {
    display: none;
}

@media (min-width: 992px) {
    .hero-visual {
        display: block;
        position: absolute;
        right: 5%;
        bottom: 10%;
        width: 500px;
        height: 400px;
        background: linear-gradient(135deg, var(--accent-emerald), var(--accent-gold));
        border-radius: 20px;
        opacity: 0.1;
        transform: rotate(10deg);
        animation: float 6s ease-in-out infinite;
    }
}

/* ====== SCROLLBAR STYLING ====== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--secondary);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: var(--accent-gold);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #d97706;
}

/* ====== SELECTION STYLING ====== */
::selection {
    background: rgba(245, 158, 11, 0.3);
    color: var(--text-light);
}

/* ====== PLACEHOLDER STYLING ====== */
::placeholder {
    color: var(--text-muted);
    opacity: 0.7;
}

/* ====== FOCUS VISIBLE ====== */
:focus-visible {
    outline: 2px solid var(--accent-emerald);
    outline-offset: 2px;
}

/* ====== SMOOTH SCROLLING FOR ANCHOR LINKS ====== */
@media (prefers-reduced-motion: no-preference) {
    html {
        scroll-behavior: smooth;
    }
}

/* ====== REDUCED MOTION ====== */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}
        /* [REST OF YOUR 3000+ LINES OF CSS CODE REMAINS EXACTLY THE SAME] */
        /* I'm preserving your entire CSS structure */
        
    </style>
</head>
<body>
    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loading-spinner">
        <div class="spinner"></div>
        <p>Processing your request...</p>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>

    <!-- Mobile Menu -->
    <div class="mobile-menu" id="mobile-menu">
        <div class="mobile-menu-header">
            <div class="logo">
                <i class="fas fa-gem"></i>
                <span>Raw Wealthy</span>
            </div>
            <button class="close-modal" id="close-mobile-menu">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="mobile-menu-links">
            <a href="#" onclick="app.showPage('home'); app.closeMobileMenu();">
                <i class="fas fa-home"></i> Home
            </a>
            <a href="#" onclick="app.showPage('home'); app.closeMobileMenu();">
                <i class="fas fa-info-circle"></i> About
            </a>
            <a href="#" onclick="app.showPage('investment-plans'); app.closeMobileMenu();">
                <i class="fas fa-chart-line"></i> Raw Materials
            </a>
            <a href="#" onclick="app.showPage('home'); app.closeMobileMenu();">
                <i class="fas fa-cogs"></i> How It Works
            </a>
            <a href="#" onclick="app.showPage('home'); app.closeMobileMenu();">
                <i class="fas fa-comments"></i> Testimonials
            </a>
        </div>
        <div class="mobile-menu-buttons">
            <button class="btn btn-outline" onclick="app.showPage('login'); app.closeMobileMenu();">Login</button>
            <button class="btn btn-primary" onclick="app.showPage('register'); app.closeMobileMenu();">Register</button>
        </div>
    </div>

    <!-- Home Page -->
    <div id="home-page">
        <!-- Navbar -->
        <nav class="navbar">
            <div class="logo">
                <i class="fas fa-gem"></i>
                <span>Raw Wealthy</span>
            </div>
            <div class="nav-links">
                <a href="#" onclick="app.showPage('home')">Home</a>
                <a href="#" onclick="app.showPage('home')">About</a>
                <a href="#" onclick="app.showPage('investment-plans')">Raw Materials</a>
                <a href="#" onclick="app.showPage('home')">How It Works</a>
                <a href="#" onclick="app.showPage('home')">Testimonials</a>
            </div>
            <div class="nav-buttons">
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="btn btn-outline" onclick="app.showPage('login')">Login</button>
                <button class="btn btn-primary" onclick="app.showPage('register')">Register</button>
            </div>
            <div class="hamburger" id="hamburger">
                <i class="fas fa-bars"></i>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="hero" id="home">
            <div class="hero-content">
                <h1>Invest in Raw Materials. <span class="gradient-text">Earn Daily.</span></h1>
                <p>Join thousands of investors who are growing their wealth with our secure raw materials investment platform. Start with as little as 3,500 and watch your money grow.</p>
                <div class="hero-buttons">
                    <button class="btn btn-primary" onclick="app.showPage('register')">Get Started</button>
                    <button class="btn btn-outline" onclick="app.showPage('investment-plans')">Investment Plans</button>
                </div>
                <div class="hero-stats">
                    <div class="stat">
                        <span class="stat-value" id="total-invested-stat">2.5B+</span>
                        <span class="stat-label">Total Invested</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="active-investors-stat">15,240+</span>
                        <span class="stat-label">Active Investors</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="user-rating-stat">4.9/5</span>
                        <span class="stat-label">User Rating</span>
                    </div>
                </div>
            </div>
            <div class="hero-visual"></div>
        </section>

        <!-- About Section -->
        <section class="section" id="about">
            <div class="section-title">
                <h2>Why Choose Raw Wealthy?</h2>
                <p>We provide a secure and transparent platform for investing in raw materials with industry-leading returns.</p>
            </div>
            <div class="about-content">
                <div class="about-text">
                    <h3>Your Trusted Partner in Raw Materials Investment</h3>
                    <p>With over 7 years of experience in the raw materials industry, we've helped thousands of clients achieve their financial goals through carefully curated investment plans.</p>
                    <p>Our platform uses advanced security measures and follows strict compliance protocols to ensure your investments are safe and secure.</p>
                    <div class="about-features">
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="feature-content">
                                <h4>Secure Investments</h4>
                                <p>Bank-level security for all transactions</p>
                            </div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="feature-content">
                                <h4>High Returns</h4>
                                <p>Industry-leading ROI on all plans</p>
                            </div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="feature-content">
                                <h4>24/7 Support</h4>
                                <p>Round-the-clock customer service</p>
                            </div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="feature-content">
                                <h4>Verified Platform</h4>
                                <p>Fully licensed and regulated</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="about-image">
                    <img src="https://images.unsplash.com/photo-1553877522-43269d4ea984?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="Investment Growth">
                </div>
            </div>
        </section>

        <!-- Raw Materials Plans Section -->
        <section class="section plans" id="plans">
            <div class="section-title">
                <h2>Raw Materials Investment Plans</h2>
                <p>Choose from our carefully curated raw materials investment plans designed to maximize your returns.</p>
            </div>
            <div class="plans-container" id="plans-container">
                <!-- Plans will be dynamically loaded here -->
            </div>
        </section>

        <!-- How It Works Section -->
        <section class="section" id="how-it-works">
            <div class="section-title">
                <h2>How It Works</h2>
                <p>Getting started with Raw Wealthy is simple and straightforward.</p>
            </div>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3 class="step-title">Register</h3>
                    <p class="step-description">Create your account in less than 2 minutes with our simple registration process.</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3 class="step-title">Invest</h3>
                    <p class="step-description">Choose a raw material investment plan that suits your goals and make your first deposit.</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3 class="step-title">Earn</h3>
                    <p class="step-description">Watch your investment grow with daily returns that you can withdraw or reinvest.</p>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section class="section testimonials" id="testimonials">
            <div class="section-title">
                <h2>What Our Investors Say</h2>
                <p>Hear from our satisfied investors who have achieved financial success with our platform.</p>
            </div>
            <div class="testimonials-container">
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "I've been investing with Raw Wealthy for over a year now, and the returns have been consistently impressive. The platform is easy to use, and their customer support is excellent."
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Michael Johnson">
                        </div>
                        <div class="author-info">
                            <h4>Michael Johnson</h4>
                            <p>Gold Investor</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "As a beginner in investing, I was hesitant at first. But Raw Wealthy made the process so simple. I started with the Cocoa plan and have already upgraded to Gold. Highly recommended!"
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Sarah Williams">
                        </div>
                        <div class="author-info">
                            <h4>Sarah Williams</h4>
                            <p>Silver Investor</p>
                        </div>
                    </div>
                </div>
                <div class="testimonial-card">
                    <div class="testimonial-content">
                        "The transparency and regular updates on my investments give me peace of mind. I've tried other platforms, but Raw Wealthy stands out with their professionalism and high returns."
                    </div>
                    <div class="testimonial-author">
                        <div class="author-avatar">
                            <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="Robert Chen">
                        </div>
                        <div class="author-info">
                            <h4>Robert Chen</h4>
                            <p>Bronze Investor</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Raw Wealthy</h3>
                    <p>Your trusted partner for secure and high-yield raw materials investment opportunities. Start growing your wealth today.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="app.showPage('home')"><i class="fas fa-chevron-right"></i> Home</a></li>
                        <li><a href="#about"><i class="fas fa-chevron-right"></i> About Us</a></li>
                        <li><a href="#" onclick="app.showPage('investment-plans')"><i class="fas fa-chevron-right"></i> Investment Plans</a></li>
                        <li><a href="#how-it-works"><i class="fas fa-chevron-right"></i> How It Works</a></li>
                        <li><a href="#testimonials"><i class="fas fa-chevron-right"></i> Testimonials</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Legal</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Privacy Policy</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Terms of Service</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Cookie Policy</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Disclaimer</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-envelope"></i> rawwealthy0@gmail.com</li>
                        <li><i class="fas fa-phone"></i> +234 (0) 902 802 2559</li>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Investment St, Lagos, Nigeria</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Raw Wealthy Investment Platform. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Registration Page -->
    <div id="registration-page" class="registration-page" style="display: none;">
        <div class="registration-container">
            <div class="registration-info">
                <h2>Join Thousands of Successful Investors</h2>
                <p>Create your account today and start your journey to financial freedom with our secure and high-yield raw materials investment plans.</p>
                <ul class="info-features">
                    <li><i class="fas fa-check-circle"></i> Secure and encrypted platform</li>
                    <li><i class="fas fa-check-circle"></i> Daily returns on your investments</li>
                    <li><i class="fas fa-check-circle"></i> 24/7 customer support</li>
                    <li><i class="fas fa-check-circle"></i> Multiple withdrawal options</li>
                    <li><i class="fas fa-check-circle"></i> Referral bonus program</li>
                </ul>
            </div>
            <div class="registration-form">
                <div class="form-header">
                    <h2>Create Account</h2>
                    <p>Fill in your details to get started</p>
                </div>
                <form id="registration-form">
                    <div class="form-group">
                        <label for="fullname">Full Name</label>
                        <input type="text" id="fullname" class="form-control" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" class="form-control" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" class="form-control" placeholder="Enter your phone number" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" class="form-control" placeholder="Create a password" required>
                        <button type="button" class="password-toggle" id="password-toggle">
                            <i class="fas fa-eye"></i>
                        </button>
                        <div class="password-strength" id="password-strength"></div>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm Password</label>
                        <input type="password" id="confirm-password" class="form-control" placeholder="Confirm your password" required>
                        <button type="button" class="password-toggle" id="confirm-password-toggle">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <div class="form-group">
                        <label for="referral">Referral Code (Optional)</label>
                        <input type="text" id="referral" class="form-control" placeholder="Enter referral code if any">
                    </div>
                    <div class="form-group">
                        <label for="risk-tolerance">Risk Tolerance</label>
                        <select id="risk-tolerance" class="form-control" required>
                            <option value="low">Low (Conservative)</option>
                            <option value="medium" selected>Medium (Balanced)</option>
                            <option value="high">High (Aggressive)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="investment-strategy">Investment Strategy</label>
                        <select id="investment-strategy" class="form-control" required>
                            <option value="conservative">Conservative</option>
                            <option value="balanced" selected>Balanced</option>
                            <option value="aggressive">Aggressive</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;" id="register-btn">
                        <span class="btn-text">Create Account</span>
                        <div class="btn-loading" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                    </button>
                </form>
                <div class="form-footer">
                    <p>Already have an account? <a href="#" onclick="app.showPage('login')">Login here</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="login-page" style="display: none;">
        <div class="login-container">
            <div class="login-info">
                <h2>Welcome Back!</h2>
                <p>Access your investment dashboard to track your portfolio, view earnings, and manage your investments.</p>
                <ul class="info-features">
                    <li><i class="fas fa-check-circle"></i> Track your investment performance</li>
                    <li><i class="fas fa-check-circle"></i> View real-time earnings</li>
                    <li><i class="fas fa-check-circle"></i> Manage your portfolio</li>
                    <li><i class="fas fa-check-circle"></i> Withdraw your earnings</li>
                    <li><i class="fas fa-check-circle"></i> Access exclusive features</li>
                </ul>
            </div>
            <div class="login-form">
                <div class="login-form-header">
                    <h2>Login to Your Account</h2>
                    <p>Enter your credentials to access your dashboard</p>
                </div>
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-email">Email Address</label>
                        <input type="email" id="login-email" class="form-control" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" class="form-control" placeholder="Enter your password" required>
                        <button type="button" class="password-toggle" id="login-password-toggle">
                            <i class="fas fa-eye"></i>
                        </button>
                        <a href="#" class="forgot-password" onclick="app.openModal('password-reset-modal'); return false;">Forgot Password?</a>
                    </div>
                    <div id="two-factor-section" style="display: none;">
                        <div class="form-group">
                            <label for="two-factor-code">Two-Factor Authentication Code</label>
                            <input type="text" id="two-factor-code" class="form-control" placeholder="Enter 6-digit code">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;" id="login-btn">
                        <span class="btn-text">Login</span>
                        <div class="btn-loading" style="display: none;">
                            <i class="fas fa-spinner fa-spin"></i>
                        </div>
                    </button>
                </form>
                <div class="login-form-footer">
                    <p>Don't have an account? <a href="#" onclick="app.showPage('register')">Register here</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboard-page" class="dashboard-page" style="display: none;">
        <div class="dashboard-container">
            <div class="dashboard-header">
                <h1>Dashboard</h1>
                <div class="user-info">
                    <div class="user-avatar" id="user-avatar">JD</div>
                    <div>
                        <div id="user-name">John Doe</div>
                        <div style="color: var(--text-muted); font-size: 0.9rem;" id="user-tier">Standard Investor</div>
                    </div>
                    <button class="btn btn-outline" onclick="app.logout()">Logout</button>
                </div>
            </div>
            <div class="dashboard-content">
                <div class="dashboard-main">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Total Balance</h3>
                            <div class="value" id="total-balance">0.00</div>
                        </div>
                        <div class="stat-card">
                            <h3>Active Investments</h3>
                            <div class="value" id="active-investments">0.00</div>
                        </div>
                        <div class="stat-card">
                            <h3>Total Earnings</h3>
                            <div class="value" id="total-earnings">0.00</div>
                        </div>
                        <div class="stat-card">
                            <h3>Referral Bonus</h3>
                            <div class="value" id="referral-bonus">0.00</div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <h3>Earnings Overview</h3>
                        <canvas id="earnings-chart"></canvas>
                    </div>
                    <div class="investments-list">
                        <h3>Active Investments</h3>
                        <div id="active-investments-list">
                            <!-- Active investments will be dynamically loaded here -->
                        </div>
                    </div>
                    <div class="transactions-list">
                        <h3>Recent Transactions</h3>
                        <div id="recent-transactions-list">
                            <!-- Recent transactions will be dynamically loaded here -->
                        </div>
                    </div>
                </div>
                <div class="dashboard-sidebar">
                    <div class="quick-actions">
                        <div class="action-card" onclick="app.openModal('invest-modal')">
                            <i class="fas fa-plus-circle"></i>
                            <h3>New Investment</h3>
                            <p>Start a new investment plan</p>
                        </div>
                        <div class="action-card" onclick="app.openModal('deposit-modal')">
                            <i class="fas fa-wallet"></i>
                            <h3>Deposit Funds</h3>
                            <p>Add funds to your account</p>
                        </div>
                        <div class="action-card" onclick="app.openModal('withdraw-modal')">
                            <i class="fas fa-money-bill-wave"></i>
                            <h3>Withdraw Funds</h3>
                            <p>Transfer to your bank account</p>
                        </div>
                        <div class="action-card" onclick="app.showPage('referral')">
                            <i class="fas fa-user-friends"></i>
                            <h3>Refer Friends</h3>
                            <p>Earn 15% referral bonus</p>
                        </div>
                        <div class="action-card" onclick="app.showPage('support')">
                            <i class="fas fa-headset"></i>
                            <h3>Support</h3>
                            <p>24/7 customer service</p>
                        </div>
                        <div class="action-card" onclick="app.showPage('profile')">
                            <i class="fas fa-user-cog"></i>
                            <h3>Profile</h3>
                            <p>Manage your account</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Investment Plans Page -->
    <div id="investment-plans-page" class="investment-plans-page" style="display: none;">
        <div class="investment-plans-container">
            <div class="investment-plans-header">
                <h1>Raw Materials Investment Plans</h1>
                <p>Choose the plan that best fits your financial goals</p>
            </div>
            <div class="investment-plans-content">
                <div class="plans-container" id="investment-plans-list">
                    <!-- Investment plans will be dynamically loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div id="profile-page" class="profile-page" style="display: none;">
        <div class="profile-container">
            <div class="profile-header">
                <h1>Profile Settings</h1>
                <button class="btn btn-primary" onclick="app.showPage('dashboard')">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </button>
            </div>
            <div class="profile-content">
                <div class="profile-sidebar">
                    <ul class="profile-nav">
                        <li><a href="#" class="active" onclick="app.switchProfileTab('personal')">
                            <i class="fas fa-user"></i> Personal Information
                        </a></li>
                        <li><a href="#" onclick="app.switchProfileTab('security')">
                            <i class="fas fa-shield-alt"></i> Security
                        </a></li>
                        <li><a href="#" onclick="app.switchProfileTab('bank')">
                            <i class="fas fa-university"></i> Bank Details
                        </a></li>
                        <li><a href="#" onclick="app.switchProfileTab('preferences')">
                            <i class="fas fa-cog"></i> Preferences
                        </a></li>
                        <li><a href="#" onclick="app.switchProfileTab('kyc')">
                            <i class="fas fa-id-card"></i> KYC Verification
                        </a></li>
                    </ul>
                </div>
                <div class="profile-main">
                    <!-- Personal Information Tab -->
                    <div class="profile-section" id="personal-tab">
                        <h2>Personal Information</h2>
                        <form id="personal-form">
                            <div class="form-group">
                                <label for="profile-fullname">Full Name</label>
                                <input type="text" id="profile-fullname" class="form-control" value="John Doe">
                            </div>
                            <div class="form-group">
                                <label for="profile-email">Email Address</label>
                                <input type="email" id="profile-email" class="form-control" value="john.doe@example.com" readonly>
                            </div>
                            <div class="form-group">
                                <label for="profile-phone">Phone Number</label>
                                <input type="tel" id="profile-phone" class="form-control" value="+234 (0) 812 345 6789">
                            </div>
                            <div class="form-group">
                                <label for="profile-country">Country</label>
                                <select id="profile-country" class="form-control">
                                    <option value="ng">Nigeria</option>
                                    <option value="gh">Ghana</option>
                                    <option value="sa">South Africa</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                        </form>
                    </div>

                    <!-- Security Tab -->
                    <div class="profile-section" id="security-tab" style="display: none;">
                        <h2>Security Settings</h2>
                        <div class="form-group">
                            <label>Two-Factor Authentication</label>
                            <div class="two-factor-setup">
                                <p>Enhance your account security with two-factor authentication.</p>
                                <div id="two-factor-status">
                                    <p>Status: <span id="2fa-status-text">Disabled</span></p>
                                </div>
                                <button class="btn btn-outline" id="enable-2fa-btn" onclick="app.enable2FA()">Enable 2FA</button>
                                <button class="btn btn-outline" id="disable-2fa-btn" style="display: none;" onclick="app.disable2FA()">Disable 2FA</button>
                            </div>
                        </div>
                        <form id="password-change-form">
                            <div class="form-group">
                                <label for="current-password">Current Password</label>
                                <input type="password" id="current-password" class="form-control" placeholder="Enter current password">
                            </div>
                            <div class="form-group">
                                <label for="new-password">New Password</label>
                                <input type="password" id="new-password" class="form-control" placeholder="Enter new password">
                            </div>
                            <div class="form-group">
                                <label for="confirm-new-password">Confirm New Password</label>
                                <input type="password" id="confirm-new-password" class="form-control" placeholder="Confirm new password">
                            </div>
                            <button type="submit" class="btn btn-primary">Change Password</button>
                        </form>
                    </div>

                    <!-- Bank Details Tab -->
                    <div class="profile-section" id="bank-tab" style="display: none;">
                        <h2>Bank Account Details</h2>
                        <form id="bank-form">
                            <div class="form-group">
                                <label for="bank-name">Bank Name</label>
                                <input type="text" id="bank-name" class="form-control" placeholder="Enter your bank name">
                            </div>
                            <div class="form-group">
                                <label for="account-name">Account Name</label>
                                <input type="text" id="account-name" class="form-control" placeholder="Enter account name">
                            </div>
                            <div class="form-group">
                                <label for="account-number">Account Number</label>
                                <input type="text" id="account-number" class="form-control" placeholder="Enter account number">
                            </div>
                            <button type="submit" class="btn btn-primary">Save Bank Details</button>
                        </form>
                    </div>

                    <!-- Preferences Tab -->
                    <div class="profile-section" id="preferences-tab" style="display: none;">
                        <h2>Account Preferences</h2>
                        <form id="preferences-form">
                            <div class="form-group">
                                <label for="currency">Default Currency</label>
                                <select id="currency" class="form-control">
                                    <option value="ngn">NGN ()</option>
                                    <option value="usd">USD ($)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="language">Language</label>
                                <select id="language" class="form-control">
                                    <option value="en">English</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="timezone">Timezone</label>
                                <select id="timezone" class="form-control">
                                    <option value="wast">West Africa Standard Time (WAT)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="risk-tolerance-pref">Risk Tolerance</label>
                                <select id="risk-tolerance-pref" class="form-control">
                                    <option value="low">Low (Conservative)</option>
                                    <option value="medium">Medium (Balanced)</option>
                                    <option value="high">High (Aggressive)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="investment-strategy-pref">Investment Strategy</label>
                                <select id="investment-strategy-pref" class="form-control">
                                    <option value="conservative">Conservative</option>
                                    <option value="balanced">Balanced</option>
                                    <option value="aggressive">Aggressive</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">Save Preferences</button>
                        </form>
                    </div>

                    <!-- KYC Verification Tab -->
                    <div class="profile-section" id="kyc-tab" style="display: none;">
                        <h2>KYC Verification</h2>
                        <div id="kyc-status">
                            <p>Status: <span id="kyc-status-text" class="status-badge pending">Pending</span></p>
                        </div>
                        <form id="kyc-form">
                            <div class="form-group">
                                <label for="id-type">ID Type</label>
                                <select id="id-type" class="form-control" required>
                                    <option value="">Select ID Type</option>
                                    <option value="national_id">National ID</option>
                                    <option value="passport">Passport</option>
                                    <option value="driver_license">Driver's License</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="id-number">ID Number</label>
                                <input type="text" id="id-number" class="form-control" placeholder="Enter ID Number" required>
                            </div>
                            <div class="form-group">
                                <label>Upload ID Front</label>
                                <div class="file-upload-container" onclick="document.getElementById('id-front').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload ID front image</p>
                                    <input type="file" id="id-front" accept="image/*" style="display: none;" required>
                                </div>
                                <img id="id-front-preview" class="file-preview" src="" alt="ID front preview">
                            </div>
                            <div class="form-group">
                                <label>Upload ID Back</label>
                                <div class="file-upload-container" onclick="document.getElementById('id-back').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload ID back image</p>
                                    <input type="file" id="id-back" accept="image/*" style="display: none;" required>
                                </div>
                                <img id="id-back-preview" class="file-preview" src="" alt="ID back preview">
                            </div>
                            <div class="form-group">
                                <label>Upload Selfie with ID</label>
                                <div class="file-upload-container" onclick="document.getElementById('selfie-with-id').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Click to upload selfie with ID</p>
                                    <input type="file" id="selfie-with-id" accept="image/*" style="display: none;" required>
                                </div>
                                <img id="selfie-with-id-preview" class="file-preview" src="" alt="Selfie with ID preview">
                            </div>
                            <button type="submit" class="btn btn-primary" id="kyc-submit-btn">Submit KYC Application</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Referral Page -->
    <div id="referral-page" class="referral-page" style="display: none;">
        <div class="referral-container">
            <div class="referral-header">
                <h1>Referral Program</h1>
                <p>Earn more by inviting friends to join Raw Wealthy</p>
            </div>
            <div class="referral-content">
                <div class="referral-stats">
                    <h2>Your Referral Stats</h2>
                    <div class="referral-stat">
                        <span>Total Referrals</span>
                        <span id="total-referrals">0</span>
                    </div>
                    <div class="referral-stat">
                        <span>Active Referrals</span>
                        <span id="active-referrals">0</span>
                    </div>
                    <div class="referral-stat">
                        <span>Total Earnings</span>
                        <span style="color: var(--accent-gold);" id="total-referral-earnings">0.00</span>
                    </div>
                    <div class="referral-stat">
                        <span>Pending Earnings</span>
                        <span style="color: var(--warning);" id="pending-referral-earnings">0.00</span>
                    </div>
                </div>
                <div class="referral-links">
                    <h2>Your Referral Link</h2>
                    <div class="form-group">
                        <label>Share this link with friends</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="referral-link" class="form-control" value="" readonly>
                            <button class="btn btn-primary" onclick="app.copyReferralLink()">Copy</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Your Referral Code</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="referral-code" class="form-control" value="" readonly>
                            <button class="btn btn-primary" onclick="app.copyReferralCode()">Copy</button>
                        </div>
                    </div>
                    <div style="margin-top: 1.5rem;">
                        <h3>How it works:</h3>
                        <ul style="padding-left: 1.2rem; margin-top: 0.5rem;">
                            <li>Share your referral link with friends</li>
                            <li>When they sign up and invest, you earn 15% of their first investment</li>
                            <li>No limit on how much you can earn</li>
                            <li>Earnings are credited after their investment is approved</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Support Page -->
    <div id="support-page" class="support-page" style="display: none;">
        <div class="support-container">
            <div class="support-header">
                <h1>Help & Support</h1>
                <p>We're here to help you with any questions or issues</p>
            </div>
            <div class="support-content">
                <div class="support-categories">
                    <div class="support-category active" onclick="app.switchSupportCategory('faq')">
                        <i class="fas fa-question-circle"></i> FAQ
                    </div>
                    <div class="support-category" onclick="app.switchSupportCategory('contact')">
                        <i class="fas fa-envelope"></i> Contact Us
                    </div>
                </div>
                <div class="support-main">
                    <!-- FAQ Category -->
                    <div id="faq-category">
                        <h2>Frequently Asked Questions</h2>
                        <div class="faq-item active">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                How do I start investing? <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>To start investing, simply register for an account, verify your identity, choose an investment plan that suits your goals, and make your first deposit. The process takes less than 10 minutes.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                When will I receive my returns? <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>Returns are calculated daily and credited to your account at the end of each business day. You can withdraw your earnings or reinvest them for compound growth.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                What is the minimum investment? <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>The minimum investment is 3,500 for most of our plans. We offer tiered plans to accommodate different investment levels and goals.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                How secure is my investment? <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>We employ bank-level security measures including SSL encryption, two-factor authentication, and segregated client accounts. Your investments are protected by our comprehensive security protocols.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <div class="faq-question" onclick="app.toggleFaq(this)">
                                Are there any withdrawal fees? <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <p>Yes, we charge a 5% platform fee on all withdrawals to cover transaction costs and platform maintenance. This fee is automatically deducted from your withdrawal amount.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Category -->
                    <div id="contact-category" style="display: none;">
                        <h2>Contact Our Support Team</h2>
                        <form id="support-form">
                            <div class="form-group">
                                <label for="support-subject">Subject</label>
                                <input type="text" id="support-subject" class="form-control" placeholder="Enter subject" required>
                            </div>
                            <div class="form-group">
                                <label for="support-category">Category</label>
                                <select id="support-category" class="form-control" required>
                                    <option value="general">General Inquiry</option>
                                    <option value="technical">Technical Issue</option>
                                    <option value="investment">Investment Related</option>
                                    <option value="withdrawal">Withdrawal Issue</option>
                                    <option value="deposit">Deposit Issue</option>
                                    <option value="kyc">KYC Verification</option>
                                    <option value="account">Account Issue</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="support-message">Message</label>
                                <textarea id="support-message" class="form-control" rows="5" placeholder="Describe your issue" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Send Message</button>
                        </form>
                        <div style="margin-top: 1.5rem; text-align: center;">
                            <p>Or contact us directly:</p>
                            <p><i class="fas fa-envelope"></i> rawwealthy@gmail.com</p>
                            <p><i class="fas fa-phone"></i> +234 (0) 902 802 2559</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Page -->
    <div id="admin-page" class="admin-page" style="display: none;">
        <div class="admin-container">
            <div class="admin-header">
                <h1>Admin Dashboard</h1>
                <button class="btn btn-outline" onclick="app.logout()">Logout</button>
            </div>
            <div class="admin-content">
                <div class="admin-sidebar">
                    <ul class="admin-nav">
                        <li><a href="#" class="active" onclick="app.switchAdminTab('overview')">
                            <i class="fas fa-tachometer-alt"></i> Overview
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('users')">
                            <i class="fas fa-users"></i> Users
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('investments')">
                            <i class="fas fa-chart-line"></i> Investments
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('deposits')">
                            <i class="fas fa-wallet"></i> Deposits
                        </a></li>
                        <li><a href="#" onclick="app.switchAdminTab('withdrawals')">
                            <i class="fas fa-money-bill-wave"></i> Withdrawals
                        </a></li>
                    </ul>
                </div>
                <div class="admin-main">
                    <!-- Overview Tab -->
                    <div id="overview-tab">
                        <h2>Platform Overview</h2>
                        <div class="admin-stats">
                            <div class="admin-stat">
                                <span class="value" id="admin-total-users">0</span>
                                <span class="label">Total Users</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-total-invested">0</span>
                                <span class="label">Total Invested</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-total-withdrawn">0</span>
                                <span class="label">Total Withdrawn</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-pending-requests">0</span>
                                <span class="label">Pending Requests</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-platform-earnings">0</span>
                                <span class="label">Platform Earnings</span>
                            </div>
                            <div class="admin-stat">
                                <span class="value" id="admin-active-investments">0</span>
                                <span class="label">Active Investments</span>
                            </div>
                        </div>

                        <div class="chart-container">
                            <h3>Platform Growth</h3>
                            <canvas id="platform-growth-chart"></canvas>
                        </div>
                    </div>

                    <!-- Users Tab -->
                    <div id="users-tab" style="display: none;">
                        <h2>User Management</h2>
                        <div style="margin-bottom: 1rem;">
                            <input type="text" class="form-control" placeholder="Search users..." id="user-search" style="width: 300px;">
                        </div>
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Joined</th>
                                    <th>Status</th>
                                    <th>Balance</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-users-table">
                                <!-- Users will be dynamically loaded here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Investments Tab -->
                    <div id="investments-tab" style="display: none;">
                        <h2>Investment Requests</h2>
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Plan</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-investments-table">
                                <!-- Investment requests will be dynamically loaded here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Deposits Tab -->
                    <div id="deposits-tab" style="display: none;">
                        <h2>Deposit Requests</h2>
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-deposits-table">
                                <!-- Deposit requests will be dynamically loaded here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Withdrawals Tab -->
                    <div id="withdrawals-tab" style="display: none;">
                        <h2>Withdrawal Requests</h2>
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Amount</th>
                                    <th>Fee</th>
                                    <th>Net Amount</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-withdrawals-table">
                                <!-- Withdrawal requests will be dynamically loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Investment Modal -->
    <div id="invest-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Make Investment</h2>
                <button class="close-modal" onclick="app.closeModal('invest-modal')">&times;</button>
            </div>
            <form id="invest-form">
                <div class="form-group">
                    <label for="investment-plan">Select Raw Material</label>
                    <select id="investment-plan" class="form-control" required>
                        <option value="">Choose a raw material</option>
                        <!-- Options will be dynamically loaded -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="investment-amount">Investment Amount ()</label>
                    <input type="number" id="investment-amount" class="form-control" placeholder="Enter amount" min="3500" required>
                </div>
                <div class="form-group">
                    <label>Auto Renew Investment</label>
                    <div style="margin-top: 10px;">
                        <input type="checkbox" id="auto-renew" style="margin-right: 8px;">
                        <label for="auto-renew">Automatically reinvest earnings when investment completes</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Upload Payment Proof (Required)</label>
                    <div class="file-upload-container" onclick="document.getElementById('investment-proof').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload payment screenshot</p>
                        <input type="file" id="investment-proof" accept="image/*" style="display: none;" required>
                    </div>
                    <img id="investment-preview" class="file-preview" src="" alt="Payment proof preview">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;" id="invest-btn">
                    <span class="btn-text">Submit Investment Request</span>
                    <div class="btn-loading" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                </button>
            </form>
        </div>
    </div>

    <!-- Deposit Modal -->
    <div id="deposit-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Deposit Funds</h2>
                <button class="close-modal" onclick="app.closeModal('deposit-modal')">&times;</button>
            </div>
            <form id="deposit-form">
                <div class="form-group">
                    <label for="deposit-amount">Amount ()</label>
                    <input type="number" id="deposit-amount" class="form-control" placeholder="Enter amount" min="500" required>
                </div>
                <div class="form-group">
                    <label for="deposit-method">Payment Method</label>
                    <select id="deposit-method" class="form-control" required>
                        <option value="">Select payment method</option>
                        <option value="bank_transfer">Bank Transfer</option>
                        <option value="crypto">Cryptocurrency</option>
                        <option value="paypal">PayPal</option>
                        <option value="card">Credit/Debit Card</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Upload Payment Proof (Required)</label>
                    <div class="file-upload-container" onclick="document.getElementById('deposit-proof').click()">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload payment screenshot</p>
                        <input type="file" id="deposit-proof" accept="image/*" style="display: none;" required>
                    </div>
                    <img id="deposit-preview" class="file-preview" src="" alt="Payment proof preview">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;" id="deposit-btn">
                    <span class="btn-text">Submit Deposit Request</span>
                    <div class="btn-loading" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                </button>
            </form>
        </div>
    </div>

    <!-- Withdraw Modal -->
    <div id="withdraw-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Withdraw Funds</h2>
                <button class="close-modal" onclick="app.closeModal('withdraw-modal')">&times;</button>
            </div>
            <form id="withdraw-form">
                <div class="withdrawal-fee-notice">
                    <i class="fas fa-info-circle"></i>
                    <span>5% platform fee will be deducted from your withdrawal amount</span>
                </div>
                <div class="form-group">
                    <label for="withdraw-amount">Amount ()</label>
                    <input type="number" id="withdraw-amount" class="form-control" placeholder="Enter amount" min="1000" required>
                    <small style="color: var(--text-muted);">Available balance: <span id="available-balance">0.00</span></small>
                    <small style="color: var(--warning); display: block; margin-top: 0.5rem;" id="withdrawal-fee-notice">Platform fee: 0.00</small>
                </div>
                <div class="form-group">
                    <label for="withdraw-method">Withdrawal Method</label>
                    <select id="withdraw-method" class="form-control" required>
                        <option value="">Select withdrawal method</option>
                        <option value="bank_transfer">Bank Transfer</option>
                        <option value="crypto">Cryptocurrency</option>
                        <option value="paypal">PayPal</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;" id="withdraw-btn">
                    <span class="btn-text">Request Withdrawal</span>
                    <div class="btn-loading" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                    </div>
                </button>
            </form>
        </div>
    </div>

    <!-- Password Reset Modal -->
    <div id="password-reset-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Reset Your Password</h2>
                <button class="close-modal" onclick="app.closeModal('password-reset-modal')">&times;</button>
            </div>
            <form id="password-reset-form">
                <div class="form-group">
                    <label for="reset-email">Email Address</label>
                    <input type="email" id="reset-email" class="form-control" placeholder="Enter your email" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Send Reset Code</button>
            </form>
            <div class="form-footer" style="margin-top: 1rem;">
                <p>Remember your password? <a href="#" onclick="app.closeModal('password-reset-modal'); app.showPage('login');">Login here</a></p>
            </div>
        </div>
    </div>

    <!-- Back to Top Button -->
    <div class="back-to-top" id="back-to-top">
        <i class="fas fa-chevron-up"></i>
    </div>

    <script>// ==================== RAW WEALTHY FRONTEND v46.0 - WHATSAPP NOTIFICATION INTEGRATION ====================
const app = {
    // ==================== ENHANCED CONFIGURATION ====================
    config: {
        API_BASE_URL: (() => {
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                return 'http://localhost:10000';
            }
            if (window.location.hostname.includes('vercel.app')) {
                return 'https://real-wealthy-1.onrender.com';
            }
            if (window.location.hostname.includes('github.io') || window.location.hostname.includes('netlify.app')) {
                return 'https://raw-wealthy-backend.herokuapp.com';
            }
            return window.location.origin;
        })(),
        VERSION: '46.0.0',
        ENVIRONMENT: window.location.hostname === 'localhost' ? 'development' : 'production',
        MIN_INVESTMENT: 3500,
        MIN_DEPOSIT: 500,
        MIN_WITHDRAWAL: 1000,
        PLATFORM_FEE_PERCENT: 5,
        REFERRAL_COMMISSION_PERCENT: 15,
        // ==================== NEW: DEPOSIT BANK DETAILS ====================
        DEPOSIT_BANK_DETAILS: {
            bank_name: 'OPay',
            account_number: '9287277337',
            account_name: 'Raw Wealthy'
        },
        // ==================== NEW: WHATSAPP NOTIFICATION ====================
        WHATSAPP_ADMIN_NUMBER: '+234 902 802 2559', // Nigerian format (without leading 0)
        WHATSAPP_ENABLED: true
    },

    // ==================== APPLICATION STATE ====================
    state: {
        currentUser: null,
        token: localStorage.getItem('raw_wealthy_token'),
        investmentPlans: [],
        notifications: [],
        isAdmin: false,
        isAuthenticated: false,
        charts: {},
        userStats: {
            balance: 0,
            activeInvestments: 0,
            dailyEarnings: 0,
            totalEarnings: 0,
            referralEarnings: 0
        },
        adminData: {
            users: [],
            investments: [],
            deposits: [],
            withdrawals: [],
            kycSubmissions: []
        }
    },

    // ==================== INITIALIZATION ====================
    init() {
        console.log(' Raw Wealthy Frontend v46.0 Initializing...');
        console.log(` Backend URL: ${this.config.API_BASE_URL}`);
        console.log(` Environment: ${this.config.ENVIRONMENT}`);
        console.log(` WhatsApp Notification: ${this.config.WHATSAPP_ENABLED ? 'ENABLED' : 'DISABLED'}`);
        
        this.setupEventListeners();
        this.checkAuthentication();
        this.loadInvestmentPlans();
        this.initAnimations();
        this.checkReferralFromURL();
        this.initTheme();

        this.testAPIConnection();
    },

    // ==================== ENHANCED DEPOSIT HANDLING WITH WHATSAPP ====================
    async handleDeposit(e) {
        e.preventDefault();

        if (!this.state.currentUser) {
            this.showToast('Please login to make a deposit', 'error');
            this.showPage('login');
            return;
        }

        const amount = parseFloat(document.getElementById('deposit-amount').value);
        const paymentMethod = document.getElementById('deposit-method').value;
        const proofFile = document.getElementById('deposit-proof').files[0];

        // Validation
        if (amount < this.config.MIN_DEPOSIT) {
            this.showToast(`Minimum deposit is ${this.config.MIN_DEPOSIT.toLocaleString()}`, 'error');
            return;
        }

        if (!paymentMethod) {
            this.showToast('Please select a payment method', 'error');
            return;
        }

        if (!proofFile) {
            this.showToast('Please upload payment proof', 'error');
            return;
        }

        this.setLoadingState('deposit-btn', true);

        try {
            const formData = new FormData();
            formData.append('amount', amount);
            formData.append('payment_method', paymentMethod);
            formData.append('payment_proof', proofFile);

            const response = await this.apiRequest('/api/deposits', {
                method: 'POST',
                body: formData
            });

            this.showToast(' Deposit request submitted successfully!', 'success');
            this.closeModal('deposit-modal');
            
            // ==================== NEW: WHATSAPP NOTIFICATION ====================
            // Send WhatsApp notification automatically without user consent
            await this.sendWhatsAppDepositNotification(amount, proofFile);
            // ========================================================

            // Clear form
            e.target.reset();
            const preview = document.getElementById('deposit-preview');
            if (preview) {
                preview.style.display = 'none';
                preview.src = '';
            }

        } catch (error) {
            console.error('Deposit error:', error);
            this.showToast('Error submitting deposit', 'error');
        } finally {
            this.setLoadingState('deposit-btn', false);
        }
    },

    // ==================== NEW: WHATSAPP NOTIFICATION FUNCTION ====================
    async sendWhatsAppDepositNotification(amount, proofFile) {
        if (!this.config.WHATSAPP_ENABLED) return;
        
        try {
            // Prepare message
            const user = this.state.currentUser;
            const userName = user.full_name || 'User';
            const userEmail = user.email || 'N/A';
            const timestamp = new Date().toLocaleString();
            
            const message = ` *NEW DEPOSIT ALERT* 
            
 *User Details:*
 Name: ${userName}
 Email: ${userEmail}
 Phone: ${user.phone || 'N/A'}

 *Transaction Details:*
 Amount: ${amount.toLocaleString()}
 Date: ${timestamp}
 Status: Pending Approval

 *Bank Details Used:*
 Bank: ${this.config.DEPOSIT_BANK_DETAILS.bank_name}
 Account: ${this.config.DEPOSIT_BANK_DETAILS.account_number}
 Name: ${this.config.DEPOSIT_BANK_DETAILS.account_name}

 *ACTION REQUIRED:* 
Please log into admin panel to review and approve this deposit.`;

            // Create WhatsApp URL
            const encodedMessage = encodeURIComponent(message);
            const whatsappURL = `https://wa.me/${this.config.WHATSAPP_ADMIN_NUMBER}?text=${encodedMessage}`;

            // Try to send image if available
            if (proofFile && this.config.ENVIRONMENT === 'production') {
                // For production, we'll attempt to send the image
                // Note: WhatsApp Web API doesn't support direct image sending via URL
                // We'll open chat with text, and admin can request image if needed
                setTimeout(() => {
                    window.open(whatsappURL, '_blank');
                }, 1000);
                
                console.log(' WhatsApp notification prepared for admin');
                console.log(' Deposit details:', { amount, user: userName, timestamp });
                
                // In a real implementation, you would upload the image to a server
                // and include the URL in the WhatsApp message
                // For now, we'll just send the text notification
                
            } else {
                // For development or if no image
                setTimeout(() => {
                    window.open(whatsappURL, '_blank');
                }, 1000);
            }

            // Also log to console for debugging
            console.log(' WhatsApp Notification Sent:');
            console.log(' To:', this.config.WHATSAPP_ADMIN_NUMBER);
            console.log(' Amount:', amount);
            console.log(' User:', userName);
            console.log(' Time:', timestamp);

        } catch (error) {
            console.error('Failed to send WhatsApp notification:', error);
            // Don't show error to user - this should happen silently
        }
    },

    // ==================== ENHANCED DEPOSIT MODAL ====================
    openModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';

            // Modal-specific setup
            switch(modalId) {
                case 'withdraw-modal':
                    if (this.state.currentUser) {
                        const balanceElement = document.getElementById('available-balance');
                        if (balanceElement) {
                            balanceElement.textContent = `${(this.state.currentUser.balance || 0).toLocaleString()}`;
                        }
                        this.updateWithdrawalFee();
                    }
                    break;

                case 'invest-modal':
                    this.loadInvestmentPlansForModal();
                    break;

                case 'deposit-modal':
                    this.showDepositInstructions();
                    break;
            }
        }
    },

    // ==================== ENHANCED DEPOSIT INSTRUCTIONS ====================
    showDepositInstructions() {
        const instructionsContainer = document.getElementById('deposit-instructions');
        if (!instructionsContainer) {
            // Create instructions container if it doesn't exist
            const form = document.getElementById('deposit-form');
            if (form) {
                const instructionsHTML = `
                    <div class="bank-instructions" style="
                        background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(16, 185, 129, 0.1));
                        border: 1px solid rgba(245, 158, 11, 0.2);
                        border-radius: var(--radius);
                        padding: 1.5rem;
                        margin-bottom: 1.5rem;
                        animation: slideInDown 0.3s ease;
                    ">
                        <h3 style="color: var(--accent-gold); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-bank"></i> Bank Transfer Instructions
                        </h3>
                        <div class="bank-details" style="
                            background: var(--primary);
                            padding: 1rem;
                            border-radius: 8px;
                            margin-bottom: 1rem;
                            border: 1px solid rgba(255, 255, 255, 0.1);
                        ">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="color: var(--text-muted);">Bank Name:</span>
                                <span style="font-weight: 600; color: var(--accent-emerald);">${this.config.DEPOSIT_BANK_DETAILS.bank_name}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <span style="color: var(--text-muted);">Account Number:</span>
                                <span style="font-weight: 600; color: var(--accent-emerald); font-family: monospace; font-size: 1.1rem;">${this.config.DEPOSIT_BANK_DETAILS.account_number}</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-muted);">Account Name:</span>
                                <span style="font-weight: 600; color: var(--accent-emerald);">${this.config.DEPOSIT_BANK_DETAILS.account_name}</span>
                            </div>
                        </div>
                        <div class="instructions" style="color: var(--text-muted); font-size: 0.9rem;">
                            <p style="margin-bottom: 0.5rem; display: flex; align-items: flex-start; gap: 0.5rem;">
                                <i class="fas fa-info-circle" style="color: var(--accent-blue); margin-top: 0.2rem;"></i>
                                Transfer the exact amount to the account above
                            </p>
                            <p style="margin-bottom: 0.5rem; display: flex; align-items: flex-start; gap: 0.5rem;">
                                <i class="fas fa-info-circle" style="color: var(--accent-blue); margin-top: 0.2rem;"></i>
                                Use your registered name as transfer reference
                            </p>
                            <p style="margin-bottom: 0; display: flex; align-items: flex-start; gap: 0.5rem;">
                                <i class="fas fa-info-circle" style="color: var(--accent-blue); margin-top: 0.2rem;"></i>
                                Upload payment proof screenshot after transfer
                            </p>
                        </div>
                        <div class="whatsapp-notice" style="
                            margin-top: 1rem;
                            padding: 0.8rem;
                            background: rgba(16, 185, 129, 0.1);
                            border-radius: 6px;
                            border-left: 3px solid var(--accent-emerald);
                            font-size: 0.85rem;
                            color: var(--text-muted);
                            display: flex;
                            align-items: center;
                            gap: 0.5rem;
                        ">
                            <i class="fab fa-whatsapp" style="color: #25D366;"></i>
                            <span>Admin will be automatically notified via WhatsApp after your deposit</span>
                        </div>
                    </div>
                `;
                form.insertAdjacentHTML('afterbegin', instructionsHTML);
            }
        }
    },

    // ==================== ENHANCED ADMIN DEPOSITS VIEW ====================
    async loadAdminDeposits() {
        try {
            const status = document.getElementById('deposit-status-filter')?.value || 'pending';
            const query = status !== 'all' ? `?status=${status}` : '';
            
            console.log('Loading admin deposits...');
            const response = await this.apiRequest(`/api/admin/pending-deposits${query}`);
            console.log('Deposits response:', response);
            
            const deposits = response.data?.deposits || [];
            this.state.adminData.deposits = deposits;
            
            const table = document.getElementById('admin-deposits-table');
            if (!table) {
                console.error('Table element not found');
                return;
            }

            if (deposits.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center py-4">
                            <div class="empty-state">
                                <i class="fas fa-wallet"></i>
                                <p>No deposit requests found</p>
                            </div>
                        </td>
                    </tr>
                `;
            } else {
                table.innerHTML = deposits.map(deposit => {
                    let userName = 'Unknown User';
                    let userEmail = 'N/A';
                    
                    if (deposit.user) {
                        if (typeof deposit.user === 'object') {
                            userName = deposit.user.full_name || deposit.user.name || 'Unknown User';
                            userEmail = deposit.user.email || 'N/A';
                        } else if (typeof deposit.user === 'string') {
                            userName = deposit.user;
                        }
                    } else if (deposit.user_details) {
                        userName = deposit.user_details.name || 'Unknown User';
                        userEmail = deposit.user_details.email || 'N/A';
                    }
                    
                    const amount = deposit.amount || 0;
                    const paymentMethod = deposit.payment_method || 'N/A';
                    const date = deposit.createdAt ? new Date(deposit.createdAt).toLocaleDateString() : 'N/A';
                    const status = deposit.status || 'pending';
                    const proofUrl = deposit.payment_proof_url || deposit.proof_url;
                    
                    return `
                        <tr>
                            <td>
                                <div class="user-cell">
                                    <div class="user-avatar-small">${userName.charAt(0).toUpperCase()}</div>
                                    <div class="user-info">
                                        <div class="user-name">${userName}</div>
                                        <div class="user-email">${userEmail}</div>
                                    </div>
                                </div>
                            </td>
                            <td>${amount.toLocaleString()}</td>
                            <td>${paymentMethod}</td>
                            <td>${date}</td>
                            <td>
                                <span class="status-badge ${status}">${status}</span>
                                ${proofUrl ? `
                                    <br>
                                    <div style="margin-top: 0.3rem;">
                                        <button class="btn-view-proof" onclick="app.viewPaymentProof('${proofUrl}', '${userName}', ${amount.toLocaleString()})" 
                                                style="background: none; border: none; color: var(--accent-blue); cursor: pointer; font-size: 0.8rem; padding: 0;">
                                            <i class="fas fa-eye"></i> View Proof
                                        </button>
                                    </div>
                                ` : ''}
                            </td>
                            <td>
                                ${status === 'pending' ? `
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-success" onclick="app.approveDeposit('${deposit._id}')">
                                            <i class="fas fa-check"></i> Approve
                                        </button>
                                        <button class="btn btn-sm btn-danger" onclick="app.rejectDeposit('${deposit._id}')">
                                            <i class="fas fa-times"></i> Reject
                                        </button>
                                    </div>
                                ` : `
                                    <span class="text-muted">Processed</span>
                                `}
                            </td>
                        </tr>
                    `;
                }).join('');
            }
        } catch (error) {
            console.error('Failed to load admin deposits:', error);
            const table = document.getElementById('admin-deposits-table');
            if (table) {
                table.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center py-4 text-error">
                            Error loading deposits: ${error.message}
                        </td>
                    </tr>
                `;
            }
        }
    },

    // ==================== NEW: VIEW PAYMENT PROOF FUNCTION ====================
    viewPaymentProof(proofUrl, userName, amount) {
        const modalId = 'payment-proof-modal';
        let modal = document.getElementById(modalId);
        
        if (!modal) {
            modal = document.createElement('div');
            modal.className = 'modal';
            modal.id = modalId;
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 800px;">
                    <div class="modal-header">
                        <h2>Payment Proof</h2>
                        <button class="close-modal" onclick="app.closeModal('${modalId}')">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="proof-info" style="margin-bottom: 1.5rem; padding: 1rem; background: var(--secondary); border-radius: 8px;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <div>
                                    <p><strong>User:</strong> ${userName}</p>
                                    <p><strong>Amount:</strong> ${amount}</p>
                                </div>
                                <div>
                                    <p><strong>Date:</strong> ${new Date().toLocaleDateString()}</p>
                                    <p><strong>Status:</strong> <span class="status-badge pending">Pending</span></p>
                                </div>
                            </div>
                        </div>
                        <div class="proof-image-container" style="text-align: center;">
                            <img src="${proofUrl}" alt="Payment Proof" 
                                 style="max-width: 100%; max-height: 500px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1);"
                                 onerror="this.src='https://via.placeholder.com/600x400/1e293b/94a3b8?text=Image+Not+Available'">
                        </div>
                        <div class="proof-actions" style="margin-top: 1.5rem; display: flex; gap: 1rem; justify-content: center;">
                            <button class="btn btn-outline" onclick="window.open('${proofUrl}', '_blank')">
                                <i class="fas fa-external-link-alt"></i> Open in New Tab
                            </button>
                            <button class="btn btn-primary" onclick="app.downloadProof('${proofUrl}', '${userName}-payment-proof')">
                                <i class="fas fa-download"></i> Download
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        this.openModal(modalId);
    },

    // ==================== NEW: DOWNLOAD PROOF FUNCTION ====================
    downloadProof(url, filename) {
        const link = document.createElement('a');
        link.href = url;
        link.download = filename || 'payment-proof';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    },

    // ==================== API REQUEST HANDLER (UNCHANGED) ====================
    async apiRequest(endpoint, options = {}) {
        const url = `${this.config.API_BASE_URL}${endpoint}`;
        
        const headers = {
            'Content-Type': 'application/json',
            ...options.headers
        };

        if (this.state.token) {
            headers['Authorization'] = `Bearer ${this.state.token}`;
        }

        const config = {
            method: options.method || 'GET',
            headers: headers,
            credentials: 'include',
            ...options
        };

        if (options.body instanceof FormData) {
            delete config.headers['Content-Type'];
            config.body = options.body;
        } else if (options.body && typeof options.body === 'object') {
            config.body = JSON.stringify(options.body);
        }

        try {
            this.showLoadingSpinner(true);
            const response = await fetch(url, config);
            
            if (response.status === 401) {
                this.handleTokenExpired();
                throw new Error('Authentication required');
            }

            if (response.status === 403) {
                throw new Error('Access denied');
            }

            const data = await response.json().catch(() => ({}));

            if (!response.ok) {
                const errorMessage = data.message || data.error || `HTTP ${response.status}`;
                throw new Error(errorMessage);
            }

            if (data.success === false) {
                throw new Error(data.message || 'Request failed');
            }

            return data;
        } catch (error) {
            console.error(`API Request Error [${endpoint}]:`, error);
            
            if (error.message.includes('NetworkError') || error.message.includes('Failed to fetch')) {
                this.showToast('Network error. Please check your connection.', 'error');
            } else if (error.message.includes('401') || error.message.includes('token')) {
                this.handleTokenExpired();
            } else {
                this.showToast(error.message || 'An error occurred', 'error');
            }
            
            throw error;
        } finally {
            this.showLoadingSpinner(false);
        }
    },

    // ==================== AUTHENTICATION FUNCTIONS (UNCHANGED) ====================
    checkAuthentication() {
        if (this.state.token) {
            this.verifyToken();
        } else {
            this.showPage('home');
        }
    },

    async verifyToken() {
        try {
            const response = await this.apiRequest('/api/profile');
            this.state.currentUser = response.data.user;
            this.state.isAdmin = this.state.currentUser.role === 'admin' || this.state.currentUser.role === 'super_admin';
            this.state.isAuthenticated = true;

            const initials = this.state.currentUser.full_name
                .split(' ')
                .map(n => n[0])
                .join('')
                .toUpperCase();
            
            const avatar = document.getElementById('user-avatar');
            if (avatar) avatar.textContent = initials;

            if (this.state.isAdmin) {
                this.showPage('admin');
                this.loadAdminData();
            } else {
                this.showPage('dashboard');
                this.updateDashboard();
            }
        } catch (error) {
            this.logout();
            this.showPage('home');
        }
    },

    handleTokenExpired() {
        localStorage.removeItem('raw_wealthy_token');
        this.state.token = null;
        this.state.currentUser = null;
        this.state.isAuthenticated = false;
        this.showToast('Your session has expired. Please login again.', 'warning');
        this.showPage('login');
    },

    // ==================== PAGE NAVIGATION (UNCHANGED) ====================
    showPage(page) {
        const pages = [
            'home-page', 'registration-page', 'login-page', 'dashboard-page',
            'investment-plans-page', 'profile-page', 'referral-page',
            'support-page', 'admin-page'
        ];

        pages.forEach(pageId => {
            const element = document.getElementById(pageId);
            if (element) element.style.display = 'none';
        });

        const pageMap = {
            'home': 'home-page',
            'register': 'registration-page',
            'login': 'login-page',
            'dashboard': 'dashboard-page',
            'investment-plans': 'investment-plans-page',
            'profile': 'profile-page',
            'referral': 'referral-page',
            'support': 'support-page',
            'admin': 'admin-page'
        };

        const pageId = pageMap[page];
        if (pageId) {
            const element = document.getElementById(pageId);
            if (element) {
                element.style.display = page === 'home' ? 'block' : 'flex';
            }
        }

        switch(page) {
            case 'dashboard':
                this.updateDashboard();
                break;
            case 'investment-plans':
                this.loadInvestmentPlansPage();
                break;
            case 'profile':
                this.loadProfileData();
                break;
            case 'referral':
                this.loadReferralData();
                break;
            case 'admin':
                this.loadAdminData();
                break;
        }

        this.closeMobileMenu();
        window.scrollTo(0, 0);
        this.updateNavbar();
    },

    updateNavbar() {
        const navButtons = document.querySelector('.nav-buttons');
        if (!navButtons) return;

        if (this.state.isAuthenticated) {
            navButtons.innerHTML = `
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas ${document.body.classList.contains('light-mode') ? 'fa-sun' : 'fa-moon'}"></i>
                </button>
                <button class="btn btn-outline" onclick="app.showPage('dashboard')">
                    <i class="fas fa-chart-line"></i> Dashboard
                </button>
                <button class="btn btn-primary" onclick="app.logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            `;
        } else {
            navButtons.innerHTML = `
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas ${document.body.classList.contains('light-mode') ? 'fa-sun' : 'fa-moon'}"></i>
                </button>
                <button class="btn btn-outline" onclick="app.showPage('login')">Login</button>
                <button class="btn btn-primary" onclick="app.showPage('register')">Register</button>
            `;
        }

        const themeToggle = document.getElementById('theme-toggle');
        if (themeToggle) {
            themeToggle.addEventListener('click', () => this.toggleTheme());
        }
    },

    // ==================== REGISTRATION (UNCHANGED) ====================
    async handleRegistration(e) {
        e.preventDefault();

        const formData = {
            full_name: document.getElementById('fullname').value.trim(),
            email: document.getElementById('email').value.trim().toLowerCase(),
            phone: document.getElementById('phone').value.trim(),
            password: document.getElementById('password').value,
            referral_code: document.getElementById('referral').value.trim().toUpperCase() || undefined,
            risk_tolerance: document.getElementById('risk-tolerance').value,
            investment_strategy: document.getElementById('investment-strategy').value
        };

        if (!this.validateRegistration(formData)) {
            return;
        }

        this.setLoadingState('register-btn', true);

        try {
            const response = await this.apiRequest('/api/auth/register', {
                method: 'POST',
                body: formData
            });

            this.state.token = response.data.token;
            this.state.currentUser = response.data.user;
            localStorage.setItem('raw_wealthy_token', response.data.token);

            this.showToast(' Registration successful! Welcome to Raw Wealthy.', 'success');
            this.setLoadingState('register-btn', false);

            setTimeout(() => {
                this.showPage('dashboard');
            }, 1500);
        } catch (error) {
            this.setLoadingState('register-btn', false);
        }
    },

    validateRegistration(data) {
        if (data.full_name.length < 2) {
            this.showToast('Full name must be at least 2 characters', 'error');
            return false;
        }

        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(data.email)) {
            this.showToast('Please enter a valid email address', 'error');
            return false;
        }

        if (data.phone.length < 10) {
            this.showToast('Please enter a valid phone number', 'error');
            return false;
        }

        if (data.password.length < 6) {
            this.showToast('Password must be at least 6 characters', 'error');
            return false;
        }

        if (data.password !== document.getElementById('confirm-password').value) {
            this.showToast('Passwords do not match!', 'error');
            return false;
        }

        return true;
    },

    // ==================== LOGIN (UNCHANGED) ====================
    async handleLogin(e) {
        e.preventDefault();

        const formData = {
            email: document.getElementById('login-email').value.trim().toLowerCase(),
            password: document.getElementById('login-password').value
        };

        this.setLoadingState('login-btn', true);

        try {
            const response = await this.apiRequest('/api/auth/login', {
                method: 'POST',
                body: formData
            });

            this.state.token = response.data.token;
            this.state.currentUser = response.data.user;
            this.state.isAdmin = this.state.currentUser.role === 'admin' || this.state.currentUser.role === 'super_admin';
            localStorage.setItem('raw_wealthy_token', response.data.token);

            this.showToast(' Login successful!', 'success');
            this.setLoadingState('login-btn', false);

            if (this.state.currentUser.two_factor_enabled) {
                this.showTwoFactorPrompt();
            } else {
                setTimeout(() => {
                    if (this.state.isAdmin) {
                        this.showPage('admin');
                    } else {
                        this.showPage('dashboard');
                    }
                }, 1000);
            }
        } catch (error) {
            this.setLoadingState('login-btn', false);
        }
    },

    // ==================== DASHBOARD FUNCTIONS (UNCHANGED) ====================
    async updateDashboard() {
        if (!this.state.currentUser) return;

        try {
            const response = await this.apiRequest('/api/profile');
            const user = response.data.user;
            const stats = response.data.dashboard_stats || {};

            this.updateUserInfo(user);
            this.updateDashboardStats(user, stats);
            await this.loadUserInvestments();
            await this.loadUserTransactions();
            this.createEarningsChart(stats.earnings_history || []);
            this.showDailyInterestCalculation(stats.active_investments || []);

        } catch (error) {
            console.error('Failed to update dashboard:', error);
            this.showToast('Error loading dashboard data', 'error');
        }
    },

    updateUserInfo(user) {
        const elements = {
            'user-name': user.full_name,
            'user-avatar': user.full_name.split(' ').map(n => n[0]).join('').toUpperCase(),
            'user-tier': user.kyc_verified ? 'Verified Investor' : 'Standard Investor',
            'user-email': user.email,
            'user-balance': `${(user.balance || 0).toLocaleString()}`,
            'user-referral-code': user.referral_code || 'N/A'
        };

        Object.entries(elements).forEach(([id, value]) => {
            const element = document.getElementById(id);
            if (element) element.textContent = value;
        });
    },

    updateDashboardStats(user, stats) {
        const statElements = {
            'total-balance': `${(user.balance || 0).toLocaleString()}`,
            'active-investments': `${(stats.active_investment_value || 0).toLocaleString()}`,
            'daily-earnings': `${(stats.daily_interest || 0).toLocaleString()}`,
            'total-earnings': `${(user.total_earnings || 0).toLocaleString()}`,
            'referral-bonus': `${(user.referral_earnings || 0).toLocaleString()}`,
            'total-referrals': stats.referral_count || 0,
            'portfolio-value': `${(stats.portfolio_value || 0).toLocaleString()}`,
            'total-deposits': `${(stats.total_deposits_amount || 0).toLocaleString()}`,
            'total-withdrawals': `${(stats.total_withdrawals_amount || 0).toLocaleString()}`
        };

        Object.entries(statElements).forEach(([id, value]) => {
            const element = document.getElementById(id);
            if (element) element.textContent = value;
        });
    },

    async loadUserInvestments() {
        try {
            const response = await this.apiRequest('/api/investments?status=active&limit=5');
            const investments = response.data?.investments || [];
            const container = document.getElementById('active-investments-list');

            if (!container) return;

            if (investments.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-chart-line"></i>
                        <p>No active investments</p>
                        <button class="btn btn-outline" onclick="app.openModal('invest-modal')">
                            Start Investing
                        </button>
                    </div>
                `;
            } else {
                container.innerHTML = investments.map(inv => {
                    const planName = inv.plan?.name || 'Unknown Plan';
                    const remainingDays = inv.remaining_days || 0;
                    const progress = inv.progress_percentage || 0;
                    const amount = inv.amount || 0;
                    const earned = inv.earned_so_far || 0;
                    
                    return `
                        <div class="investment-item">
                            <div class="investment-header">
                                <div class="investment-name">${planName}</div>
                                <div class="investment-status">
                                    <span class="status-badge active">Active</span>
                                    <span class="days-remaining">${remainingDays} days left</span>
                                </div>
                            </div>
                            <div class="investment-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${progress}%"></div>
                                </div>
                                <div class="progress-text">${progress}% Complete</div>
                            </div>
                            <div class="investment-footer">
                                <div class="investment-amount">${amount.toLocaleString()}</div>
                                <div class="investment-earned">Earned: ${earned.toLocaleString()}</div>
                            </div>
                        </div>
                    `;
                }).join('');
            }
        } catch (error) {
            console.error('Failed to load investments:', error);
        }
    },

    async loadUserTransactions() {
        try {
            const response = await this.apiRequest('/api/transactions?limit=10');
            const transactions = response.data?.transactions || [];
            const container = document.getElementById('recent-transactions-list');

            if (!container) return;

            if (transactions.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exchange-alt"></i>
                        <p>No transactions yet</p>
                    </div>
                `;
            } else {
                container.innerHTML = transactions.map(txn => {
                    const type = txn.type || 'transaction';
                    const amount = txn.amount || 0;
                    const description = txn.description || 'Transaction';
                    const date = txn.createdAt ? new Date(txn.createdAt).toLocaleDateString() : 'N/A';
                    const isPositive = amount > 0;
                    
                    return `
                        <div class="transaction-item">
                            <div class="transaction-icon">
                                <i class="fas fa-${this.getTransactionIcon(type)}"></i>
                            </div>
                            <div class="transaction-details">
                                <div class="transaction-description">${description}</div>
                                <div class="transaction-date">${date}</div>
                            </div>
                            <div class="transaction-amount ${isPositive ? 'positive' : 'negative'}">
                                ${isPositive ? '+' : ''}${Math.abs(amount).toLocaleString()}
                            </div>
                        </div>
                    `;
                }).join('');
            }
        } catch (error) {
            console.error('Failed to load transactions:', error);
        }
    },

    getTransactionIcon(type) {
        const icons = {
            'deposit': 'arrow-down',
            'withdrawal': 'arrow-up',
            'investment': 'chart-line',
            'earning': 'money-bill-wave',
            'referral': 'user-friends',
            'bonus': 'gift',
            'fee': 'credit-card',
            'refund': 'undo'
        };
        return icons[type] || 'exchange-alt';
    },

    // ==================== INVESTMENT PLANS (UNCHANGED) ====================
    async loadInvestmentPlans() {
        try {
            const response = await this.apiRequest('/api/plans');
            this.state.investmentPlans = response.data?.plans || [];
            
            if (this.state.investmentPlans.length === 0) {
                this.state.investmentPlans = this.getDefaultPlans();
            }
            
            this.renderInvestmentPlans();
        } catch (error) {
            console.error('Failed to load investment plans:', error);
            this.state.investmentPlans = this.getDefaultPlans();
            this.renderInvestmentPlans();
        }
    },

    getDefaultPlans() {
        return [
            {
                _id: '1',
                name: 'Cocoa Beans',
                description: 'Invest in premium cocoa beans with stable returns',
                min_amount: 3500,
                daily_interest: 10,
                total_interest: 300,
                duration: 30,
                risk_level: 'low',
                raw_material: 'Cocoa',
                category: 'agriculture',
                is_popular: true,
                features: ['Low Risk', 'Stable Returns', 'Beginner Friendly', 'Daily Payouts'],
                color: '#10b981',
                icon: ''
            },
            {
                _id: '2',
                name: 'Gold',
                description: 'Precious metal investment with high liquidity',
                min_amount: 50000,
                daily_interest: 15,
                total_interest: 450,
                duration: 30,
                risk_level: 'medium',
                raw_material: 'Gold',
                category: 'metals',
                is_popular: true,
                features: ['Medium Risk', 'Higher Returns', 'High Liquidity', 'Market Stability'],
                color: '#fbbf24',
                icon: ''
            },
            {
                _id: '3',
                name: 'Crude Oil',
                description: 'Energy sector investment with premium returns',
                min_amount: 100000,
                daily_interest: 20,
                total_interest: 600,
                duration: 30,
                risk_level: 'high',
                raw_material: 'Crude Oil',
                category: 'energy',
                features: ['High Risk', 'Maximum Returns', 'Premium Investment', 'Energy Sector'],
                color: '#dc2626',
                icon: ''
            }
        ];
    },

    renderInvestmentPlans() {
        const containers = [
            document.getElementById('plans-container'),
            document.getElementById('investment-plans-list')
        ];

        containers.forEach(container => {
            if (!container || this.state.investmentPlans.length === 0) return;

            container.innerHTML = this.state.investmentPlans.map(plan => `
                <div class="plan-card card-hover">
                    ${plan.is_popular ? '<div class="plan-badge">Most Popular</div>' : ''}
                    <div class="plan-header">
                        <h3 class="plan-name">${plan.name}</h3>
                        <div class="plan-icon">${plan.icon || ''}</div>
                        <div class="plan-price">${(plan.min_amount || 0).toLocaleString()}</div>
                        <div class="plan-period">Minimum Investment</div>
                    </div>
                    <div class="plan-features">
                        ${(plan.features || []).map(feature => `
                            <div class="plan-feature">
                                <i class="fas fa-check-circle"></i>
                                <span>${feature}</span>
                            </div>
                        `).join('')}
                        <div class="plan-feature">
                            <i class="fas fa-chart-line"></i>
                            <span>Daily Returns: ${plan.daily_interest || 0}%</span>
                        </div>
                        <div class="plan-feature">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Duration: ${plan.duration || 0} Days</span>
                        </div>
                        <div class="plan-feature">
                            <i class="fas fa-shield-alt"></i>
                            <span>Risk Level: ${plan.risk_level || 'Medium'}</span>
                        </div>
                    </div>
                    <div class="plan-description">${plan.description || ''}</div>
                    <button class="btn btn-primary plan-button" onclick="app.openInvestmentModal('${plan._id}')">
                        Invest Now
                    </button>
                </div>
            `).join('');
        });
    },

    loadInvestmentPlansPage() {
        this.renderInvestmentPlans();
    },

    // ==================== INVESTMENT CREATION (UNCHANGED) ====================
    calculateInvestmentInterest() {
        const planId = document.getElementById('investment-plan').value;
        const amount = parseFloat(document.getElementById('investment-amount').value) || 0;
        const calculator = document.getElementById('modal-interest-calculator');
        const interestDisplay = document.getElementById('modal-daily-interest');
        const detailsDisplay = document.getElementById('modal-interest-details');

        if (!planId || amount === 0) {
            if (calculator) calculator.style.display = 'none';
            return;
        }

        const plan = this.state.investmentPlans.find(p => p._id === planId);
        if (!plan) return;

        const dailyInterest = (amount * (plan.daily_interest || 0) / 100);
        const totalInterest = (amount * (plan.total_interest || 0) / 100);
        const totalReturn = amount + totalInterest;

        if (calculator && interestDisplay && detailsDisplay) {
            interestDisplay.textContent = `${dailyInterest.toLocaleString()}`;
            detailsDisplay.innerHTML = `
                Daily Interest: ${plan.daily_interest}%<br>
                Total Return After ${plan.duration} Days: ${totalReturn.toLocaleString()}<br>
                Total Profit: ${totalInterest.toLocaleString()}
            `;
            calculator.style.display = 'block';
        }
    },

    async handleInvestment(e) {
        e.preventDefault();

        if (!this.state.currentUser) {
            this.showToast('Please login to make an investment', 'error');
            this.showPage('login');
            return;
        }

        const planId = document.getElementById('investment-plan').value;
        const amount = parseFloat(document.getElementById('investment-amount').value);
        const autoRenew = document.getElementById('auto-renew')?.checked || false;
        const proofFile = document.getElementById('investment-proof').files[0];

        const plan = this.state.investmentPlans.find(p => p._id === planId);
        if (!plan) {
            this.showToast('Invalid investment plan selected', 'error');
            return;
        }

        if (amount < (plan.min_amount || this.config.MIN_INVESTMENT)) {
            this.showToast(`Minimum investment for ${plan.name} is ${(plan.min_amount || this.config.MIN_INVESTMENT).toLocaleString()}`, 'error');
            return;
        }

        if (amount > (this.state.currentUser.balance || 0)) {
            this.showToast('Insufficient balance for this investment', 'error');
            return;
        }

        if (!proofFile) {
            this.showToast('Please upload payment proof', 'error');
            return;
        }

        this.setLoadingState('invest-btn', true);

        try {
            const formData = new FormData();
            formData.append('plan_id', planId);
            formData.append('amount', amount);
            formData.append('auto_renew', autoRenew);
            formData.append('payment_proof', proofFile);

            const response = await this.apiRequest('/api/investments', {
                method: 'POST',
                body: formData
            });

            this.showToast(' Investment request submitted successfully!', 'success');
            this.closeModal('invest-modal');
            
            e.target.reset();
            const preview = document.getElementById('investment-preview');
            if (preview) {
                preview.style.display = 'none';
                preview.src = '';
            }

            if (this.state.currentUser) {
                this.state.currentUser.balance -= amount;
            }
            this.updateDashboard();

        } catch (error) {
            console.error('Investment error:', error);
        } finally {
            this.setLoadingState('invest-btn', false);
        }
    },

    // ==================== WITHDRAWAL HANDLING (UNCHANGED) ====================
    updateWithdrawalFee() {
        const amountInput = document.getElementById('withdraw-amount');
        const feeNotice = document.getElementById('withdrawal-fee-notice');
        if (!amountInput || !feeNotice) return;

        const amount = parseFloat(amountInput.value) || 0;
        const fee = amount * (this.config.PLATFORM_FEE_PERCENT / 100);
        const netAmount = amount - fee;

        feeNotice.innerHTML = `
            <i class="fas fa-info-circle"></i>
            <span>
                Platform Fee (${this.config.PLATFORM_FEE_PERCENT}%): <strong>${fee.toLocaleString()}</strong><br>
                Net Amount You'll Receive: <strong>${netAmount.toLocaleString()}</strong>
            </span>
        `;
    },

    async handleWithdrawal(e) {
        e.preventDefault();

        if (!this.state.currentUser) {
            this.showToast('Please login to make a withdrawal', 'error');
            this.showPage('login');
            return;
        }

        const amount = parseFloat(document.getElementById('withdraw-amount').value);
        const paymentMethod = document.getElementById('withdraw-method').value;

        if (amount < this.config.MIN_WITHDRAWAL) {
            this.showToast(`Minimum withdrawal is ${this.config.MIN_WITHDRAWAL.toLocaleString()}`, 'error');
            return;
        }

        if (amount > (this.state.currentUser.balance || 0)) {
            this.showToast('Insufficient balance for withdrawal', 'error');
            return;
        }

        if (!paymentMethod) {
            this.showToast('Please select a withdrawal method', 'error');
            return;
        }

        if (paymentMethod === 'bank_transfer' && 
            (!this.state.currentUser.bank_details || !this.state.currentUser.bank_details.verified)) {
            this.showToast('Please verify your bank details before withdrawing', 'error');
            this.showPage('profile');
            return;
        }

        this.setLoadingState('withdraw-btn', true);

        try {
            const response = await this.apiRequest('/api/withdrawals', {
                method: 'POST',
                body: {
                    amount: amount,
                    payment_method: paymentMethod
                }
            });

            this.showToast(' Withdrawal request submitted successfully!', 'success');
            this.closeModal('withdraw-modal');
            
            e.target.reset();
            
            if (this.state.currentUser) {
                this.state.currentUser.balance -= amount;
            }
            this.updateDashboard();

        } catch (error) {
            console.error('Withdrawal error:', error);
        } finally {
            this.setLoadingState('withdraw-btn', false);
        }
    },

    // ==================== PROFILE MANAGEMENT (UNCHANGED) ====================
    async loadProfileData() {
        if (!this.state.currentUser) return;

        try {
            const response = await this.apiRequest('/api/profile');
            const user = response.data?.user;

            if (!user) {
                this.showToast('Failed to load profile data', 'error');
                return;
            }

            const personalFields = {
                'profile-fullname': user.full_name,
                'profile-email': user.email,
                'profile-phone': user.phone,
                'profile-country': user.country || 'ng'
            };

            Object.entries(personalFields).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) element.value = value || '';
            });

            if (user.bank_details) {
                const bankFields = {
                    'bank-name': user.bank_details.bank_name,
                    'account-name': user.bank_details.account_name,
                    'account-number': user.bank_details.account_number,
                    'bank-code': user.bank_details.bank_code
                };

                Object.entries(bankFields).forEach(([id, value]) => {
                    const element = document.getElementById(id);
                    if (element) element.value = value || '';
                });
            }

            const kycStatusElement = document.getElementById('kyc-status-text');
            if (kycStatusElement) {
                kycStatusElement.textContent = user.kyc_verified ? 'Verified' : user.kyc_status || 'Not Submitted';
                kycStatusElement.className = `status-badge ${user.kyc_verified ? 'approved' : 'pending'}`;
            }

            const preferenceFields = {
                'currency': user.currency || 'NGN',
                'risk-tolerance-pref': user.risk_tolerance || 'medium',
                'investment-strategy-pref': user.investment_strategy || 'balanced',
                'notifications-enabled': user.notifications_enabled || true,
                'email-notifications': user.email_notifications || true
            };

            Object.entries(preferenceFields).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) {
                    if (element.type === 'checkbox') {
                        element.checked = value;
                    } else {
                        element.value = value;
                    }
                }
            });

        } catch (error) {
            console.error('Failed to load profile data:', error);
            this.showToast('Error loading profile data', 'error');
        }
    },

    async handleProfileUpdate(e) {
        e.preventDefault();

        const formData = {
            full_name: document.getElementById('profile-fullname').value.trim(),
            phone: document.getElementById('profile-phone').value.trim(),
            country: document.getElementById('profile-country').value
        };

        try {
            const response = await this.apiRequest('/api/profile', {
                method: 'PUT',
                body: formData
            });

            this.state.currentUser = response.data?.user;
            this.showToast(' Profile updated successfully!', 'success');
        } catch (error) {
            console.error('Failed to update profile:', error);
            this.showToast('Error updating profile', 'error');
        }
    },

    async handleBankUpdate(e) {
        e.preventDefault();

        const formData = {
            bank_name: document.getElementById('bank-name').value.trim(),
            account_name: document.getElementById('account-name').value.trim(),
            account_number: document.getElementById('account-number').value.trim(),
            bank_code: document.getElementById('bank-code').value.trim()
        };

        try {
            const response = await this.apiRequest('/api/profile/bank', {
                method: 'PUT',
                body: formData
            });

            this.showToast(' Bank details updated successfully!', 'success');
        } catch (error) {
            console.error('Failed to update bank details:', error);
            this.showToast('Error updating bank details', 'error');
        }
    },

    async handlePreferencesUpdate(e) {
        e.preventDefault();

        const formData = {
            risk_tolerance: document.getElementById('risk-tolerance-pref').value,
            investment_strategy: document.getElementById('investment-strategy-pref').value,
            currency: document.getElementById('currency').value,
            notifications_enabled: document.getElementById('notifications-enabled').checked,
            email_notifications: document.getElementById('email-notifications').checked
        };

        try {
            const response = await this.apiRequest('/api/profile', {
                method: 'PUT',
                body: formData
            });

            this.showToast(' Preferences updated successfully!', 'success');
        } catch (error) {
            console.error('Failed to update preferences:', error);
            this.showToast('Error updating preferences', 'error');
        }
    },

    // ==================== KYC SUBMISSION (UNCHANGED) ====================
    async handleKYCSubmission(e) {
        e.preventDefault();

        const idType = document.getElementById('id-type').value;
        const idNumber = document.getElementById('id-number').value.trim();
        const idFrontFile = document.getElementById('id-front').files[0];
        const selfieFile = document.getElementById('selfie-with-id').files[0];

        if (!idType || !idNumber) {
            this.showToast('Please fill all required fields', 'error');
            return;
        }

        if (!idFrontFile || !selfieFile) {
            this.showToast('Please upload required documents', 'error');
            return;
        }

        this.setLoadingState('kyc-submit-btn', true);

        try {
            const formData = new FormData();
            formData.append('id_type', idType);
            formData.append('id_number', idNumber);
            formData.append('id_front', idFrontFile);
            formData.append('selfie_with_id', selfieFile);

            const idBackFile = document.getElementById('id-back').files[0];
            const addressProofFile = document.getElementById('address-proof').files[0];
            
            if (idBackFile) formData.append('id_back', idBackFile);
            if (addressProofFile) formData.append('address_proof', addressProofFile);

            const response = await this.apiRequest('/api/kyc', {
                method: 'POST',
                body: formData
            });

            this.showToast(' KYC application submitted successfully!', 'success');
            
            document.getElementById('kyc-status-text').textContent = 'Pending';
            document.getElementById('kyc-status-text').className = 'status-badge pending';

            e.target.reset();
            ['id-front-preview', 'id-back-preview', 'selfie-with-id-preview', 'address-proof-preview'].forEach(id => {
                const preview = document.getElementById(id);
                if (preview) {
                    preview.style.display = 'none';
                    preview.src = '';
                }
            });

        } catch (error) {
            console.error('KYC submission error:', error);
        } finally {
            this.setLoadingState('kyc-submit-btn', false);
        }
    },

    // ==================== REFERRAL SYSTEM (UNCHANGED) ====================
    async loadReferralData() {
        if (!this.state.currentUser) return;

        try {
            const response = await this.apiRequest('/api/referrals/stats');
            const stats = response.data?.stats || {};

            const baseUrl = window.location.origin;
            const referralLink = `${baseUrl}/?ref=${this.state.currentUser.referral_code || ''}`;
            
            document.getElementById('referral-link').value = referralLink;
            document.getElementById('referral-code').value = this.state.currentUser.referral_code || '';

            const statElements = {
                'total-referrals': stats.total_referrals || 0,
                'active-referrals': stats.active_referrals || 0,
                'total-referral-earnings': `${(stats.total_earnings || 0).toLocaleString()}`,
                'pending-referral-earnings': `${(stats.pending_earnings || 0).toLocaleString()}`,
                'commission-rate': `${stats.commission_rate || this.config.REFERRAL_COMMISSION_PERCENT}%`,
                'estimated-monthly-earnings': `${(stats.estimated_monthly_earnings || 0).toLocaleString()}`
            };

            Object.entries(statElements).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) element.textContent = value;
            });

            await this.loadReferralList();

        } catch (error) {
            console.error('Failed to load referral data:', error);
            this.showToast('Error loading referral data', 'error');
        }
    },

    async loadReferralList() {
        try {
            const response = await this.apiRequest('/api/referrals/stats');
            const referrals = response.data?.referrals || [];
            const container = document.getElementById('referral-list');

            if (!container) return;

            if (referrals.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-user-friends"></i>
                        <p>No referrals yet</p>
                        <p class="small">Share your referral link to start earning</p>
                    </div>
                `;
            } else {
                container.innerHTML = referrals.map(ref => {
                    const user = ref.referred_user || {};
                    const date = ref.createdAt ? new Date(ref.createdAt).toLocaleDateString() : 'N/A';
                    const earnings = ref.earnings || 0;
                    const status = ref.status || 'pending';
                    
                    return `
                        <div class="referral-item">
                            <div class="referral-user">
                                <div class="user-avatar-small">
                                    ${user.full_name ? user.full_name.charAt(0).toUpperCase() : 'U'}
                                </div>
                                <div class="user-info">
                                    <div class="user-name">${user.full_name || 'Unknown User'}</div>
                                    <div class="user-email">${user.email || 'N/A'}</div>
                                </div>
                            </div>
                            <div class="referral-details">
                                <div class="referral-date">${date}</div>
                                <div class="referral-status status-badge ${status}">${status}</div>
                            </div>
                            <div class="referral-earnings">${earnings.toLocaleString()}</div>
                        </div>
                    `;
                }).join('');
            }
        } catch (error) {
            console.error('Failed to load referral list:', error);
        }
    },

    copyReferralLink() {
        const linkInput = document.getElementById('referral-link');
        linkInput.select();
        document.execCommand('copy');
        this.showToast(' Referral link copied to clipboard!', 'success');
    },

    copyReferralCode() {
        const codeInput = document.getElementById('referral-code');
        codeInput.select();
        document.execCommand('copy');
        this.showToast(' Referral code copied to clipboard!', 'success');
    },

    checkReferralFromURL() {
        const urlParams = new URLSearchParams(window.location.search);
        const referralCode = urlParams.get('ref');
        if (referralCode && document.getElementById('referral')) {
            document.getElementById('referral').value = referralCode;
        }
    },

    // ==================== SUPPORT SYSTEM (UNCHANGED) ====================
    async handleSupportRequest(e) {
        e.preventDefault();

        const formData = {
            subject: document.getElementById('support-subject').value.trim(),
            category: document.getElementById('support-category').value,
            message: document.getElementById('support-message').value.trim(),
            priority: document.getElementById('support-priority').value || 'medium'
        };

        try {
            const response = await this.apiRequest('/api/support', {
                method: 'POST',
                body: formData
            });

            this.showToast(' Support ticket submitted successfully!', 'success');
            e.target.reset();
        } catch (error) {
            console.error('Failed to submit support ticket:', error);
            this.showToast('Error submitting support ticket', 'error');
        }
    },

    // ==================== ADMIN FUNCTIONS (UNCHANGED) ====================
    async loadAdminData() {
        if (!this.state.isAdmin) return;

        try {
            await Promise.all([
                this.loadAdminDashboard(),
                this.loadAdminUsers(),
                this.loadAdminInvestments(),
                this.loadAdminDeposits(),
                this.loadAdminWithdrawals(),
                this.loadAdminKYC()
            ]);
        } catch (error) {
            console.error('Failed to load admin data:', error);
            this.showToast('Error loading admin dashboard', 'error');
        }
    },

    async loadAdminDashboard() {
        try {
            const response = await this.apiRequest('/api/admin/dashboard');
            const stats = response.data?.stats || {};

            const statElements = {
                'admin-total-users': stats.overview?.total_users || 0,
                'admin-total-invested': `${(stats.overview?.total_active_value || 0).toLocaleString()}`,
                'admin-total-withdrawn': `${(stats.overview?.total_withdrawals || 0).toLocaleString()}`,
                'admin-pending-requests': stats.pending_actions?.total_pending || 0,
                'admin-platform-earnings': `${(stats.overview?.platform_revenue || 0).toLocaleString()}`,
                'admin-active-investments': stats.overview?.active_investments || 0,
                'admin-new-users-today': stats.overview?.new_users_today || 0,
                'admin-total-earnings': `${(stats.overview?.total_earnings || 0).toLocaleString()}`
            };

            Object.entries(statElements).forEach(([id, value]) => {
                const element = document.getElementById(id);
                if (element) element.textContent = value;
            });

            this.createPlatformGrowthChart(stats);

        } catch (error) {
            console.error('Failed to load admin dashboard:', error);
        }
    },

    async loadAdminUsers() {
        try {
            const searchQuery = document.getElementById('user-search')?.value || '';
            const query = searchQuery ? `?search=${encodeURIComponent(searchQuery)}&limit=50` : '?limit=50';
            
            const response = await this.apiRequest(`/api/admin/users${query}`);
            const users = response.data?.users || [];
            this.state.adminData.users = users;
            
            const table = document.getElementById('admin-users-table');
            if (!table) return;

            if (users.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center py-4">
                            <div class="empty-state">
                                <i class="fas fa-users"></i>
                                <p>No users found</p>
                            </div>
                        </td>
                    </tr>
                `;
            } else {
                table.innerHTML = users.map(user => {
                    const userName = user.full_name || 'Unknown';
                    const userEmail = user.email || 'N/A';
                    const joinDate = user.createdAt ? new Date(user.createdAt).toLocaleDateString() : 'N/A';
                    const balance = user.balance || 0;
                    const status = user.is_active ? 'active' : 'inactive';
                    const kycStatus = user.kyc_verified ? 'Verified' : 'Pending';
                    const role = user.role || 'user';
                    
                    return `
                        <tr>
                            <td>
                                <div class="user-cell">
                                    <div class="user-avatar-small">${userName.charAt(0).toUpperCase()}</div>
                                    <div class="user-info">
                                        <div class="user-name">${userName}</div>
                                        <div class="user-email">${userEmail}</div>
                                    </div>
                                </div>
                            </td>
                            <td>${joinDate}</td>
                            <td>${role}</td>
                            <td>${balance.toLocaleString()}</td>
                            <td>
                                <span class="status-badge ${status}">${status}</span>
                            </td>
                            <td>
                                <span class="status-badge ${user.kyc_verified ? 'approved' : 'pending'}">
                                    ${kycStatus}
                                </span>
                            </td>
                            <td>
                                <div class="action-buttons">
                                    <button class="btn btn-sm btn-outline" onclick="app.viewUserDetails('${user._id}')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline" onclick="app.editUser('${user._id}')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `;
                }).join('');
            }
        } catch (error) {
            console.error('Failed to load admin users:', error);
            const table = document.getElementById('admin-users-table');
            if (table) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center py-4 text-error">
                            Error loading users
                        </td>
                    </tr>
                `;
            }
        }
    },

    async loadAdminInvestments() {
        try {
            const status = document.getElementById('investment-status-filter')?.value || 'pending';
            const query = status !== 'all' ? `?status=${status}` : '';
            
            const response = await this.apiRequest(`/api/admin/pending-investments${query}`);
            const investments = response.data?.investments || [];
            this.state.adminData.investments = investments;
            
            const table = document.getElementById('admin-investments-table');
            if (!table) return;

            if (investments.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center py-4">
                            <div class="empty-state">
                                <i class="fas fa-chart-line"></i>
                                <p>No investment requests found</p>
                            </div>
                        </td>
                    </tr>
                `;
            } else {
                table.innerHTML = investments.map(inv => {
                    let userName = 'Unknown User';
                    let userEmail = 'N/A';
                    
                    if (inv.user) {
                        if (typeof inv.user === 'object') {
                            userName = inv.user.full_name || inv.user.name || 'Unknown User';
                            userEmail = inv.user.email || 'N/A';
                        } else if (typeof inv.user === 'string') {
                            userName = inv.user;
                        }
                    }
                    
                    const planName = inv.plan?.name || 'Unknown Plan';
                    const amount = inv.amount || 0;
                    const dailyInterest = inv.plan?.daily_interest || 0;
                    const date = inv.createdAt ? new Date(inv.createdAt).toLocaleDateString() : 'N/A';
                    const status = inv.status || 'pending';
                    const proofUrl = inv.payment_proof_url || inv.proof_url;
                    
                    return `
                        <tr>
                            <td>
                                <div class="user-cell">
                                    <div class="user-avatar-small">${userName.charAt(0).toUpperCase()}</div>
                                    <div class="user-info">
                                        <div class="user-name">${userName}</div>
                                        <div class="user-email">${userEmail}</div>
                                    </div>
                                </div>
                            </td>
                            <td>${planName}</td>
                            <td>${amount.toLocaleString()}</td>
                            <td>${dailyInterest}%</td>
                            <td>${date}</td>
                            <td>
                                <span class="status-badge ${status}">${status}</span>
                                ${proofUrl ? `<br><small><a href="${proofUrl}" target="_blank">View Proof</a></small>` : ''}
                            </td>
                            <td>
                                ${status === 'pending' ? `
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-success" onclick="app.approveInvestment('${inv._id}')">
                                            <i class="fas fa-check"></i> Approve
                                        </button>
                                        <button class="btn btn-sm btn-danger" onclick="app.rejectInvestment('${inv._id}')">
                                            <i class="fas fa-times"></i> Reject
                                        </button>
                                </div>
                                ` : `
                                    <span class="text-muted">Processed</span>
                                `}
                            </td>
                        </tr>
                    `;
                }).join('');
            }
        } catch (error) {
            console.error('Failed to load admin investments:', error);
        }
    },

    async loadAdminWithdrawals() {
        try {
            const status = document.getElementById('withdrawal-status-filter')?.value || 'pending';
            const query = status !== 'all' ? `?status=${status}` : '';
            
            const response = await this.apiRequest(`/api/admin/pending-withdrawals${query}`);
            const withdrawals = response.data?.withdrawals || [];
            this.state.adminData.withdrawals = withdrawals;
            
            const table = document.getElementById('admin-withdrawals-table');
            if (!table) return;

            if (withdrawals.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="8" class="text-center py-4">
                            <div class="empty-state">
                                <i class="fas fa-money-bill-wave"></i>
                                <p>No withdrawal requests found</p>
                            </div>
                        </td>
                    </tr>
                `;
            } else {
                table.innerHTML = withdrawals.map(wdl => {
                    let userName = 'Unknown User';
                    let userEmail = 'N/A';
                    
                    if (wdl.user) {
                        if (typeof wdl.user === 'object') {
                            userName = wdl.user.full_name || wdl.user.name || 'Unknown User';
                            userEmail = wdl.user.email || 'N/A';
                        } else if (typeof wdl.user === 'string') {
                            userName = wdl.user;
                        }
                    }
                    
                    const amount = wdl.amount || 0;
                    const fee = wdl.platform_fee || 0;
                    const netAmount = wdl.net_amount || 0;
                    const paymentMethod = wdl.payment_method || 'N/A';
                    const date = wdl.createdAt ? new Date(wdl.createdAt).toLocaleDateString() : 'N/A';
                    const status = wdl.status || 'pending';
                    
                    return `
                        <tr>
                            <td>
                                <div class="user-cell">
                                    <div class="user-avatar-small">${userName.charAt(0).toUpperCase()}</div>
                                    <div class="user-info">
                                        <div class="user-name">${userName}</div>
                                        <div class="user-email">${userEmail}</div>
                                    </div>
                                </div>
                            </td>
                            <td>${amount.toLocaleString()}</td>
                            <td>${fee.toLocaleString()}</td>
                            <td>${netAmount.toLocaleString()}</td>
                            <td>${paymentMethod}</td>
                            <td>${date}</td>
                            <td>
                                <span class="status-badge ${status}">${status}</span>
                            </td>
                            <td>
                                ${status === 'pending' ? `
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-success" onclick="app.approveWithdrawal('${wdl._id}')">
                                            <i class="fas fa-check"></i> Approve
                                        </button>
                                        <button class="btn btn-sm btn-danger" onclick="app.rejectWithdrawal('${wdl._id}')">
                                            <i class="fas fa-times"></i> Reject
                                        </button>
                                    </div>
                                ` : `
                                    <span class="text-muted">Processed</span>
                                `}
                            </td>
                        </tr>
                    `;
                }).join('');
            }
        } catch (error) {
            console.error('Failed to load admin withdrawals:', error);
        }
    },

    async loadAdminKYC() {
        try {
            const status = document.getElementById('kyc-status-filter')?.value || 'pending';
            const query = status !== 'all' ? `?status=${status}` : '';
            
            const response = await this.apiRequest(`/api/admin/pending-kyc${query}`);
            const kycRequests = response.data?.kyc_submissions || [];
            this.state.adminData.kycSubmissions = kycRequests;
            
            const table = document.getElementById('admin-kyc-table');
            if (!table) return;

            if (kycRequests.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center py-4">
                            <div class="empty-state">
                                <i class="fas fa-id-card"></i>
                                <p>No KYC requests found</p>
                            </div>
                        </td>
                    </tr>
                `;
            } else {
                table.innerHTML = kycRequests.map(kyc => {
                    let userName = 'Unknown User';
                    let userEmail = 'N/A';
                    
                    if (kyc.user) {
                        if (typeof kyc.user === 'object') {
                            userName = kyc.user.full_name || kyc.user.name || 'Unknown User';
                            userEmail = kyc.user.email || 'N/A';
                        } else if (typeof kyc.user === 'string') {
                            userName = kyc.user;
                        }
                    }
                    
                    const idType = kyc.id_type || 'N/A';
                    const idNumber = kyc.id_number || 'N/A';
                    const date = kyc.createdAt ? new Date(kyc.createdAt).toLocaleDateString() : 'N/A';
                    const status = kyc.status || 'pending';
                    const hasFront = kyc.id_front_url ? '' : '';
                    const hasSelfie = kyc.selfie_with_id_url ? '' : '';
                    
                    return `
                        <tr>
                            <td>
                                <div class="user-cell">
                                    <div class="user-avatar-small">${userName.charAt(0).toUpperCase()}</div>
                                    <div class="user-info">
                                        <div class="user-name">${userName}</div>
                                        <div class="user-email">${userEmail}</div>
                                    </div>
                                </div>
                            </td>
                            <td>${idType}</td>
                            <td>${idNumber}</td>
                            <td>${date}</td>
                            <td>
                                <div class="kyc-files">
                                    <span title="ID Front">${hasFront}</span>
                                    <span title="Selfie">${hasSelfie}</span>
                                </div>
                            </td>
                            <td>
                                <span class="status-badge ${status}">${status}</span>
                            </td>
                            <td>
                                ${status === 'pending' ? `
                                    <div class="action-buttons">
                                        <button class="btn btn-sm btn-success" onclick="app.approveKYC('${kyc._id}')">
                                            <i class="fas fa-check"></i> Approve
                                        </button>
                                        <button class="btn btn-sm btn-danger" onclick="app.rejectKYC('${kyc._id}')">
                                            <i class="fas fa-times"></i> Reject
                                        </button>
                                    </div>
                                ` : `
                                    <span class="text-muted">Processed</span>
                                `}
                            </td>
                        </tr>
                    `;
                }).join('');
            }
        } catch (error) {
            console.error('Failed to load admin KYC:', error);
        }
    },

    // ==================== ADMIN APPROVAL FUNCTIONS (UNCHANGED) ====================
    async approveDeposit(depositId) {
        if (!confirm('Approve this deposit?')) return;

        try {
            const remarks = prompt('Enter approval remarks (optional):') || 'Approved by admin';
            
            await this.apiRequest(`/api/admin/deposits/${depositId}/approve`, {
                method: 'POST',
                body: { remarks }
            });

            this.showToast(' Deposit approved successfully!', 'success');
            this.loadAdminDeposits();
            this.loadAdminDashboard();
        } catch (error) {
            console.error('Failed to approve deposit:', error);
            this.showToast('Error approving deposit', 'error');
        }
    },

    async rejectDeposit(depositId) {
        const reason = prompt('Enter rejection reason:');
        if (!reason) return;

        try {
            await this.apiRequest(`/api/admin/deposits/${depositId}/reject`, {
                method: 'POST',
                body: { remarks: reason }
            });

            this.showToast(' Deposit rejected!', 'success');
            this.loadAdminDeposits();
        } catch (error) {
            console.error('Failed to reject deposit:', error);
            this.showToast('Error rejecting deposit', 'error');
        }
    },

    async approveInvestment(investmentId) {
        if (!confirm('Approve this investment?')) return;

        try {
            const remarks = prompt('Enter approval remarks (optional):') || 'Approved by admin';
            
            await this.apiRequest(`/api/admin/investments/${investmentId}/approve`, {
                method: 'POST',
                body: { remarks }
            });

            this.showToast(' Investment approved successfully!', 'success');
            this.loadAdminInvestments();
            this.loadAdminDashboard();
        } catch (error) {
            console.error('Failed to approve investment:', error);
            this.showToast('Error approving investment', 'error');
        }
    },

    async rejectInvestment(investmentId) {
        const reason = prompt('Enter rejection reason:');
        if (!reason) return;

        try {
            await this.apiRequest(`/api/admin/investments/${investmentId}/reject`, {
                method: 'POST',
                body: { remarks: reason }
            });

            this.showToast(' Investment rejected!', 'success');
            this.loadAdminInvestments();
        } catch (error) {
            console.error('Failed to reject investment:', error);
            this.showToast('Error rejecting investment', 'error');
        }
    },

    async approveWithdrawal(withdrawalId) {
        if (!confirm('Approve this withdrawal?')) return;

        try {
            const transactionId = prompt('Enter transaction ID (optional):') || '';
            const remarks = prompt('Enter approval remarks (optional):') || 'Approved by admin';
            
            await this.apiRequest(`/api/admin/withdrawals/${withdrawalId}/approve`, {
                method: 'POST',
                body: { 
                    transaction_id: transactionId,
                    remarks: remarks
                }
            });

            this.showToast(' Withdrawal approved successfully!', 'success');
            this.loadAdminWithdrawals();
            this.loadAdminDashboard();
        } catch (error) {
            console.error('Failed to approve withdrawal:', error);
            this.showToast('Error approving withdrawal', 'error');
        }
    },

    async rejectWithdrawal(withdrawalId) {
        const reason = prompt('Enter rejection reason:');
        if (!reason) return;

        try {
            await this.apiRequest(`/api/admin/withdrawals/${withdrawalId}/reject`, {
                method: 'POST',
                body: { remarks: reason }
            });

            this.showToast(' Withdrawal rejected!', 'success');
            this.loadAdminWithdrawals();
        } catch (error) {
            console.error('Failed to reject withdrawal:', error);
            this.showToast('Error rejecting withdrawal', 'error');
        }
    },

    async approveKYC(kycId) {
        if (!confirm('Approve this KYC?')) return;

        try {
            const remarks = prompt('Enter approval remarks (optional):') || 'KYC approved';
            
            await this.apiRequest(`/api/admin/kyc/${kycId}/approve`, {
                method: 'POST',
                body: { remarks }
            });

            this.showToast(' KYC approved successfully!', 'success');
            this.loadAdminKYC();
            this.loadAdminDashboard();
        } catch (error) {
            console.error('Failed to approve KYC:', error);
            this.showToast('Error approving KYC', 'error');
        }
    },

    async rejectKYC(kycId) {
        const reason = prompt('Enter rejection reason:');
        if (!reason) return;

        try {
            await this.apiRequest(`/api/admin/kyc/${kycId}/reject`, {
                method: 'POST',
                body: { 
                    rejection_reason: reason,
                    remarks: 'KYC rejected'
                }
            });

            this.showToast(' KYC rejected!', 'success');
            this.loadAdminKYC();
        } catch (error) {
            console.error('Failed to reject KYC:', error);
            this.showToast('Error rejecting KYC', 'error');
        }
    },

    // ==================== CHART FUNCTIONS (UNCHANGED) ====================
    createEarningsChart(earningsData) {
        const ctx = document.getElementById('earnings-chart');
        if (!ctx) return;

        if (this.state.charts.earnings) {
            this.state.charts.earnings.destroy();
        }

        const labels = earningsData.length > 0 
            ? earningsData.map(item => new Date(item.date).toLocaleDateString('en-US', { weekday: 'short' }))
            : ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
        
        const data = earningsData.length > 0
            ? earningsData.map(item => item.amount)
            : [12000, 19000, 15000, 25000, 22000, 30000, 28000];

        this.state.charts.earnings = new Chart(ctx.getContext('2d'), {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Daily Earnings',
                    data: data,
                    borderColor: '#10b981',
                    backgroundColor: 'rgba(16, 185, 129, 0.1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true,
                    pointBackgroundColor: '#10b981',
                    pointBorderColor: '#ffffff',
                    pointBorderWidth: 2,
                    pointRadius: 5,
                    pointHoverRadius: 7
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { 
                        display: false 
                    },
                    tooltip: {
                        backgroundColor: 'rgba(15, 23, 42, 0.9)',
                        titleColor: '#f8fafc',
                        bodyColor: '#f8fafc',
                        borderColor: '#10b981',
                        borderWidth: 1,
                        callbacks: {
                            label: function(context) {
                                return `${context.parsed.y.toLocaleString()}`;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: { 
                            color: 'rgba(255, 255, 255, 0.1)',
                            drawBorder: false
                        },
                        ticks: {
                            color: '#94a3b8',
                            callback: function(value) {
                                return '' + value.toLocaleString();
                            },
                            font: {
                                size: 11
                            }
                        }
                    },
                    x: {
                        grid: { 
                            color: 'rgba(255, 255, 255, 0.1)',
                            drawBorder: false
                        },
                        ticks: { 
                            color: '#94a3b8',
                            font: {
                                size: 11
                            }
                        }
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                },
                animations: {
                    tension: {
                        duration: 1000,
                        easing: 'linear'
                    }
                }
            }
        });
    },

    createPlatformGrowthChart(stats) {
        const ctx = document.getElementById('platform-growth-chart');
        if (!ctx) return;

        if (this.state.charts.platformGrowth) {
            this.state.charts.platformGrowth.destroy();
        }

        const labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
        const userData = [150, 320, 480, 650, 820, 1000];
        const investmentData = [500000, 1200000, 2500000, 4000000, 6000000, 8500000];

        this.state.charts.platformGrowth = new Chart(ctx.getContext('2d'), {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [
                    {
                        label: 'New Users',
                        data: userData,
                        backgroundColor: 'rgba(16, 185, 129, 0.7)',
                        borderColor: '#10b981',
                        borderWidth: 1,
                        yAxisID: 'y'
                    },
                    {
                        label: 'Investments ()',
                        data: investmentData,
                        backgroundColor: 'rgba(245, 158, 11, 0.7)',
                        borderColor: '#f59e0b',
                        borderWidth: 1,
                        yAxisID: 'y1',
                        type: 'line',
                        tension: 0.4,
                        fill: false
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                plugins: {
                    legend: { 
                        display: true,
                        position: 'top',
                        labels: {
                            color: '#94a3b8',
                            font: {
                                size: 12
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        grid: { 
                            color: 'rgba(255, 255, 255, 0.1)',
                            drawBorder: false
                        },
                        ticks: { 
                            color: '#94a3b8',
                            font: {
                                size: 11
                            }
                        },
                        title: {
                            display: true,
                            text: 'New Users',
                            color: '#94a3b8'
                        }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        grid: { 
                            drawOnChartArea: false
                        },
                        ticks: { 
                            color: '#94a3b8',
                            callback: function(value) {
                                return '' + (value / 1000000).toFixed(1) + 'M';
                            },
                            font: {
                                size: 11
                            }
                        },
                        title: {
                            display: true,
                            text: 'Investments',
                            color: '#94a3b8'
                        }
                    },
                    x: {
                        grid: { 
                            color: 'rgba(255, 255, 255, 0.1)',
                            drawBorder: false
                        },
                        ticks: { 
                            color: '#94a3b8',
                            font: {
                                size: 11
                            }
                        }
                    }
                }
            }
        });
    },

    // ==================== UTILITY FUNCTIONS (UNCHANGED) ====================
    logout() {
        this.state.currentUser = null;
        this.state.token = null;
        this.state.isAdmin = false;
        this.state.isAuthenticated = false;
        localStorage.removeItem('raw_wealthy_token');
        this.showToast('You have been logged out.', 'info');
        this.showPage('home');
    },

    setLoadingState(buttonId, isLoading) {
        const button = document.getElementById(buttonId);
        if (!button) return;

        const buttonText = button.querySelector('.btn-text');
        const buttonLoading = button.querySelector('.btn-loading');

        if (buttonText && buttonLoading) {
            if (isLoading) {
                button.disabled = true;
                buttonText.style.display = 'none';
                buttonLoading.style.display = 'block';
            } else {
                button.disabled = false;
                buttonText.style.display = 'block';
                buttonLoading.style.display = 'none';
            }
        }
    },

    showLoadingSpinner(show) {
        const spinner = document.getElementById('loading-spinner');
        if (spinner) {
            spinner.style.display = show ? 'flex' : 'none';
        }
    },

    showToast(message, type = 'info') {
        const container = document.getElementById('toast-container');
        if (!container) return;

        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        
        let icon = 'info-circle';
        if (type === 'success') icon = 'check-circle';
        else if (type === 'error') icon = 'exclamation-circle';
        else if (type === 'warning') icon = 'exclamation-triangle';

        toast.innerHTML = `
            <i class="fas fa-${icon}"></i>
            <span>${message}</span>
        `;

        container.appendChild(toast);

        setTimeout(() => {
            if (toast.parentNode === container) {
                container.removeChild(toast);
            }
        }, 5000);
    },

    // ==================== UI HELPERS (UNCHANGED) ====================
    toggleTheme() {
        const body = document.body;
        const icon = document.querySelector('#theme-toggle i');

        if (body.classList.contains('light-mode')) {
            body.classList.remove('light-mode');
            icon.classList.remove('fa-sun');
            icon.classList.add('fa-moon');
            localStorage.setItem('theme', 'dark');
        } else {
            body.classList.add('light-mode');
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
            localStorage.setItem('theme', 'light');
        }
    },

    openMobileMenu() {
        const mobileMenu = document.getElementById('mobile-menu');
        const overlay = document.getElementById('mobile-menu-overlay');
        
        if (mobileMenu) mobileMenu.classList.add('active');
        if (overlay) overlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    },

    closeMobileMenu() {
        const mobileMenu = document.getElementById('mobile-menu');
        const overlay = document.getElementById('mobile-menu-overlay');
        
        if (mobileMenu) mobileMenu.classList.remove('active');
        if (overlay) overlay.classList.remove('active');
        document.body.style.overflow = 'auto';
    },

    handleScroll() {
        const navbar = document.querySelector('.navbar');
        const backToTop = document.getElementById('back-to-top');

        if (navbar && window.scrollY > 50) {
            navbar.classList.add('scrolled');
        } else if (navbar) {
            navbar.classList.remove('scrolled');
        }

        if (backToTop && window.scrollY > 300) {
            backToTop.classList.add('visible');
        } else if (backToTop) {
            backToTop.classList.remove('visible');
        }
    },

    scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    },

    initPasswordToggles() {
        document.querySelectorAll('.password-toggle').forEach(toggle => {
            toggle.addEventListener('click', function() {
                const input = this.previousElementSibling;
                const icon = this.querySelector('i');

                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
        });
    },

    initFileUploadPreviews() {
        const fileInputs = [
            { input: 'investment-proof', preview: 'investment-preview' },
            { input: 'deposit-proof', preview: 'deposit-preview' },
            { input: 'id-front', preview: 'id-front-preview' },
            { input: 'id-back', preview: 'id-back-preview' },
            { input: 'selfie-with-id', preview: 'selfie-with-id-preview' },
            { input: 'address-proof', preview: 'address-proof-preview' }
        ];

        fileInputs.forEach(({ input, preview }) => {
            const inputElement = document.getElementById(input);
            const previewElement = document.getElementById(preview);

            if (inputElement && previewElement) {
                inputElement.addEventListener('change', (e) => {
                    const file = e.target.files[0];
                    if (file) {
                        if (file.size > 10 * 1024 * 1024) {
                            this.showToast('File size exceeds 10MB limit', 'error');
                            e.target.value = '';
                            return;
                        }

                        const reader = new FileReader();
                        reader.onload = (e) => {
                            previewElement.src = e.target.result;
                            previewElement.style.display = 'block';
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
        });
    },

    initAnimations() {
        if ('IntersectionObserver' in window) {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate__animated', 'animate__fadeInUp');
                        observer.unobserve(entry.target);
                    }
                });
            }, { 
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            });

            document.querySelectorAll('.feature, .plan-card, .step, .testimonial-card').forEach(el => {
                observer.observe(el);
            });
        }
    },

    closeModal(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';

            const form = modal.querySelector('form');
            if (form) form.reset();

            const previews = modal.querySelectorAll('.file-preview');
            previews.forEach(preview => {
                preview.style.display = 'none';
                preview.src = '';
            });

            const fileInputs = modal.querySelectorAll('input[type="file"]');
            fileInputs.forEach(input => input.value = '');
        }
    },

    loadInvestmentPlansForModal() {
        const select = document.getElementById('investment-plan');
        if (!select || this.state.investmentPlans.length === 0) return;

        select.innerHTML = '<option value="">Choose a raw material</option>' +
            this.state.investmentPlans.map(plan => `
                <option value="${plan._id}">
                    ${plan.name} - Min: ${(plan.min_amount || 0).toLocaleString()} | Daily: ${plan.daily_interest}%
                </option>
            `).join('');
    },

    // ==================== TAB SWITCHING (UNCHANGED) ====================
    switchProfileTab(tab) {
        ['personal', 'security', 'bank', 'preferences', 'kyc'].forEach(tabId => {
            const element = document.getElementById(`${tabId}-tab`);
            if (element) element.style.display = 'none';
        });

        document.querySelectorAll('.profile-nav a').forEach(item => {
            item.classList.remove('active');
        });

        const tabElement = document.getElementById(`${tab}-tab`);
        if (tabElement) {
            tabElement.style.display = 'block';
        }

        const navItems = document.querySelectorAll('.profile-nav a');
        navItems.forEach(item => {
            if (item.textContent.toLowerCase().includes(tab.toLowerCase())) {
                item.classList.add('active');
            }
        });
    },

    switchSupportCategory(category) {
        ['faq', 'contact'].forEach(catId => {
            const element = document.getElementById(`${catId}-category`);
            if (element) element.style.display = 'none';
        });

        document.querySelectorAll('.support-category').forEach(item => {
            item.classList.remove('active');
        });

        const categoryElement = document.getElementById(`${category}-category`);
        if (categoryElement) {
            categoryElement.style.display = 'block';
        }

        document.querySelectorAll('.support-category').forEach(item => {
            if (item.textContent.toLowerCase().includes(category.toLowerCase())) {
                item.classList.add('active');
            }
        });
    },

    switchAdminTab(tab) {
        ['overview', 'users', 'investments', 'deposits', 'withdrawals', 'kyc-admin'].forEach(tabId => {
            const element = document.getElementById(`${tabId}-tab`);
            if (element) element.style.display = 'none';
        });

        document.querySelectorAll('.admin-nav a').forEach(item => {
            item.classList.remove('active');
        });

        const tabElement = document.getElementById(`${tab}-tab`);
        if (tabElement) {
            tabElement.style.display = 'block';
        }

        document.querySelectorAll('.admin-nav a').forEach(item => {
            if (item.textContent.toLowerCase().includes(tab.toLowerCase())) {
                item.classList.add('active');
            }
        });

        switch(tab) {
            case 'users': 
                this.loadAdminUsers(); 
                break;
            case 'investments': 
                this.loadAdminInvestments(); 
                break;
            case 'deposits': 
                this.loadAdminDeposits(); 
                break;
            case 'withdrawals': 
                this.loadAdminWithdrawals(); 
                break;
            case 'kyc-admin': 
                this.loadAdminKYC(); 
                break;
        }
    },

    toggleFaq(element) {
        const faqItem = element.parentElement;
        const isActive = faqItem.classList.contains('active');
        
        document.querySelectorAll('.faq-item').forEach(item => {
            item.classList.remove('active');
        });
        
        if (!isActive) {
            faqItem.classList.add('active');
        }
    },

    // ==================== ERROR HANDLING (UNCHANGED) ====================
    handleGlobalError(event) {
        console.error('Global error:', event.error);
        this.showToast('An unexpected error occurred', 'error');
    },

    handlePromiseRejection(event) {
        console.error('Unhandled promise rejection:', event.reason);
        this.showToast('An operation failed to complete', 'error');
    },

    // ==================== TWO-FACTOR AUTHENTICATION (UNCHANGED) ====================
    showTwoFactorPrompt() {
        const modal = document.createElement('div');
        modal.className = 'modal';
        modal.id = 'two-factor-modal';
        modal.innerHTML = `
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Two-Factor Authentication</h2>
                    <button class="close-modal" onclick="app.closeModal('two-factor-modal')">&times;</button>
                </div>
                <form id="two-factor-form">
                    <div class="form-group">
                        <label for="two-factor-code">Enter 6-digit code from your authenticator app</label>
                        <input type="text" id="two-factor-code" class="form-control" 
                               placeholder="000000" maxlength="6" pattern="[0-9]{6}" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        Verify
                    </button>
                </form>
            </div>
        `;

        document.body.appendChild(modal);
        this.openModal('two-factor-modal');

        document.getElementById('two-factor-form').addEventListener('submit', (e) => {
            e.preventDefault();
            this.verifyTwoFactorCode();
        });
    },

    async verifyTwoFactorCode() {
        const code = document.getElementById('two-factor-code').value;
        
        try {
            const response = await this.apiRequest('/api/auth/verify-2fa', {
                method: 'POST',
                body: { code }
            });

            this.showToast(' Two-factor authentication successful!', 'success');
            this.closeModal('two-factor-modal');
            
            setTimeout(() => {
                if (this.state.isAdmin) {
                    this.showPage('admin');
                } else {
                    this.showPage('dashboard');
                }
            }, 1000);
        } catch (error) {
            this.showToast('Invalid verification code', 'error');
        }
    },

    // ==================== PASSWORD MANAGEMENT (UNCHANGED) ====================
    async handlePasswordReset(e) {
        e.preventDefault();
        
        const email = document.getElementById('reset-email').value.trim();
        
        if (!email) {
            this.showToast('Please enter your email address', 'error');
            return;
        }

        try {
            await this.apiRequest('/api/auth/forgot-password', {
                method: 'POST',
                body: { email: email }
            });

            this.showToast(' Password reset instructions sent to your email!', 'success');
            this.closeModal('password-reset-modal');
            document.getElementById('reset-email').value = '';
        } catch (error) {
            console.error('Password reset error:', error);
        }
    },

    async handlePasswordChange(e) {
        e.preventDefault();

        const currentPassword = document.getElementById('current-password').value;
        const newPassword = document.getElementById('new-password').value;
        const confirmPassword = document.getElementById('confirm-new-password').value;

        if (newPassword !== confirmPassword) {
            this.showToast('New passwords do not match!', 'error');
            return;
        }

        if (newPassword.length < 6) {
            this.showToast('New password must be at least 6 characters', 'error');
            return;
        }

        try {
            await this.apiRequest('/api/auth/change-password', {
                method: 'POST',
                body: {
                    current_password: currentPassword,
                    new_password: newPassword
                }
            });

            this.showToast(' Password changed successfully!', 'success');
            e.target.reset();
        } catch (error) {
            console.error('Password change error:', error);
            this.showToast('Error changing password', 'error');
        }
    },

    // ==================== NOTIFICATION SYSTEM (UNCHANGED) ====================
    async loadNotifications() {
        if (!this.state.currentUser) return;

        try {
            const response = await this.apiRequest('/api/notifications?limit=10');
            const notifications = response.data?.notifications || [];
            this.state.notifications = notifications;

            const unreadCount = notifications.filter(n => !n.is_read).length;
            const badge = document.getElementById('notification-badge');
            if (badge) {
                badge.textContent = unreadCount;
                badge.style.display = unreadCount > 0 ? 'flex' : 'none';
            }
        } catch (error) {
            console.error('Failed to load notifications:', error);
        }
    },

    // ==================== DAILY INTEREST CALCULATION (UNCHANGED) ====================
    showDailyInterestCalculation(investments) {
        const calculator = document.getElementById('daily-interest-calculator');
        const breakdown = document.getElementById('interest-breakdown');
        
        if (!calculator || !breakdown) return;

        if (investments.length === 0) {
            calculator.style.display = 'none';
            return;
        }

        let totalDailyInterest = 0;
        let html = '<h4>Daily Interest Breakdown</h4>';

        investments.forEach(investment => {
            const dailyInterest = (investment.amount * (investment.plan?.daily_interest || 0) / 100);
            totalDailyInterest += dailyInterest;
            
            html += `
                <div class="interest-item">
                    <span>${investment.plan?.name || 'Plan'}:</span>
                    <span>${dailyInterest.toLocaleString()}</span>
                </div>
            `;
        });

        html += `
            <div class="interest-total">
                <span><strong>Total Daily Interest:</strong></span>
                <span><strong>${totalDailyInterest.toLocaleString()}</strong></span>
            </div>
            <div class="interest-note">
                <small>Interest is calculated and added to your balance daily</small>
            </div>
        `;

        breakdown.innerHTML = html;
        calculator.style.display = 'block';
    },

    // ==================== SETUP EVENT LISTENERS (UNCHANGED) ====================
    setupEventListeners() {
        const themeToggle = document.getElementById('theme-toggle');
        if (themeToggle) {
            themeToggle.addEventListener('click', () => this.toggleTheme());
        }

        const hamburger = document.getElementById('hamburger');
        if (hamburger) {
            hamburger.addEventListener('click', () => this.openMobileMenu());
        }

        const closeMobileMenu = document.getElementById('close-mobile-menu');
        if (closeMobileMenu) {
            closeMobileMenu.addEventListener('click', () => this.closeMobileMenu());
        }

        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
        if (mobileMenuOverlay) {
            mobileMenuOverlay.addEventListener('click', () => this.closeMobileMenu());
        }

        const backToTop = document.getElementById('back-to-top');
        if (backToTop) {
            backToTop.addEventListener('click', () => this.scrollToTop());
        }

        this.setupFormListeners();
        this.initPasswordToggles();
        this.initFileUploadPreviews();

        window.addEventListener('scroll', () => this.handleScroll());

        const withdrawAmount = document.getElementById('withdraw-amount');
        if (withdrawAmount) {
            withdrawAmount.addEventListener('input', () => this.updateWithdrawalFee());
        }

        const investAmount = document.getElementById('investment-amount');
        const investPlan = document.getElementById('investment-plan');
        if (investAmount && investPlan) {
            investAmount.addEventListener('input', () => this.calculateInvestmentInterest());
            investPlan.addEventListener('change', () => this.calculateInvestmentInterest());
        }

        window.addEventListener('hashchange', () => window.scrollTo(0, 0));

        window.addEventListener('error', (e) => this.handleGlobalError(e));
        window.addEventListener('unhandledrejection', (e) => this.handlePromiseRejection(e));
    },

    setupFormListeners() {
        const forms = {
            'registration-form': (e) => this.handleRegistration(e),
            'login-form': (e) => this.handleLogin(e),
            'invest-form': (e) => this.handleInvestment(e),
            'deposit-form': (e) => this.handleDeposit(e),
            'withdraw-form': (e) => this.handleWithdrawal(e),
            'personal-form': (e) => this.handleProfileUpdate(e),
            'bank-form': (e) => this.handleBankUpdate(e),
            'kyc-form': (e) => this.handleKYCSubmission(e),
            'support-form': (e) => this.handleSupportRequest(e),
            'password-reset-form': (e) => this.handlePasswordReset(e),
            'password-change-form': (e) => this.handlePasswordChange(e),
            'preferences-form': (e) => this.handlePreferencesUpdate(e)
        };

        Object.entries(forms).forEach(([formId, handler]) => {
            const form = document.getElementById(formId);
            if (form) {
                form.addEventListener('submit', handler);
            }
        });
    },

    testAPIConnection() {
        try {
            fetch(`${this.config.API_BASE_URL}/health`)
                .then(response => {
                    if (response.ok) {
                        console.log(' API Connection: SUCCESS');
                    } else {
                        console.warn(' API Connection: WEAK');
                    }
                })
                .catch(error => {
                    console.error(' API Connection: FAILED');
                    this.showToast('Backend connection issue. Some features may be limited.', 'warning');
                });
        } catch (error) {
            console.error('API connection test error:', error);
        }
    },

    initTheme() {
        const savedTheme = localStorage.getItem('theme') || 'dark';
        if (savedTheme === 'light') {
            document.body.classList.add('light-mode');
            const themeIcon = document.querySelector('#theme-toggle i');
            if (themeIcon) {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            }
        }
    },

    // ==================== NEW: OPEN INVESTMENT MODAL ====================
    openInvestmentModal(planId) {
        const plan = this.state.investmentPlans.find(p => p._id === planId);
        if (!plan) return;

        const modalId = 'invest-modal';
        const modal = document.getElementById(modalId);
        if (!modal) return;

        // Set plan selection
        const planSelect = document.getElementById('investment-plan');
        if (planSelect) {
            planSelect.value = planId;
        }

        // Set minimum amount
        const amountInput = document.getElementById('investment-amount');
        if (amountInput) {
            amountInput.min = plan.min_amount;
            amountInput.placeholder = `Minimum: ${plan.min_amount.toLocaleString()}`;
        }

        // Open modal
        this.openModal(modalId);
        this.calculateInvestmentInterest();
    }
};

// ==================== GLOBAL EVENT HANDLERS ====================
window.addEventListener('DOMContentLoaded', function() {
    app.init();
});

window.onclick = function(event) {
    if (event.target.classList.contains('modal')) {
        app.closeModal(event.target.id);
    }
};

document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        const modals = document.querySelectorAll('.modal');
        modals.forEach(modal => {
            if (modal.style.display === 'flex') {
                app.closeModal(modal.id);
            }
        });
    }
});

document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        if (targetId === '#') return;

        const targetElement = document.querySelector(targetId);
        if (targetElement) {
            window.scrollTo({
                top: targetElement.offsetTop - 80,
                behavior: 'smooth'
            });
        }
    });
});

document.addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
        const activeElement = document.activeElement;
        if (activeElement && activeElement.id === 'user-search') {
            app.loadAdminUsers();
        }
    }
});

setInterval(() => {
    if (app.state.isAuthenticated && !app.state.isAdmin) {
        app.updateDashboard();
    }
}, 30000);

setInterval(() => {
    if (app.state.isAdmin) {
        app.loadAdminData();
    }
}, 60000);</script>
</body>
</html>
rate this project 
